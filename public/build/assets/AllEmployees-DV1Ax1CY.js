import{a as B,Q as b}from"./QSelect-pXxb1_KL.js";import{Q as H,a as J}from"./QBreadcrumbs-DfwQgHD9.js";import{r as v,i as K,c as u,o as i,w as n,b as a,f as o,B as R,d as U,F as $,n as M,m as h,p as C,q as V,t as g,v as j,y as O,z as E,e as Q,l as X,Q as Y,u as Z}from"./app-USHRBPi5.js";import{a as ee,Q as le}from"./QLayout-DqePour4.js";import{Q as S}from"./QTd-DJ9Aw1nE.js";import{Q as oe}from"./QTable-CXqTM-kG.js";import{_ as te}from"./BackendLayout-C8b340fR.js";import{u as ae}from"./use-quasar-X9-tzcE4.js";import{u as se}from"./useUtils-k9C0MnH8.js";/* empty css            */import"./use-fullscreen-CnKp7wVl.js";import"./touch-erwLTBTE.js";import"./date-BsVtBh0i.js";const ne={class:"flex items-center justify-between q-pa-md bg-white"},ie={class:"stitle"},re={class:"q-gutter-sm"},ue={class:"q-pa-md"},de={class:"q-gutter-md row q-col-gutter-md"},me={class:"row justify-between items-center"},ce={class:"text-grey-6 text-subtitle1"},pe={class:"text-h5 text-weight-bold"},fe={class:"row q-col-gutter-md"},ge={class:"row q-gutter-sm col-12 col-sm justify-end"},ye={class:"flex items-center gap-3"},be={class:"text-body1"},ve={class:"text-caption text-grey"},we={class:"text-caption text-grey"},Me=Object.assign({layout:te},{__name:"AllEmployees",props:["offices","totalEmployees","peCount","mrCount","designations","educationQlnPe","educationQlnMr","skills"],setup(c){const{formatDate:T}=se(),p=c;console.log(p.offices);const D=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"employment_type",label:"Employment Type",align:"left",field:"employment_type",sortable:!1},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!1},{name:"name_of_workplace",label:"Workplace",align:"left",field:"name_of_workplace",sortable:!1},{name:"office",label:"Office",align:"left",field:"office",sortable:!0},{name:"actions",label:"Actions",align:"center"}],N=[{title:"Total",value:p.totalEmployees,icon:"person_search",iconColor:"light-blue-5",bgColor:"#d6f3ff"},{title:"Muster Roll",value:p.mrCount,icon:"how_to_reg",iconColor:"indigo-6",bgColor:"#d7d9ff"},{title:"Provisional",value:p.peCount,icon:"person_add",iconColor:"orange-5",bgColor:"#ffe9d6"}],t=v({office:[],type:null,skill:null,search:null,designation:null,education_qln_pe:null,education_qln_mr:null}),z=[{label:"MR",value:"MR"},{label:"PE",value:"PE"}];v("");const w=ae(),P=v([]),x=v(!1),d=v({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),f=()=>{q({pagination:d.value,filter:t.value,search:t.value.search})};function q(s){const{page:l,rowsPerPage:e,sortBy:r,descending:m}=s.pagination,F=s.filter,L=s.search;x.value=!0,axios.get(route("employees.json-manager-all"),{params:{filter:F,page:l,rowsPerPage:e,search:L}}).then(y=>{const{list:_}=y.data,{data:k,per_page:I,current_page:W,total:G,to:_e,from:ke}=_;P.value=k,d.value.page=W,d.value.rowsNumber=G,d.value.rowsPerPage=I}).catch(y=>{var _,k;w.notify({type:"negative",message:(k=(_=y==null?void 0:y.response)==null?void 0:_.data)==null?void 0:k.message})}).finally(()=>x.value=!1)}const A=()=>{var l;w.loading.show();const s=(l=p.offices)!=null&&l.length?p.offices[0]:null;axios.get(route("export.all",s==null?void 0:s.value),{responseType:"blob"}).then(e=>{const r=window.URL.createObjectURL(new Blob([e.data])),m=document.createElement("a");m.href=r,m.setAttribute("download",((s==null?void 0:s.label)||"employees").replace(/\s+/g,"_")+"_all_employees.xlsx"),m.click()}).catch(e=>{var r,m;w.notify({type:"negative",message:((m=(r=e.response)==null?void 0:r.data)==null?void 0:m.message)||"Failed to download file"})}).finally(()=>{w.loading.hide()})};return K(()=>{q({pagination:d.value,filter:t.value,search:t.value.search})}),(s,l)=>(i(),u(le,{class:"container",padding:""},{default:n(()=>[a("div",ne,[a("div",null,[a("div",ie,[l[10]||(l[10]=R("All Employee List : ")),(i(!0),U($,null,M(c.offices,e=>(i(),u(B,{square:"",key:e.value,label:e.label},null,8,["label"]))),128))]),o(H,{class:"text-dark"},{default:n(()=>[o(J,{onClick:l[0]||(l[0]=e=>s.$inertia.get(s.route("dashboard"))),icon:"dashboard",label:"Dashboard"})]),_:1})]),a("div",re,[o(h,{label:"PE Summary",color:"primary",onClick:l[1]||(l[1]=e=>s.$inertia.get(s.route("summary.pe")))}),o(h,{label:"MR Summary",color:"primary",onClick:l[2]||(l[2]=e=>s.$inertia.get(s.route("summary.mr")))})])]),l[13]||(l[13]=a("br",null,null,-1)),o(C,{flat:""},{default:n(()=>[o(V,null,{default:n(()=>[a("div",ue,[a("div",de,[(i(),U($,null,M(N,e=>o(C,{flat:"",bordered:"",class:"col-12 col-sm bg-white q-px-md q-py-lg shadow-1",key:e.title},{default:n(()=>[a("div",me,[a("div",null,[a("div",ce,g(e.title),1),a("div",pe,g(e.value),1),l[11]||(l[11]=a("div",{class:"text-caption text-grey-6 q-mt-xs"}," Employees ",-1))]),o(j,{size:"48px",style:O({backgroundColor:e.bgColor}),"text-color":"white"},{default:n(()=>[o(E,{name:e.icon,color:e.iconColor,size:"20px"},null,8,["name","color"])]),_:2},1032,["style"])])]),_:2},1024)),64))]),o(C,{flat:"",bordered:"",class:"q-mt-md bg-white shadow-1"},{default:n(()=>[o(V,null,{default:n(()=>[l[12]||(l[12]=a("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Search Filter ",-1)),a("div",fe,[o(b,{label:"Select Employment Type",class:"col-12 col-sm-4",modelValue:t.value.type,"onUpdate:modelValue":[l[3]||(l[3]=e=>t.value.type=e),f],options:z,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"]),t.value.type==="PE"?(i(),u(b,{key:0,label:"Select Designation",class:"col-12 col-sm-4",modelValue:t.value.designation,"onUpdate:modelValue":[l[4]||(l[4]=e=>t.value.designation=e),f],options:c.designations,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])):Q("",!0),t.value.type==="MR"?(i(),u(b,{key:1,label:"Select Skill",class:"col-12 col-sm-4",modelValue:t.value.skill,"onUpdate:modelValue":[l[5]||(l[5]=e=>t.value.skill=e),f],options:c.skills,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])):Q("",!0),t.value.type==="PE"?(i(),u(b,{key:2,label:"Select Education Qln.",class:"col-12 col-sm-4",modelValue:t.value.education_qln_pe,"onUpdate:modelValue":[l[6]||(l[6]=e=>t.value.education_qln_pe=e),f],options:c.educationQlnPe,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])):Q("",!0),t.value.type==="MR"?(i(),u(b,{key:3,label:"Select Education Qln.",class:"col-12 col-sm-4",modelValue:t.value.education_qln_mr,"onUpdate:modelValue":[l[7]||(l[7]=e=>t.value.education_qln_mr=e),f],options:c.educationQlnMr,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])):Q("",!0)])]),_:1,__:[12]}),o(X),o(V,{class:"row items-center justify-between q-gutter-md"},{default:n(()=>[a("div",ge,[o(h,{label:"Export",icon:"desktop_windows",color:"primary",onClick:A}),o(Y,{dense:"",outlined:"",debounce:"300",modelValue:t.value.search,"onUpdate:modelValue":[l[8]||(l[8]=e=>t.value.search=e),f],placeholder:"Search",class:"col-12 col-sm-auto",clearable:""},{append:n(()=>[o(E,{name:"search"})]),_:1},8,["modelValue"])])]),_:1})]),_:1})])]),_:1}),o(oe,{flat:"",ref:"tableRef",rows:P.value,columns:D,"row-key":"id",pagination:d.value,"onUpdate:pagination":l[9]||(l[9]=e=>d.value=e),loading:x.value,filter:t.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:q},{"body-cell-employee":n(e=>[o(S,{props:e},{default:n(()=>[a("div",ye,[o(j,null,{default:n(()=>[e.row.avatar?(i(),u(ee,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(i(),u(E,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),a("div",null,[a("div",be,g(e.row.name),1),a("div",ve,g(e.row.mobile),1),a("div",we,g(Z(T)(e.row.date_of_birth)),1)])])]),_:2},1032,["props"])]),"body-cell-office":n(e=>[o(S,{props:e},{default:n(()=>[o(B,{color:"primary","text-color":"white",dense:""},{default:n(()=>{var r;return[R(g((r=e.row.office)==null?void 0:r.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-actions":n(e=>[o(S,{props:e},{default:n(()=>[o(h,{dense:"",flat:"",round:"",color:"primary",icon:"visibility",onClick:r=>s.$inertia.get(s.route("employee.show",e.row.id)),"aria-label":"Show user"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading","filter"])]),_:1})]),_:1,__:[13]}))}});export{Me as default};
