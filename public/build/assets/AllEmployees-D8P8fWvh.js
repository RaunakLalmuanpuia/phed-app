import{Q as B}from"./QChip-CM8_4_HM.js";import{Q as K,a as U}from"./QBreadcrumbs-B2QfNl3X.js";import{r as w,l as O,d as r,o as i,w as n,e as s,i as a,h as W,f as $,F as R,v as M,q as k,y as q,z as x,t as v,A as D,B as X,D as E,g as b,p as Y,Q as Z,u as ee}from"./app-BUqhnzPm.js";import{Q as g}from"./QSelect-CCVo7Y3Q.js";import{a as le,Q as oe}from"./QLayout-CwzJPS3D.js";import{Q as S}from"./QTd-Cpho22aX.js";import{Q as ae}from"./QTable-Dj5hSTBf.js";import{_ as te}from"./BackendLayout-B4VKV5U2.js";import{u as se}from"./use-quasar-Gqu1uUMC.js";import{u as ne}from"./useUtils-ppGv4Db3.js";/* empty css            */import"./format-C4QW3o8r.js";import"./QMarkupTable-Cc6WqFhy.js";import"./use-fullscreen-Be-XHZoV.js";import"./touch-QnEEk1Q2.js";import"./QSlideTransition-C3WU2b4u.js";import"./date-Byi8jsRW.js";const ie={class:"flex items-center justify-between q-pa-md bg-white"},re={class:"stitle"},ue={class:"q-gutter-sm"},de={class:"q-pa-md"},me={class:"q-gutter-md row q-col-gutter-md"},ce={class:"row justify-between items-center"},pe={class:"text-grey-6 text-subtitle1"},fe={class:"text-h5 text-weight-bold"},ge={class:"row q-col-gutter-md"},ve={class:"row q-gutter-sm col-12 col-sm justify-end"},be={class:"flex items-center gap-3"},ye={class:"text-body1"},we={class:"text-caption text-grey"},ke={class:"text-caption text-grey"},Te=Object.assign({layout:te},{__name:"AllEmployees",props:["offices","totalEmployees","wcCount","peCount","mrCount","designationsPe","designationsWc","educationQlnWc","educationQlnPe","educationQlnMr","skills"],setup(d){const{formatDate:j}=ne(),c=d;console.log(c.offices);const A=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"employment_type",label:"Employment Type",align:"left",field:"employment_type",sortable:!1},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!1},{name:"post_assigned",label:"Post/Work Assigned",align:"left",field:"post_assigned",sortable:!1},{name:"name_of_workplace",label:"Workplace",align:"left",field:"name_of_workplace",sortable:!1},{name:"office",label:"Office",align:"left",field:"office",sortable:!0},{name:"actions",label:"Actions",align:"center"}],T=[{title:"Total",value:c.totalEmployees,icon:"person_search",iconColor:"light-blue-5",bgColor:"#d6f3ff"},{title:"Work Charge",value:c.wcCount,icon:"person",iconColor:"red-6",bgColor:"#ffe1e1"},{title:"Provisional",value:c.peCount,icon:"person_add",iconColor:"orange-5",bgColor:"#ffe9d6"},{title:"Muster Roll",value:c.mrCount,icon:"how_to_reg",iconColor:"indigo-6",bgColor:"#d7d9ff"}],o=w({office:[],type:null,skill:null,search:null,designation:null,educational_qln:null}),N=[{label:"MR",value:"MR"},{label:"PE",value:"PE"},{label:"WC",value:"WC"}];w("");const C=se(),P=w([]),V=w(!1),p=w({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),m=()=>{_({pagination:p.value,filter:o.value,search:o.value.search})};function _(t){const{page:l,rowsPerPage:e,sortBy:u,descending:f}=t.pagination,L=t.filter,I=t.search;V.value=!0,axios.get(route("employees.json-manager-all"),{params:{filter:L,page:l,rowsPerPage:e,search:I}}).then(y=>{const{list:Q}=y.data,{data:h,per_page:G,current_page:H,total:J,to:Ce,from:Qe}=Q;P.value=h,p.value.page=H,p.value.rowsNumber=J,p.value.rowsPerPage=G}).catch(y=>{var Q,h;C.notify({type:"negative",message:(h=(Q=y==null?void 0:y.response)==null?void 0:Q.data)==null?void 0:h.message})}).finally(()=>V.value=!1)}const z=()=>{var l;C.loading.show();const t=(l=c.offices)!=null&&l.length?c.offices[0]:null;axios.get(route("export.all",t==null?void 0:t.value),{responseType:"blob"}).then(e=>{const u=window.URL.createObjectURL(new Blob([e.data])),f=document.createElement("a");f.href=u,f.setAttribute("download",((t==null?void 0:t.label)||"employees").replace(/\s+/g,"_")+"_all_employees.xlsx"),f.click()}).catch(e=>{var u,f;C.notify({type:"negative",message:((f=(u=e.response)==null?void 0:u.data)==null?void 0:f.message)||"Failed to download file"})}).finally(()=>{C.loading.hide()})};O(()=>{_({pagination:p.value,filter:o.value,search:o.value.search})});const F=()=>{window.history.back()};return(t,l)=>(i(),r(oe,{class:"container",padding:""},{default:n(()=>[s("div",ie,[s("div",null,[s("div",re,[l[13]||(l[13]=W("All Employee List : ")),(i(!0),$(R,null,M(d.offices,e=>(i(),r(B,{square:"",key:e.value,label:e.label},null,8,["label"]))),128))]),a(K,{class:"text-dark"},{default:n(()=>[a(U,{class:"cursor-pointer",onClick:l[0]||(l[0]=e=>t.$inertia.get(t.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),a(U,{class:"cursor-pointer",label:"Go Back",onClick:F})]),_:1})]),s("div",ue,[a(k,{label:"WC Summary",color:"primary",onClick:l[1]||(l[1]=e=>t.$inertia.get(t.route("summary.wc")))}),a(k,{label:"PE Summary",color:"primary",onClick:l[2]||(l[2]=e=>t.$inertia.get(t.route("summary.pe")))}),a(k,{label:"MR Summary",color:"primary",onClick:l[3]||(l[3]=e=>t.$inertia.get(t.route("summary.mr")))})])]),l[16]||(l[16]=s("br",null,null,-1)),a(q,{flat:""},{default:n(()=>[a(x,null,{default:n(()=>[s("div",de,[s("div",me,[(i(),$(R,null,M(T,e=>a(q,{flat:"",bordered:"",class:"col-12 col-sm bg-white q-px-md q-py-lg shadow-1",key:e.title},{default:n(()=>[s("div",ce,[s("div",null,[s("div",pe,v(e.title),1),s("div",fe,v(e.value),1),l[14]||(l[14]=s("div",{class:"text-caption text-grey-6 q-mt-xs"}," Employees ",-1))]),a(D,{size:"48px",style:X({backgroundColor:e.bgColor}),"text-color":"white"},{default:n(()=>[a(E,{name:e.icon,color:e.iconColor,size:"20px"},null,8,["name","color"])]),_:2},1032,["style"])])]),_:2},1024)),64))]),a(q,{flat:"",bordered:"",class:"q-mt-md bg-white shadow-1"},{default:n(()=>[a(x,null,{default:n(()=>[l[15]||(l[15]=s("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Search Filter ",-1)),s("div",ge,[a(g,{label:"Select Employment Type",class:"col-12 col-sm-4",modelValue:o.value.type,"onUpdate:modelValue":[l[4]||(l[4]=e=>o.value.type=e),m],options:N,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"]),o.value.type==="PE"?(i(),r(g,{key:0,label:"Select Designation",class:"col-12 col-sm-4",modelValue:o.value.designation,"onUpdate:modelValue":[l[5]||(l[5]=e=>o.value.designation=e),m],options:d.designationsPe,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])):b("",!0),o.value.type==="WC"?(i(),r(g,{key:1,label:"Select Designation",class:"col-12 col-sm-4",modelValue:o.value.designation,"onUpdate:modelValue":[l[6]||(l[6]=e=>o.value.designation=e),m],options:d.designationsWc,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])):b("",!0),o.value.type==="MR"?(i(),r(g,{key:2,label:"Select Skill",class:"col-12 col-sm-4",modelValue:o.value.skill,"onUpdate:modelValue":[l[7]||(l[7]=e=>o.value.skill=e),m],options:d.skills,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])):b("",!0),o.value.type==="WC"?(i(),r(g,{key:3,label:"Select Education Qln.",class:"col-12 col-sm-4",modelValue:o.value.educational_qln,"onUpdate:modelValue":[l[8]||(l[8]=e=>o.value.educational_qln=e),m],options:d.educationQlnWc,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])):b("",!0),o.value.type==="PE"?(i(),r(g,{key:4,label:"Select Education Qln.",class:"col-12 col-sm-4",modelValue:o.value.educational_qln,"onUpdate:modelValue":[l[9]||(l[9]=e=>o.value.educational_qln=e),m],options:d.educationQlnPe,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])):b("",!0),o.value.type==="MR"?(i(),r(g,{key:5,label:"Select Education Qln.",class:"col-12 col-sm-4",modelValue:o.value.educational_qln,"onUpdate:modelValue":[l[10]||(l[10]=e=>o.value.educational_qln=e),m],options:d.educationQlnMr,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])):b("",!0)])]),_:1,__:[15]}),a(Y),a(x,{class:"row items-center justify-between q-gutter-md"},{default:n(()=>[s("div",ve,[a(k,{label:"Export",icon:"desktop_windows",color:"primary",onClick:z}),a(Z,{dense:"",outlined:"",debounce:"300",modelValue:o.value.search,"onUpdate:modelValue":[l[11]||(l[11]=e=>o.value.search=e),m],placeholder:"Search",class:"col-12 col-sm-auto",clearable:""},{append:n(()=>[a(E,{name:"search"})]),_:1},8,["modelValue"])])]),_:1})]),_:1})])]),_:1}),a(ae,{flat:"",ref:"tableRef",rows:P.value,columns:A,"row-key":"id",pagination:p.value,"onUpdate:pagination":l[12]||(l[12]=e=>p.value=e),loading:V.value,filter:o.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:_},{"body-cell-employee":n(e=>[a(S,{props:e},{default:n(()=>[s("div",be,[a(D,null,{default:n(()=>[e.row.avatar?(i(),r(le,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(i(),r(E,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),s("div",null,[s("div",ye,v(e.row.name),1),s("div",we,v(e.row.mobile),1),s("div",ke,v(ee(j)(e.row.date_of_birth)),1)])])]),_:2},1032,["props"])]),"body-cell-office":n(e=>[a(S,{props:e},{default:n(()=>[a(B,{color:"primary","text-color":"white",dense:""},{default:n(()=>{var u;return[W(v((u=e.row.office)==null?void 0:u.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-actions":n(e=>[a(S,{props:e},{default:n(()=>[a(k,{dense:"",flat:"",round:"",color:"primary",icon:"visibility",onClick:u=>t.$inertia.get(t.route("employee.show",e.row.id)),"aria-label":"Show user"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading","filter"])]),_:1})]),_:1,__:[16]}))}});export{Te as default};
