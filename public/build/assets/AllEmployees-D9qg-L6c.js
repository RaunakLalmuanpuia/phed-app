import{Q as L,a as O}from"./QBreadcrumbs-C-SfAYRs.js";import{r as g,a as W,i as f,o as r,j as a,f as o,g as l,t as d,p as Q,q as x,c as G,F as H,n as J,v as B,y as K,z as u,Q as P,l as X,I as S,B as w,R as q}from"./app-DFzdqFeF.js";import{Q as $,a as Y}from"./QSelect-ioEONwWt.js";import{a as Z,Q as ee}from"./QLayout-BPY5-vY_.js";import{Q as le,a as V}from"./QTable-DyyvSLcV.js";import{_ as ae,b as te,Q as oe,a as E,c as p}from"./BackendLayout-iW6Wx3_Y.js";import{u as se}from"./use-quasar-DcXurzQr.js";import"./use-fullscreen-C9ydLhW8.js";import"./touch-yuHTg2TQ.js";const ie={class:"flex items-center justify-between q-pa-md bg-white"},ne={class:"stitle"},re={class:"q-pa-md"},de={class:"q-gutter-md row q-col-gutter-md"},ue={class:"row justify-between items-center"},ce={class:"text-grey-6 text-subtitle1"},me={class:"text-h5 text-weight-bold"},fe={class:"row q-col-gutter-md"},pe={class:"row q-gutter-sm col-12 col-sm justify-end"},ge={class:"flex items-center gap-3"},ve={class:"text-body1"},be={class:"text-caption text-grey"},ye={class:"text-caption text-grey"},Be=Object.assign({layout:ae},{__name:"AllEmployees",props:["office","canCreate","canEdit","canDelete","totalEmployees","peCount","mrCount","deletedCount"],setup(k){const v=k,R=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"employment_type",label:"Employment Type",align:"left",field:"employment_type",sortable:!1},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!1},{name:"name_of_workplace",label:"Workplace",align:"left",field:"name_of_workplace",sortable:!1},{name:"office",label:"Office",align:"left",field:"office",sortable:!0},{name:"actions",label:"Actions",align:"center"}],j=[{title:"Total",value:v.totalEmployees,icon:"person_search",iconColor:"light-blue-5",bgColor:"#d6f3ff"},{title:"Muster Roll",value:v.mrCount,icon:"how_to_reg",iconColor:"indigo-6",bgColor:"#d7d9ff"},{title:"Provisional",value:v.peCount,icon:"person_add",iconColor:"orange-5",bgColor:"#ffe9d6"}],s=g({type:null,skill:null,search:null}),D=[{label:"MR",value:"MR"},{label:"PE",value:"PE"}],U=[{label:"Skilled-I",value:"skilled-I"},{label:"Unskilled",value:"unskilled"},{label:"Semi-Skilled",value:"semi-skilled"},{label:"Skilled-II",value:"skilled-II"}];g("");const T=se(),I=g([]),h=g(!1),n=g({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),b=()=>{C({pagination:n.value,filter:s.value,search:s.value.search})};function C(i){const{page:t,rowsPerPage:e,sortBy:c,descending:_e}=i.pagination,z=i.filter,A=i.search;h.value=!0,axios.get(route("employees.json-index-all",v.office),{params:{filter:z,page:t,rowsPerPage:e,search:A}}).then(m=>{console.log(m.data);const{list:y}=m.data,{data:_,per_page:N,current_page:M,total:F,to:we,from:ke}=y;I.value=_,n.value.page=M,n.value.rowsNumber=F,n.value.rowsPerPage=N}).catch(m=>{var y,_;T.notify({type:"negative",message:(_=(y=m==null?void 0:m.response)==null?void 0:y.data)==null?void 0:_.message})}).finally(()=>h.value=!1)}return W(()=>{C({pagination:n.value,filter:s.value,search:s.value.search})}),(i,t)=>(r(),f(ee,{class:"container",padding:""},{default:a(()=>[o("div",ie,[o("div",null,[o("div",ne,"All Employee List : "+d(k.office.name),1),l(L,{class:"text-dark"},{default:a(()=>[l(O,{onClick:t[0]||(t[0]=e=>i.$inertia.get(i.route("dashboard"))),icon:"dashboard",label:"Dashboard"})]),_:1})])]),t[11]||(t[11]=o("br",null,null,-1)),l(Q,{flat:""},{default:a(()=>[l(x,null,{default:a(()=>[o("div",re,[o("div",de,[(r(),G(H,null,J(j,e=>l(Q,{flat:"",bordered:"",class:"col-12 col-sm bg-white q-px-md q-py-lg shadow-1",key:e.title},{default:a(()=>[o("div",ue,[o("div",null,[o("div",ce,d(e.title),1),o("div",me,d(e.value),1),t[6]||(t[6]=o("div",{class:"text-caption text-grey-6 q-mt-xs"}," Employees ",-1))]),l(B,{size:"48px",style:K({backgroundColor:e.bgColor}),"text-color":"white"},{default:a(()=>[l(u,{name:e.icon,color:e.iconColor,size:"20px"},null,8,["name","color"])]),_:2},1032,["style"])])]),_:2},1024)),64))]),l(Q,{flat:"",bordered:"",class:"q-mt-md bg-white shadow-1"},{default:a(()=>[l(x,null,{default:a(()=>[t[7]||(t[7]=o("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Search Filter ",-1)),o("div",fe,[l(P,{dense:"",outlined:"",debounce:"300",modelValue:s.value.search,"onUpdate:modelValue":[t[1]||(t[1]=e=>s.value.search=e),b],placeholder:"Search",class:"col-12 col-sm-4",clearable:""},{append:a(()=>[l(u,{name:"search"})]),_:1},8,["modelValue"]),l($,{label:"Select Employment Type",class:"col-12 col-sm-4",modelValue:s.value.type,"onUpdate:modelValue":[t[2]||(t[2]=e=>s.value.type=e),b],options:D,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"]),l($,{label:"Select Skill",class:"col-12 col-sm-4",modelValue:s.value.skill,"onUpdate:modelValue":[t[3]||(t[3]=e=>s.value.skill=e),b],options:U,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"])])]),_:1,__:[7]}),l(X),l(x,{class:"row items-center justify-between q-gutter-md"},{default:a(()=>[o("div",pe,[l(P,{dense:"",outlined:"",debounce:"300",modelValue:s.value.search,"onUpdate:modelValue":[t[4]||(t[4]=e=>s.value.search=e),b],placeholder:"Search",class:"col-12 col-sm-auto",clearable:""},{append:a(()=>[l(u,{name:"search"})]),_:1},8,["modelValue"])])]),_:1})]),_:1})])]),_:1}),l(le,{flat:"",ref:"tableRef",title:k.office.name,rows:I.value,columns:R,"row-key":"id",pagination:n.value,"onUpdate:pagination":t[5]||(t[5]=e=>n.value=e),loading:h.value,filter:s.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:C},{"body-cell-employee":a(e=>[l(V,{props:e},{default:a(()=>[o("div",ge,[l(B,null,{default:a(()=>[e.row.avatar?(r(),f(Z,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(r(),f(u,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),o("div",null,[o("div",ve,d(e.row.name),1),o("div",be,d(e.row.mobile),1),o("div",ye,d(e.row.date_of_birth),1)])])]),_:2},1032,["props"])]),"body-cell-office":a(e=>[l(V,{props:e},{default:a(()=>[l(Y,{color:"primary","text-color":"white",dense:""},{default:a(()=>{var c;return[w(d((c=e.row.office)==null?void 0:c.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-actions":a(e=>[l(V,{props:e},{default:a(()=>[l(te,{dense:"",flat:"",round:"",color:"primary","dropdown-icon":"more_vert","aria-label":"Actions"},{default:a(()=>[l(oe,{style:{"min-width":"100px"}},{default:a(()=>[S((r(),f(E,{clickable:"",onClick:c=>i.$inertia.get(i.route("employee.show",e.row.id))},{default:a(()=>[l(p,{avatar:""},{default:a(()=>[l(u,{name:"visibility"})]),_:1}),l(p,null,{default:a(()=>t[8]||(t[8]=[w("View")])),_:1,__:[8]})]),_:2},1032,["onClick"])),[[q]]),S((r(),f(E,{clickable:"",onClick:c=>i.$inertia.get(i.route("employee.edit",e.row.id))},{default:a(()=>[l(p,{avatar:""},{default:a(()=>[l(u,{name:"edit"})]),_:1}),l(p,null,{default:a(()=>t[9]||(t[9]=[w("Edit")])),_:1,__:[9]})]),_:2},1032,["onClick"])),[[q]]),S((r(),f(E,{clickable:"",onClick:c=>i.deleteUser(e.row.id)},{default:a(()=>[l(p,{avatar:""},{default:a(()=>[l(u,{name:"delete",color:"red"})]),_:1}),l(p,{class:"text-red"},{default:a(()=>t[10]||(t[10]=[w("Delete")])),_:1,__:[10]})]),_:2},1032,["onClick"])),[[q]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["title","rows","pagination","loading","filter"])]),_:1})]),_:1,__:[11]}))}});export{Be as default};
