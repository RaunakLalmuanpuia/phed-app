import{Q as A,a as D}from"./QBreadcrumbs-B2QfNl3X.js";import{r as g,l as F,d as Q,o as r,w as a,e as u,i as l,q,h as k,f as N,F as _,v as P,Q as M,D as O,W as T}from"./app-BUqhnzPm.js";import{Q as V}from"./QChip-CM8_4_HM.js";import{Q as y}from"./QTd-Cpho22aX.js";import{a as C,b as $}from"./format-C4QW3o8r.js";import{_ as x,Q as L}from"./BackendLayout-B4VKV5U2.js";import{Q as W}from"./QTable-Dj5hSTBf.js";import{Q as Y}from"./QLayout-CwzJPS3D.js";import{u as z}from"./use-quasar-Gqu1uUMC.js";/* empty css            */import"./touch-QnEEk1Q2.js";import"./QSlideTransition-C3WU2b4u.js";import"./QMarkupTable-Cc6WqFhy.js";import"./QSelect-CCVo7Y3Q.js";import"./use-fullscreen-Be-XHZoV.js";const G={class:"flex items-center justify-between q-pa-md bg-white"},H={class:"flex q-gutter-sm"},be=Object.assign({layout:x},{__name:"Index",props:["canCreate","canEdit","canDelete"],setup(p){const E=[{name:"name",align:"left",label:"Name",field:"name",sortable:!1},{name:"designation",align:"left",label:"Designation",field:"designation",sortable:!1},{name:"mobile",align:"left",label:"Mobile",field:"mobile",sortable:!0},{name:"email",align:"left",label:"Email",field:"email",sortable:!0},{name:"office",align:"left",label:"Office",field:"office",sortable:!0},{name:"role",align:"left",label:"Role",field:"role",sortable:!0},{name:"action",align:"left",label:"Action",field:"action",sortable:!0}],d=z(),B=g([]),f=g(""),v=g(!1),i=g({sortBy:"desc",descending:!1,page:1,rowsPerPage:15,rowsNumber:0}),U=t=>{d.dialog({title:"Confirmation",message:"Do you want to delete?",ok:"Yes",cancel:"No"}).onOk(()=>{T.delete(route("user.destroy",t.id),{onStart:e=>d.loading.show(),onFinish:e=>d.loading.hide(),preserveState:!1})})},h=t=>{w({pagination:i.value,filter:t})};function w(t){const{page:e,rowsPerPage:o,sortBy:n,descending:m}=t.pagination,I=t.filter;v.value=!0,axios.get(route("user.json-index"),{params:{filter:I,page:e,rowsPerPage:o}}).then(s=>{console.log(s.data);const{list:b}=s.data,{data:c,per_page:S,current_page:R,total:j,to:J,from:K}=b;B.value=c,i.value.page=R,i.value.rowsNumber=j,i.value.rowsPerPage=S}).catch(s=>{var b,c;d.notify({type:"negative",message:(c=(b=s==null?void 0:s.response)==null?void 0:b.data)==null?void 0:c.message})}).finally(()=>v.value=!1)}return F(()=>{w({pagination:i.value,filter:f.value})}),(t,e)=>(r(),Q(Y,{class:"container",padding:""},{default:a(()=>[u("div",G,[u("div",null,[e[4]||(e[4]=u("div",{class:"stitle"},"User Accounts",-1)),l(A,{class:"text-dark"},{default:a(()=>[l(D,{onClick:e[0]||(e[0]=o=>t.$inertia.get(t.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),l(D,{label:"User Accounts",to:t.route("user.index")},null,8,["to"])]),_:1})]),u("div",H,[l(q,{onClick:e[1]||(e[1]=o=>t.$inertia.get(t.route("user.create"))),color:"btn-primary",label:"New User",disable:!p.canCreate},null,8,["disable"])])]),e[8]||(e[8]=u("br",null,null,-1)),l(W,{flat:"",ref:"tableRef",title:"List of User",rows:B.value,columns:E,"row-key":"id",pagination:i.value,"onUpdate:pagination":e[3]||(e[3]=o=>i.value=o),loading:v.value,filter:f.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:w},{"top-right":a(()=>[l(M,{borderless:"",dense:"",debounce:"800","onUpdate:modelValue":[h,e[2]||(e[2]=o=>f.value=o)],outlined:"",modelValue:f.value,placeholder:"Search"},{append:a(()=>[l(O,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-role":a(o=>[l(y,null,{default:a(()=>{var n;return[(r(!0),N(_,null,P((n=o.row)==null?void 0:n.roles,m=>(r(),Q(V,{label:m.name,square:""},null,8,["label"]))),256))]}),_:2},1024)]),"body-cell-office":a(o=>[l(y,null,{default:a(()=>{var n;return[(r(!0),N(_,null,P((n=o.row)==null?void 0:n.offices,m=>(r(),Q(V,{label:m.name,square:""},null,8,["label"]))),256))]}),_:2},1024)]),"body-cell-action":a(o=>[l(y,null,{default:a(()=>[l(q,{round:"",icon:"more_vert"},{default:a(()=>[l(L,null,{default:a(()=>[l(C,{clickable:"",onClick:n=>t.$inertia.get(t.route("user.show",o.row.id))},{default:a(()=>[l($,null,{default:a(()=>e[5]||(e[5]=[k("View Detail")])),_:1,__:[5]})]),_:2},1032,["onClick"]),l(C,{clickable:"",onClick:n=>t.$inertia.get(t.route("user.edit",o.row.id)),disable:!p.canEdit},{default:a(()=>[l($,null,{default:a(()=>e[6]||(e[6]=[k("Edit")])),_:1,__:[6]})]),_:2},1032,["onClick","disable"]),l(C,{clickable:"",onClick:n=>U(o.row),disable:!p.canDelete},{default:a(()=>[l($,null,{default:a(()=>e[7]||(e[7]=[k("Delete")])),_:1,__:[7]})]),_:2},1032,["onClick","disable"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","pagination","loading","filter"])]),_:1,__:[8]}))}});export{be as default};
