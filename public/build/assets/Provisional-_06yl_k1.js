import{Q as k,a as p}from"./QBreadcrumbs-B2QfNl3X.js";import{r as v,d as b,o as u,w as a,e as r,i as o,q as h,y as x,z as B,f as T,F as C,v as E,t as n,Q as P,D as V,h as g}from"./app-BUqhnzPm.js";import{Q as i}from"./QTd-Cpho22aX.js";import{Q as q,a as D}from"./QTable-Dj5hSTBf.js";import{Q as N}from"./QTr-BvuHwuJ9.js";import{Q as O}from"./QLayout-CwzJPS3D.js";import{_ as S}from"./BackendLayout-B4VKV5U2.js";import{u as U}from"./use-quasar-Gqu1uUMC.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */import"./format-C4QW3o8r.js";import"./QMarkupTable-Cc6WqFhy.js";import"./QSelect-CCVo7Y3Q.js";import"./QChip-CM8_4_HM.js";import"./use-fullscreen-Be-XHZoV.js";import"./touch-QnEEk1Q2.js";import"./QSlideTransition-C3WU2b4u.js";const j={class:"flex items-center justify-between q-pa-md bg-white"},z={class:"q-gutter-sm"},A=Object.assign({layout:S},{__name:"Provisional",props:{offices:Array,designations:Array},setup(w){const s=w,d=U(),c=v(""),m=[{name:"name",label:"Office Name",field:"name",align:"left",sortable:!0}];s.designations.forEach(l=>{m.push({name:l,label:l,field:l,align:"center",sortable:!0})}),m.push({name:"total",label:"Total",field:"total",align:"center",sortable:!0});const f=l=>s.offices.reduce((t,e)=>{const Q=Number(e[l])||0;return t+Q},0),y=()=>{d.loading.show(),axios.get(route("export.summary-pe"),{responseType:"blob"}).then(l=>{const t=window.URL.createObjectURL(new Blob([l.data])),e=document.createElement("a");e.href=t,e.setAttribute("download",Date.now()+".xlsx"),e.click()}).catch(l=>{var t,e;d.notify({type:"negative",message:((e=(t=l.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to download file"})}).finally(()=>{d.loading.hide()})},_=l=>{window.history.back()};return(l,t)=>(u(),b(O,{class:"container",padding:""},{default:a(()=>[r("div",j,[r("div",null,[t[3]||(t[3]=r("div",{class:"stitle"},"Provisional Employees Summary",-1)),o(k,{class:"text-dark"},{default:a(()=>[o(p,{class:"cursor-pointer",onClick:t[0]||(t[0]=e=>l.$inertia.get(l.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),o(p,{class:"cursor-pointer",label:"Go Back",onClick:_})]),_:1})]),r("div",z,[o(h,{label:"Export",color:"primary",onClick:t[1]||(t[1]=e=>y()),icon:"download"})])]),t[5]||(t[5]=r("br",null,null,-1)),o(x,{flat:""},{default:a(()=>[o(B,null,{default:a(()=>[o(q,{rows:s.offices,columns:m,"row-key":"id",flat:"",filter:c.value,pagination:{rowsPerPage:0}},{"body-cell-name":a(e=>[o(i,{props:e,class:"sticky-col bg-white z-10"},{default:a(()=>[g(n(e.row.name),1)]),_:2},1032,["props"])]),"header-cell-name":a(e=>[o(D,{props:e,class:"sticky-col bg-white z-20"},{default:a(()=>[g(n(e.col.label),1)]),_:2},1032,["props"])]),"top-right":a(()=>[o(P,{borderless:"",dense:"",debounce:"800",modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=e=>c.value=e),outlined:"",clearable:"",placeholder:"Search Office"},{append:a(()=>[o(V,{name:"search"})]),_:1},8,["modelValue"])]),"bottom-row":a(()=>[o(N,{class:"bg-grey-3 text-bold q-border-t"},{default:a(()=>[o(i,{class:"text-left font-bold"},{default:a(()=>t[4]||(t[4]=[r("strong",null,"Total",-1)])),_:1,__:[4]}),(u(!0),T(C,null,E(s.designations,e=>(u(),b(i,{key:e,class:"text-center font-bold"},{default:a(()=>[r("strong",null,n(f(e)),1)]),_:2},1024))),128)),o(i,{class:"text-center font-bold"},{default:a(()=>[r("strong",null,n(f("total")),1)]),_:1})]),_:1})]),_:1},8,["rows","filter"])]),_:1})]),_:1})]),_:1,__:[5]}))}}),le=$(A,[["__scopeId","data-v-84e3ff2a"]]);export{le as default};
