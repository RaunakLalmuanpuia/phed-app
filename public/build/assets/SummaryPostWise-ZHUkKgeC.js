import{Q as B,a as y}from"./QBreadcrumbs-O-ZLSJ6o.js";import{r as g,c as C,l as D,d as w,o as d,w as t,g as r,i as s,q,f as F,e as b,F as _,v as N,bq as V,h as n,t as l,Q as P,D as W}from"./app-DBPySSIw.js";import{Q as u}from"./QTd-ZqAXoiA4.js";import{Q as E}from"./QTr-BZUYmhru.js";import{Q as L}from"./QTable-GUZ3ZeEk.js";import{Q as R}from"./QLayout-CkRQ8k_K.js";import{_ as T}from"./BackendLayout-rRKETbIi.js";import{u as $}from"./use-quasar-ChMOGntY.js";/* empty css            */import"./format-ByMjNDGW.js";import"./QMarkupTable-C3GvBHRw.js";import"./QSelect-DypYJQcq.js";import"./QChip-CjE0AdFP.js";import"./use-fullscreen-Bb_x-MuI.js";import"./touch-BBgFrIZw.js";import"./QSlideTransition-xAvoVDOg.js";const j={class:"flex items-center justify-between q-pa-md bg-white"},I={class:"q-gutter-sm"},se=Object.assign({layout:T},{__name:"SummaryPostWise",props:["office","canGenerateRemuneration"],setup(M){const c=$(),p=g([]),f=g({}),i=g(""),h=[{name:"designation",label:"Designation",field:"designation",align:"left"},{name:"employee_count",label:"No. of Employees",field:"employee_count",align:"center"},{name:"one_month",label:"Wages for 1 Month (₹)",field:"one_month",align:"right"},{name:"three_months",label:"Wages for 3 Months (₹)",field:"three_months",align:"right"},{name:"six_months",label:"Wages for 6 Months (₹)",field:"six_months",align:"right"},{name:"one_year",label:"Wages for 1 Year (₹)",field:"one_year",align:"right"}],x=C(()=>i.value?p.value.filter(a=>{var o;return(o=a.designation)==null?void 0:o.toLowerCase().includes(i.value.toLowerCase())}):p.value),m=a=>a==null?"":new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a);D(async()=>{const a=await axios.get(route("remuneration.json-summary-post-wise"));p.value=a.data.data,f.value=a.data.totals});const v=()=>{c.loading.show(),axios.get(route("export.remuneration-summary-post-wise"),{responseType:"blob"}).then(a=>{const o=window.URL.createObjectURL(new Blob([a.data])),e=document.createElement("a"),Q=new Date().getFullYear();e.href=o,e.setAttribute("download",`remuneration-summary-post-wise-${Q}.xlsx`),e.click()}).catch(a=>{var o,e;c.notify({type:"negative",message:((e=(o=a.response)==null?void 0:o.data)==null?void 0:e.message)||"Failed to download file"})}).finally(()=>{c.loading.hide()})},k=()=>{window.history.back()};return(a,o)=>(d(),w(R,{class:"container",padding:""},{default:t(()=>[r("div",j,[r("div",null,[o[3]||(o[3]=r("div",{class:"stitle"},"Remuneration Summary - Post Wise",-1)),s(B,{class:"text-dark"},{default:t(()=>[s(y,{onClick:o[0]||(o[0]=e=>a.$inertia.get(a.route("dashboard"))),icon:"dashboard",label:"Dashboard",class:"cursor-pointer"}),s(y,{class:"cursor-pointer",label:"Go Back",onClick:k})]),_:1})]),r("div",I,[s(q,{label:"Export",color:"primary",onClick:o[1]||(o[1]=e=>v()),icon:"download"})])]),o[4]||(o[4]=r("br",null,null,-1)),s(L,{rows:x.value,columns:h,"row-key":"designation",flat:"",bordered:"",pagination:{rowsPerPage:0}},{"top-right":t(()=>[s(P,{borderless:"",dense:"",debounce:"800",modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=e=>i.value=e),outlined:"",clearable:"",placeholder:"Search Post"},{append:t(()=>[s(W,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-one_month":t(e=>[s(u,{props:e},{default:t(()=>[n(l(m(e.row.one_month)),1)]),_:2},1032,["props"])]),"body-cell-three_months":t(e=>[s(u,{props:e},{default:t(()=>[n(l(m(e.row.three_months)),1)]),_:2},1032,["props"])]),"body-cell-six_months":t(e=>[s(u,{props:e},{default:t(()=>[n(l(m(e.row.six_months)),1)]),_:2},1032,["props"])]),"body-cell-one_year":t(e=>[s(u,{props:e},{default:t(()=>[n(l(m(e.row.one_year)),1)]),_:2},1032,["props"])]),"bottom-row":t(()=>[i.value?F("",!0):(d(),w(E,{key:0,class:"bg-grey-3 text-bold q-border-t"},{default:t(()=>[(d(),b(_,null,N(h,e=>s(u,{key:e.name,class:V(["text-"+(e.align||"left"),"q-pa-xs"])},{default:t(()=>[r("strong",null,[["one_month","three_months","six_months","one_year"].includes(e.field)?(d(),b(_,{key:0},[n(l(m(f.value[e.field])),1)],64)):(d(),b(_,{key:1},[n(l(f.value[e.field]),1)],64))])]),_:2},1032,["class"])),64))]),_:1}))]),_:1},8,["rows"])]),_:1,__:[4]}))}});export{se as default};
