import{Q as j,a as k}from"./QBreadcrumbs-B2QfNl3X.js";import{Q}from"./QSelect-CCVo7Y3Q.js";import{r as c,l as A,d as y,o as w,w as l,e as t,i as a,y as x,z as V,Q as I,D as S,q as O,h as _,t as u,A as T}from"./app-BUqhnzPm.js";import{a as z,Q as L}from"./QLayout-CwzJPS3D.js";import{Q as m}from"./QTd-Cpho22aX.js";import{Q as F}from"./QChip-CM8_4_HM.js";import{Q as G}from"./QTable-Dj5hSTBf.js";import{_ as M}from"./BackendLayout-B4VKV5U2.js";import{u as Y}from"./use-quasar-Gqu1uUMC.js";import"./format-C4QW3o8r.js";/* empty css            */import"./QMarkupTable-Cc6WqFhy.js";import"./use-fullscreen-Be-XHZoV.js";import"./touch-QnEEk1Q2.js";import"./QSlideTransition-C3WU2b4u.js";const H={class:"flex items-center justify-between q-pa-md bg-white"},J={class:"q-pa-md"},K={class:"row q-col-gutter-md"},W={class:"flex items-center gap-3"},X={class:"text-body1"},Z={class:"text-caption text-grey"},ee={class:"text-caption text-grey"},we=Object.assign({layout:M},{__name:"DeletedEmployees",props:["office","canCreate","canEdit","canDelete"],setup(B){const q=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"office",label:"Office",align:"left",field:"office",sortable:!0},{name:"reason",label:"Reason",align:"left",field:"reason",sortable:!1},{name:"year",label:"Year",align:"left",field:"year",sortable:!1},{name:"actions",label:"Actions",align:"center"}],s=c({office:null,skill:null,search:null}),C=[{label:"Skilled",value:"skilled"},{label:"Unskilled",value:"unskilled"}];c("");const D=Y(),h=c([]),b=c(!1),r=c({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),g=()=>{v({pagination:r.value,filter:s.value,search:s.value.search})};function v(n){const{page:o,rowsPerPage:e,sortBy:i,descending:ae}=n.pagination,E=n.filter,$=n.search;b.value=!0,axios.get(route("employees.json-index-deleted"),{params:{filter:E,page:o,rowsPerPage:e,search:$}}).then(d=>{console.log(d.data);const{list:f}=d.data,{data:p,per_page:N,current_page:U,total:R,to:le,from:oe}=f;h.value=p,r.value.page=U,r.value.rowsNumber=R,r.value.rowsPerPage=N}).catch(d=>{var f,p;D.notify({type:"negative",message:(p=(f=d==null?void 0:d.response)==null?void 0:f.data)==null?void 0:p.message})}).finally(()=>b.value=!1)}A(()=>{v({pagination:r.value,filter:s.value,search:s.value.search})});const P=()=>{window.history.back()};return(n,o)=>(w(),y(L,{class:"container",padding:""},{default:l(()=>[t("div",H,[t("div",null,[o[5]||(o[5]=t("div",{class:"stitle"},"Deleted Employee List",-1)),a(j,{class:"text-dark"},{default:l(()=>[a(k,{class:"cursor-pointer",onClick:o[0]||(o[0]=e=>n.$inertia.get(n.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),a(k,{class:"cursor-pointer",label:"Go Back",onClick:P})]),_:1})])]),o[7]||(o[7]=t("br",null,null,-1)),a(x,{flat:""},{default:l(()=>[a(V,null,{default:l(()=>[t("div",J,[a(x,{flat:"",bordered:"",class:"q-mt-md bg-white shadow-1"},{default:l(()=>[a(V,null,{default:l(()=>[o[6]||(o[6]=t("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Search Filter ",-1)),t("div",K,[a(Q,{label:"Select Office",class:"col-12 col-sm-4",modelValue:s.value.office,"onUpdate:modelValue":[o[1]||(o[1]=e=>s.value.office=e),g],options:B.office,"option-label":"name","option-value":"id","emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),a(Q,{label:"Select Skill",class:"col-12 col-sm-4",modelValue:s.value.skill,"onUpdate:modelValue":[o[2]||(o[2]=e=>s.value.skill=e),g],options:C,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"]),a(I,{dense:"",outlined:"",debounce:"300",modelValue:s.value.search,"onUpdate:modelValue":[o[3]||(o[3]=e=>s.value.search=e),g],placeholder:"Search",class:"col-12 col-sm-4"},{append:l(()=>[a(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1,__:[6]})]),_:1})])]),_:1}),a(G,{flat:"",ref:"tableRef",title:"List of Deleted Employees",rows:h.value,columns:q,"row-key":"id",pagination:r.value,"onUpdate:pagination":o[4]||(o[4]=e=>r.value=e),loading:b.value,filter:s.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:v},{"body-cell-employee":l(e=>[a(m,{props:e},{default:l(()=>[t("div",W,[a(T,null,{default:l(()=>[e.row.avatar?(w(),y(z,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(w(),y(S,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),t("div",null,[t("div",X,u(e.row.name),1),t("div",Z,u(e.row.mobile),1),t("div",ee,u(e.row.date_of_birth),1)])])]),_:2},1032,["props"])]),"body-cell-office":l(e=>[a(m,{props:e},{default:l(()=>[a(F,{color:"primary","text-color":"white",dense:""},{default:l(()=>{var i;return[_(u((i=e.row.office)==null?void 0:i.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-reason":l(e=>[a(m,{props:e},{default:l(()=>{var i;return[_(u((i=e.row.deletion_detail)==null?void 0:i.reason),1)]}),_:2},1032,["props"])]),"body-cell-year":l(e=>[a(m,{props:e},{default:l(()=>{var i;return[_(u((i=e.row.deletion_detail)==null?void 0:i.year),1)]}),_:2},1032,["props"])]),"body-cell-actions":l(e=>[a(m,{props:e},{default:l(()=>[a(O,{dense:"",flat:"",round:"",color:"primary",icon:"visibility",onClick:i=>n.$inertia.get(n.route("employee.show",e.row.id)),"aria-label":"Show user"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading","filter"])]),_:1})]),_:1,__:[7]}))}});export{we as default};
