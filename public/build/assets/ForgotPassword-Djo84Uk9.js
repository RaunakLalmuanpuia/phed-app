import{r as q,a as _,c as I,o as v,w as u,b as t,d as Q,e as S,f as s,m as w,Q as y,W as C}from"./app-Bcjn00Uj.js";import{Q as x}from"./QForm-emzx9c1_.js";import{Q as F,a as b}from"./QStepper-gsUYiEJv.js";import{a as O,Q as k}from"./QLayout-CVYjZEtB.js";import{F as E}from"./FrontendLayout-B_fCeMmb.js";import{u as N}from"./use-quasar-90sfUjEy.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./touch-CUWAjDfT.js";const B={class:"bg-white q-mt-xl"},U={class:"row"},j={class:"col-xs-12 col-sm-6"},z={class:"flex items-center justify-center"},M={key:0,class:"column q-gutter-sm"},$={class:"flex"},W={class:"flex"},G={class:"flex"},L={class:"col-xs-12 col-sm-6"},Y=Object.assign({layout:E},{__name:"ForgotPassword",setup(A){const p=N(),c=q(1),n=_({userId:"",errors:{}}),f=_({otp:"",errors:{}}),a=_({password:"",password_confirmation:"",errors:{}}),h=g=>{p.loading.show(),axios.post(route("forgot.send"),{...n}).then(e=>{c.value=2}).catch(e=>{var r,o;n.errors=((o=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:o.errors)||{}}).finally(()=>p.loading.hide())},V=g=>{p.loading.show(),axios.post(route("forgot.verify"),{userId:n.userId,...f}).then(e=>{const{data:r}=e.data;r?c.value=3:f.errors.otp=["Invalid Otp"]}).catch(e=>{var r,o;f.errors=((o=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:o.errors)||{}}).finally(()=>p.loading.hide())},P=g=>{p.loading.show(),axios.post(route("forgot.password"),{...a,userId:n.userId}).then(e=>{const{message:r}=e.data;p.notify({type:"positive",message:r}),C.get(route("login"))}).catch(e=>{var r,o;a.errors=((o=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:o.errors)||{}}).finally(()=>p.loading.hide())};return(g,e)=>(v(),I(k,{class:"container"},{default:u(()=>{var r;return[t("div",B,[t("div",U,[t("div",j,[t("div",z,[(r=g.$page.props.auth)!=null&&r.user?(v(),Q("div",M,[e[6]||(e[6]=t("p",{class:"text-dark"},"You are logged in",-1)),s(w,{onClick:e[0]||(e[0]=o=>g.$inertia.get(g.route("dashboard"))),flat:"",label:"Go to dashboard"})])):S("",!0),t("div",null,[e[10]||(e[10]=t("p",{class:"login-title"},"Forgot Password",-1)),s(F,{modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=o=>c.value=o),vertical:"",color:"accent",flat:"",animated:""},{default:u(()=>[s(b,{name:1,title:"Enter your registered email/mobile no",icon:"o_email",done:c.value>1},{default:u(()=>[s(x,{style:{"max-width":"750px"},class:"column q-gutter-sm q-my-lg",onSubmit:h},{default:u(()=>{var o,i,m;return[e[7]||(e[7]=t("span",{class:"text-caption text-grey-7 text-weight-medium"},"Enter your registered email or mobile no",-1)),s(y,{placeholder:"Email/Mobile",dense:"",modelValue:n.userId,"onUpdate:modelValue":e[1]||(e[1]=l=>n.userId=l),outlined:"","no-error-icon":"",error:!!((o=n.errors)!=null&&o.userId),"error-message":(m=(i=n.errors)==null?void 0:i.userId)==null?void 0:m.toString(),rules:[l=>!!l||"Email/Mobile is required"]},null,8,["modelValue","error","error-message","rules"]),t("div",$,[s(w,{class:"sized-btn",color:"btn-primary",type:"submit",rounded:"",label:"Send OTP","no-caps":""})])]}),_:1,__:[7]})]),_:1},8,["done"]),s(b,{name:2,title:"Verify OTP",icon:"o_verified",done:c.value>2},{default:u(()=>[s(x,{style:{"max-width":"750px"},class:"column q-gutter-sm q-my-lg",onSubmit:V},{default:u(()=>{var o,i,m;return[e[8]||(e[8]=t("span",{class:"text-caption text-grey-7 text-weight-medium"},"Verify OTP",-1)),s(y,{placeholder:"OTP",dense:"",modelValue:f.otp,"onUpdate:modelValue":e[2]||(e[2]=l=>f.otp=l),outlined:"","no-error-icon":"",error:!!((o=f.errors)!=null&&o.otp),"error-message":(m=(i=f.errors)==null?void 0:i.otp)==null?void 0:m.toString(),rules:[l=>!!l||"OTP is required"]},null,8,["modelValue","error","error-message","rules"]),t("div",W,[s(w,{class:"sized-btn",color:"btn-primary",type:"submit",rounded:"",label:"Verify OTP","no-caps":""})])]}),_:1,__:[8]})]),_:1},8,["done"]),s(b,{name:3,title:"New Password",icon:"o_password",done:c.value>3},{default:u(()=>[s(x,{style:{"max-width":"750px"},class:"column q-gutter-sm q-my-lg",onSubmit:P},{default:u(()=>{var o,i,m,l;return[e[9]||(e[9]=t("span",{class:"text-caption text-grey-7 text-weight-medium"},"Set Password",-1)),s(y,{placeholder:"New Password",type:"password",dense:"",modelValue:a.password,"onUpdate:modelValue":e[3]||(e[3]=d=>a.password=d),outlined:"","no-error-icon":"",error:!!((o=a.errors)!=null&&o.password),"error-message":(i=a.errors)==null?void 0:i.password,rules:[d=>!!d||"Email/Mobile is required"]},null,8,["modelValue","error","error-message","rules"]),s(y,{placeholder:"Confirm Password",type:"password",dense:"",modelValue:a.password_confirmation,"onUpdate:modelValue":e[4]||(e[4]=d=>a.password_confirmation=d),outlined:"","no-error-icon":"",error:!!((m=a.errors)!=null&&m.password_confirmation),"error-message":(l=a.errors)==null?void 0:l.password_confirmation,rules:[d=>!!d||"Confirm Password is required",d=>d===a.password||"Confirm Password does not match New password"]},null,8,["modelValue","error","error-message","rules"]),t("div",G,[s(w,{class:"sized-btn",color:"btn-primary",type:"submit",rounded:"",label:"Confirm","no-caps":""})])]}),_:1,__:[9]})]),_:1},8,["done"])]),_:1},8,["modelValue"])])])]),t("div",L,[s(O,{height:"480",width:"580",src:"images/20944201.jpg"})])])])]}),_:1}))}}),oe=T(Y,[["__scopeId","data-v-43659f94"]]);export{oe as default};
