import{Q as b,a as m}from"./QBreadcrumbs-P1G1ozD1.js";import{r as k,c as g,o as w,w as t,b as s,f as o,m as y,p as Q,q as h,Q as x,z as v}from"./app-txZQMSBX.js";import{Q as S}from"./QTable-BKXey8ST.js";import{Q as B}from"./QLayout-C71oroUo.js";import{_}from"./BackendLayout-Brp6cZYj.js";import{u as O}from"./use-quasar-BW0lFDFD.js";import"./use-fullscreen-CXJ6O_rU.js";import"./QSelect-Jujm_534.js";import"./touch-BFGPAXUe.js";const C={class:"flex items-center justify-between q-pa-md bg-white"},E={class:"q-gutter-sm"},M=Object.assign({layout:_},{__name:"MusterRoll",props:{offices:Array,skills:Array},setup(u){const d=u,r=O(),n=k(""),c=["Unskilled","Semi-Skilled","Skilled-I","Skilled-II"],i=[{name:"name",label:"Office Name",field:"name",align:"left",sortable:!0}];[...d.skills].sort((a,e)=>c.indexOf(a)-c.indexOf(e)).forEach(a=>{i.push({name:a,label:a||"No Skill Mentioned",field:a,align:"center",sortable:!0})}),i.push({name:"total",label:"Total",field:"total",align:"center",sortable:!0});const f=()=>{r.loading.show(),axios.get(route("export.summary-mr"),{responseType:"blob"}).then(a=>{const e=window.URL.createObjectURL(new Blob([a.data])),l=document.createElement("a");l.href=e,l.setAttribute("download",Date.now()+".xlsx"),l.click()}).catch(a=>{var e,l;r.notify({type:"negative",message:((l=(e=a.response)==null?void 0:e.data)==null?void 0:l.message)||"Failed to download file"})}).finally(()=>{r.loading.hide()})},p=a=>{window.history.back()};return(a,e)=>(w(),g(B,{class:"container",padding:""},{default:t(()=>[s("div",C,[s("div",null,[e[3]||(e[3]=s("div",{class:"stitle"},"Muster Roll Employees Summary",-1)),o(b,{class:"text-dark"},{default:t(()=>[o(m,{class:"cursor-pointer",onClick:e[0]||(e[0]=l=>a.$inertia.get(a.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),o(m,{class:"cursor-pointer",label:"Go Back",onClick:p})]),_:1})]),s("div",E,[o(y,{label:"Export",color:"primary",onClick:e[1]||(e[1]=l=>f()),icon:"download"})])]),e[4]||(e[4]=s("br",null,null,-1)),o(Q,{flat:""},{default:t(()=>[o(h,null,{default:t(()=>[o(S,{rows:d.offices,columns:i,"row-key":"id",flat:"",filter:n.value,pagination:{rowsPerPage:0}},{"top-right":t(()=>[o(x,{borderless:"",dense:"",debounce:"800",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=l=>n.value=l),outlined:"",clearable:"",placeholder:"Search Office"},{append:t(()=>[o(v,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","filter"])]),_:1})]),_:1})]),_:1,__:[4]}))}});export{M as default};
