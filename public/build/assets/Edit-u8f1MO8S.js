import{Q as W,a as g}from"./QBreadcrumbs-B2QfNl3X.js";import{x as X,c as Y,d as Z,o as I,w as f,e as r,i,f as _,g as h,Q as m,u as o,F as ee,p as se,q as H}from"./app-BUqhnzPm.js";import{Q as J}from"./QSelect-CCVo7Y3Q.js";import{Q as oe}from"./QForm-D82iCr7K.js";import{Q as re}from"./QLayout-CwzJPS3D.js";import{_ as le}from"./BackendLayout-B4VKV5U2.js";import{u as ie}from"./use-quasar-Gqu1uUMC.js";/* empty css            */import"./QChip-CM8_4_HM.js";import"./format-C4QW3o8r.js";import"./touch-QnEEk1Q2.js";import"./QSlideTransition-C3WU2b4u.js";const ae={class:"flex items-center justify-between q-pa-md bg-white"},te={style:{"max-width":"720px"},class:"row q-col-gutter-sm"},de={class:"col-xs-12 col-sm-9"},ne={class:"col-xs-12 col-sm-9"},me={class:"col-xs-12 col-sm-9"},ue={class:"col-xs-12 col-sm-9"},ce={class:"col-xs-12 col-sm-9"},ge={class:"col-xs-12 col-sm-9"},fe={class:"col-xs-12 col-sm-9"},pe={class:"col-xs-12 col-sm-9"},ve={class:"col-xs-12"},be={class:"col-xs-12 flex q-gutter-sm"},Ee=Object.assign({layout:le},{__name:"Edit",props:["userRoles","data","current_offices","offices"],setup(c){var v,b,x,V,w;const a=c,p=ie(),s=X({name:(v=a.data)==null?void 0:v.name,email:(b=a==null?void 0:a.data)==null?void 0:b.email,mobile:(x=a==null?void 0:a.data)==null?void 0:x.mobile,roles:(w=(V=a==null?void 0:a.data)==null?void 0:V.roles)==null?void 0:w.map(t=>({value:t.name,label:t.name})),offices:a.current_offices,designation:a==null?void 0:a.data.designation,password:"",password_confirmation:""}),K=Y(()=>s.roles.some(t=>t.value==="Manager"||t.value==="Viewer")),L=t=>{s.transform(e=>{var u;const n=e.roles.some(d=>d.value==="Manager"||d.value==="Viewer");return{...e,office_ids:n?(u=e==null?void 0:e.offices)==null?void 0:u.map(d=>d.value):null,roles:e.roles.map(d=>d.value)}}).put(route("user.update",a.data.id),{onStart:()=>p.loading.show(),onFinish:()=>p.loading.hide()})},T=t=>{window.history.back()};return(t,e)=>(I(),Z(re,{class:"container",padding:""},{default:f(()=>[r("div",ae,[r("div",null,[e[11]||(e[11]=r("div",{class:"stitle"},"Edit User",-1)),i(W,{class:"text-dark"},{default:f(()=>[i(g,{class:"cursor-pointer",icon:"dashboard",label:"Dashboard",onClick:e[0]||(e[0]=n=>t.$inertia.get(t.route("dashboard")))}),i(g,{class:"cursor-pointer",label:"User Accounts",onClick:e[1]||(e[1]=n=>t.$inertia.get(t.route("user.index")))}),i(g,{class:"cursor-pointer",label:"Go Back",onClick:T})]),_:1})])]),e[20]||(e[20]=r("br",null,null,-1)),i(oe,{onSubmit:L,class:"bg-white q-pa-md"},{default:f(()=>{var n,u,d,q,Q,k,S,y,U,B,C,$,E,M,N,O,F,P,R,j,z,D,A,G;return[r("div",te,[e[13]||(e[13]=r("div",{class:"col-xs-12 col-sm-3"},[r("div",{class:"text-label q-mt-md"},"Name")],-1)),r("div",de,[i(m,{modelValue:o(s).name,"onUpdate:modelValue":e[2]||(e[2]=l=>o(s).name=l),error:!!((n=o(s).errors)!=null&&n.name),"error-message":(d=(u=o(s).errors)==null?void 0:u.name)==null?void 0:d.toString(),outlined:"",dense:"","item-aligned":"",rules:[l=>l!==""||"Name is required"]},null,8,["modelValue","error","error-message","rules"])]),e[14]||(e[14]=r("div",{class:"col-xs-12 col-sm-3"},[r("div",{class:"text-label q-mt-md"},"Designation")],-1)),r("div",ne,[i(m,{modelValue:o(s).designation,"onUpdate:modelValue":e[3]||(e[3]=l=>o(s).designation=l),error:!!((q=o(s).errors)!=null&&q.designation),"error-message":(k=(Q=o(s).errors)==null?void 0:Q.designation)==null?void 0:k.toString(),outlined:"",dense:"","item-aligned":""},null,8,["modelValue","error","error-message"])]),e[15]||(e[15]=r("div",{class:"col-xs-12 col-sm-3"},[r("div",{class:"text-label q-mt-md"},"Mobile")],-1)),r("div",me,[i(m,{modelValue:o(s).mobile,"onUpdate:modelValue":e[4]||(e[4]=l=>o(s).mobile=l),mask:"##########",error:!!((S=o(s).errors)!=null&&S.mobile),"error-message":(U=(y=o(s).errors)==null?void 0:y.mobile)==null?void 0:U.toString(),outlined:"",dense:"","item-aligned":"",rules:[l=>l!==""||"Mobile is required"]},null,8,["modelValue","error","error-message","rules"])]),e[16]||(e[16]=r("div",{class:"col-xs-12 col-sm-3"},[r("div",{class:"text-label q-mt-md"},"Email")],-1)),r("div",ue,[i(m,{modelValue:o(s).email,"onUpdate:modelValue":e[5]||(e[5]=l=>o(s).email=l),type:"email",error:!!((B=o(s).errors)!=null&&B.email),"error-message":($=(C=o(s).errors)==null?void 0:C.email)==null?void 0:$.toString(),outlined:"",dense:"","item-aligned":"",rules:[l=>l!==""||"Email is required"]},null,8,["modelValue","error","error-message","rules"])]),e[17]||(e[17]=r("div",{class:"col-xs-12 col-sm-3"},[r("div",{class:"text-label q-mt-md"},"Role")],-1)),r("div",ce,[i(J,{modelValue:o(s).roles,"onUpdate:modelValue":e[6]||(e[6]=l=>o(s).roles=l),error:!!((E=o(s).errors)!=null&&E.roles),options:c.userRoles,multiple:"","use-chips":"","error-message":(N=(M=o(s).errors)==null?void 0:M.roles)==null?void 0:N.toString(),outlined:"",dense:"","item-aligned":""},null,8,["modelValue","error","options","error-message"])]),K.value?(I(),_(ee,{key:0},[e[12]||(e[12]=r("div",{class:"col-xs-12 col-sm-3"},[r("div",{class:"text-label q-mt-md"},"Office")],-1)),r("div",ge,[i(J,{modelValue:o(s).offices,"onUpdate:modelValue":e[7]||(e[7]=l=>o(s).offices=l),error:!!((O=o(s).errors)!=null&&O.office_id),"error-message":(P=(F=o(s).errors)==null?void 0:F.office_id)==null?void 0:P.toString(),options:c.offices,rules:[l=>!!l||"Office is required"],multiple:"","use-chips":"","no-error-icon":"",outlined:"","item-aligned":""},null,8,["modelValue","error","error-message","options","rules"])])],64)):h("",!0),e[18]||(e[18]=r("div",{class:"col-xs-12 col-sm-3"},[r("div",{class:"text-label q-mt-md"},"Password")],-1)),r("div",fe,[i(m,{modelValue:o(s).password,"onUpdate:modelValue":e[8]||(e[8]=l=>o(s).password=l),type:"password",error:!!((R=o(s).errors)!=null&&R.password),"error-message":(z=(j=o(s).errors)==null?void 0:j.password)==null?void 0:z.toString(),outlined:"",dense:"","item-aligned":""},null,8,["modelValue","error","error-message"])]),e[19]||(e[19]=r("div",{class:"col-xs-12 col-sm-3"},[r("div",{class:"text-label q-mt-md"},"Password Confirmation")],-1)),r("div",pe,[i(m,{modelValue:o(s).password_confirmation,"onUpdate:modelValue":e[9]||(e[9]=l=>o(s).password_confirmation=l),type:"password",error:!!((D=o(s).errors)!=null&&D.password_confirmation),"error-message":(G=(A=o(s).errors)==null?void 0:A.password_confirmation)==null?void 0:G.toString(),outlined:"",dense:"","item-aligned":""},null,8,["modelValue","error","error-message"])]),r("div",ve,[i(se,{class:"q-my-md"})]),r("div",be,[i(H,{class:"sized-btn",type:"submit",color:"btn-primary",label:"Update"}),i(H,{class:"sized-btn",color:"negative",outline:"",label:"Cancel",onClick:e[10]||(e[10]=l=>t.$inertia.get(t.route("user.index")))})])])]}),_:1})]),_:1,__:[20]}))}});export{Ee as default};
