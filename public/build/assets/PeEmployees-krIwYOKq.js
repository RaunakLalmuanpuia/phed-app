import{a as S,Q as h}from"./QSelect-BD5DIyHB.js";import{Q as U,a as V}from"./QBreadcrumbs-Bb4f3Pfo.js";import{r as m,i as I,c as y,o as c,w as t,b as s,f as l,B as _,d as L,F as A,n as F,m as w,p as O,q,l as T,Q as z,z as $,t as u,v as M}from"./app-BdlnoIGO.js";import{a as W,Q as G}from"./QLayout-DZlNtLYk.js";import{Q as f}from"./QTd-BaqEQ1mu.js";import{Q as H}from"./QTable-DRnAOOfr.js";import{_ as J}from"./BackendLayout-DOn8RhyN.js";import{u as K}from"./use-quasar-BhmNZs2G.js";import"./use-fullscreen-6TZGrrky.js";import"./touch-CMN1Nvv8.js";const X={class:"flex items-center justify-between q-pa-md bg-white"},Y={class:"stitle"},Z={class:"q-gutter-sm"},ee={class:"row q-col-gutter-md"},ae={class:"row q-gutter-sm col-12 col-sm justify-end"},le={class:"flex items-center gap-3"},te={class:"text-body1"},oe={class:"text-caption text-grey"},ne={class:"text-caption text-grey"},_e=Object.assign({layout:J},{__name:"PeEmployees",props:["offices","designations","educationQln"],setup(p){const B=p,P=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!1},{name:"name_of_workplace",label:"Workplace",align:"left",field:"name_of_workplace",sortable:!1},{name:"office",label:"Office",align:"left",field:"office",sortable:!1},{name:"remuneration",label:"Remuneration",align:"left",field:"remuneration",sortable:!0},{name:"date_of_next_increment",label:"Next Increment",align:"left",field:"date_of_next_increment",sortable:!0},{name:"actions",label:"Actions",align:"center"}],o=m({office:[],search:null,designation:null,education_qln:null});m("");const C=K(),x=m([]),Q=m(!1),r=m({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),g=()=>{k({pagination:r.value,filter:o.value,search:o.value.search})};function k(n){const{page:a,rowsPerPage:e,sortBy:i,descending:se}=n.pagination,E=n.filter,D=n.search;Q.value=!0,axios.get(route("employees.json-manager-pe"),{params:{filter:E,page:a,rowsPerPage:e,search:D}}).then(d=>{console.log(d.data);const{list:b}=d.data,{data:v,per_page:N,current_page:j,total:R,to:ie,from:re}=b;x.value=v,r.value.page=j,r.value.rowsNumber=R,r.value.rowsPerPage=N}).catch(d=>{var b,v;C.notify({type:"negative",message:(v=(b=d==null?void 0:d.response)==null?void 0:b.data)==null?void 0:v.message})}).finally(()=>Q.value=!1)}return I(()=>{k({pagination:r.value,filter:o.value,search:o.value.search})}),(n,a)=>(c(),y(G,{class:"container",padding:""},{default:t(()=>[s("div",X,[s("div",null,[s("div",Y,[a[8]||(a[8]=_("Provisional Employee List: ")),(c(!0),L(A,null,F(p.offices,e=>(c(),y(S,{square:"",key:e.value,label:e.label},null,8,["label"]))),128))]),l(U,{class:"text-dark"},{default:t(()=>[l(V,{onClick:a[0]||(a[0]=e=>n.$inertia.get(n.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),l(V,{label:"All Employees",to:n.route("mis.import")},null,8,["to"])]),_:1})]),s("div",Z,[l(w,{label:"PE Summary",color:"primary",onClick:a[1]||(a[1]=e=>n.$inertia.get(n.route("summary.pe")))}),l(w,{label:"MR Summary",color:"primary",onClick:a[2]||(a[2]=e=>n.$inertia.get(n.route("summary.mr")))})])]),a[10]||(a[10]=s("br",null,null,-1)),l(O,{flat:"",bordered:""},{default:t(()=>[l(q,null,{default:t(()=>[a[9]||(a[9]=s("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Search Filter ",-1)),s("div",ee,[l(h,{label:"Select Office",class:"col-12 col-sm-4",modelValue:o.value.office,"onUpdate:modelValue":[a[3]||(a[3]=e=>o.value.office=e),g],options:B.offices,"option-label":"label","option-value":"value","emit-value":"","map-options":"",multiple:"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),l(h,{label:"Select Designation",class:"col-12 col-sm-4",modelValue:o.value.designation,"onUpdate:modelValue":[a[4]||(a[4]=e=>o.value.designation=e),g],options:p.designations,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),l(h,{label:"Select Education Qln.",class:"col-12 col-sm-4",modelValue:o.value.education_qln,"onUpdate:modelValue":[a[5]||(a[5]=e=>o.value.education_qln=e),g],options:p.educationQln,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])])]),_:1,__:[9]}),l(T),l(q,{class:"row items-center justify-between q-gutter-md"},{default:t(()=>[s("div",ae,[l(w,{label:"Export",icon:"desktop_windows",color:"primary",disabled:""}),l(z,{dense:"",outlined:"",debounce:"300",modelValue:o.value.search,"onUpdate:modelValue":[a[6]||(a[6]=e=>o.value.search=e),g],placeholder:"Search",class:"col-12 col-sm-auto",clearable:""},{append:t(()=>[l($,{name:"search"})]),_:1},8,["modelValue"])])]),_:1}),l(H,{flat:"",ref:"tableRef",rows:x.value,columns:P,"row-key":"id",pagination:r.value,"onUpdate:pagination":a[7]||(a[7]=e=>r.value=e),loading:Q.value,filter:o.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:k},{"body-cell-employee":t(e=>[l(f,{props:e},{default:t(()=>[s("div",le,[l(M,null,{default:t(()=>[e.row.avatar?(c(),y(W,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(c(),y($,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),s("div",null,[s("div",te,u(e.row.name),1),s("div",oe,u(e.row.mobile),1),s("div",ne,u(e.row.date_of_birth),1)])])]),_:2},1032,["props"])]),"body-cell-remuneration":t(e=>[l(f,{props:e},{default:t(()=>{var i;return[_(u(((i=e.row.remuneration_detail)==null?void 0:i.round_total)!=null?`₹ ${e.row.remuneration_detail.round_total.toLocaleString()}`:"—"),1)]}),_:2},1032,["props"])]),"body-cell-office":t(e=>[l(f,{props:e},{default:t(()=>[l(S,{color:"primary","text-color":"white",dense:""},{default:t(()=>{var i;return[_(u((i=e.row.office)==null?void 0:i.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-date_of_next_increment":t(e=>[l(f,{props:e},{default:t(()=>{var i;return[_(u((i=e.row.remuneration_detail)!=null&&i.next_increment_date?new Date(e.row.remuneration_detail.next_increment_date).toLocaleDateString():"—"),1)]}),_:2},1032,["props"])]),"body-cell-actions":t(e=>[l(f,{props:e},{default:t(()=>[l(w,{dense:"",flat:"",round:"",color:"primary",icon:"visibility",onClick:i=>n.$inertia.get(n.route("employee.show",e.row.id)),"aria-label":"Show user"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading","filter"])]),_:1})]),_:1,__:[10]}))}});export{_e as default};
