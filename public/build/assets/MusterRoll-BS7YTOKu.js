import{Q as _,a as b}from"./QBreadcrumbs-DiOcWtTh.js";import{r as v,d as g,o as u,w as l,e as r,i as a,q as h,y as B,z as S,f as C,F as O,v as T,u as E,t as k,Q as q,D}from"./app-C9TPYcyI.js";import{Q as c}from"./QTd-C8-cawf9.js";import{Q as I}from"./QTr-C5HOi2mq.js";import{Q as N}from"./QTable-C4W0HIkd.js";import{Q as U}from"./QLayout-Cz7UUZvn.js";import{_ as V}from"./BackendLayout-OuQ8BjqX.js";import{u as R}from"./use-quasar-COBsxLNH.js";import"./use-fullscreen-Do3aAD0t.js";import"./QSelect-ju1f9kGM.js";import"./touch-DVKQTzFF.js";const $={class:"flex items-center justify-between q-pa-md bg-white"},j={class:"q-gutter-sm"},X=Object.assign({layout:V},{__name:"MusterRoll",props:{offices:Array,skills:Array},setup(w){const s=w,n=R(),i=v(""),m=["Unskilled","Semi-Skilled","Skilled-I","Skilled-II"],d=[{name:"name",label:"Office Name",field:"name",align:"left",sortable:!0}],f=[...s.skills].sort((t,e)=>m.indexOf(t)-m.indexOf(e));f.forEach(t=>{d.push({name:t,label:t||"No Skill Mentioned",field:t,align:"center",sortable:!0})}),d.push({name:"total",label:"Total",field:"total",align:"center",sortable:!0});const p=t=>s.offices.reduce((e,o)=>{const x=Number(o[t])||0;return e+x},0),y=()=>{n.loading.show(),axios.get(route("export.summary-mr"),{responseType:"blob"}).then(t=>{const e=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=e,o.setAttribute("download",Date.now()+".xlsx"),o.click()}).catch(t=>{var e,o;n.notify({type:"negative",message:((o=(e=t.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to download file"})}).finally(()=>{n.loading.hide()})},Q=t=>{window.history.back()};return(t,e)=>(u(),g(U,{class:"container",padding:""},{default:l(()=>[r("div",$,[r("div",null,[e[3]||(e[3]=r("div",{class:"stitle"},"Muster Roll Employees Summary",-1)),a(_,{class:"text-dark"},{default:l(()=>[a(b,{class:"cursor-pointer",onClick:e[0]||(e[0]=o=>t.$inertia.get(t.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),a(b,{class:"cursor-pointer",label:"Go Back",onClick:Q})]),_:1})]),r("div",j,[a(h,{label:"Export",color:"primary",onClick:e[1]||(e[1]=o=>y()),icon:"download"})])]),e[5]||(e[5]=r("br",null,null,-1)),a(B,{flat:""},{default:l(()=>[a(S,null,{default:l(()=>[a(N,{rows:s.offices,columns:d,"row-key":"id",flat:"",filter:i.value,pagination:{rowsPerPage:0}},{"top-right":l(()=>[a(q,{borderless:"",dense:"",debounce:"800",modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=o=>i.value=o),outlined:"",clearable:"",placeholder:"Search Office"},{append:l(()=>[a(D,{name:"search"})]),_:1},8,["modelValue"])]),"bottom-row":l(()=>[a(I,{class:"bg-grey-3 text-bold q-border-t"},{default:l(()=>[a(c,{class:"text-left font-bold"},{default:l(()=>e[4]||(e[4]=[r("strong",null,"Total",-1)])),_:1,__:[4]}),(u(!0),C(O,null,T(E(f),o=>(u(),g(c,{key:o,class:"text-center font-bold"},{default:l(()=>[r("strong",null,k(p(o)),1)]),_:2},1024))),128)),a(c,{class:"text-center font-bold"},{default:l(()=>[r("strong",null,k(p("total")),1)]),_:1})]),_:1})]),_:1},8,["rows","filter"])]),_:1})]),_:1})]),_:1,__:[5]}))}});export{X as default};
