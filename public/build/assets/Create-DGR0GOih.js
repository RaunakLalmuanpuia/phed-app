import{Q as Z,a as M}from"./QBreadcrumbs-CwyW2-8k.js";import{a as W,Q as ee}from"./QLayout-DM2KzGkc.js";import{r as $,x as le,i as oe,o as k,j as p,f as s,g as t,D as se,m as v,Q as _,u as o,c as q,F as z,n as A,t as m,B as u,z as te,W as re}from"./app-BAZM61hi.js";import{Q as D}from"./QStepperNavigation-LGZRwqcC.js";import{Q as ae,a as N}from"./QStepper-B6tMxkc_.js";import{Q as B}from"./QSelect-Cavdkq-w.js";import{Q as ne}from"./QFile-BYhU5Fm6.js";import{Q as ie}from"./QForm-DZ624rW7.js";import{_ as de}from"./BackendLayout-8jexcsci.js";import{u as me}from"./use-quasar-CBR4PA6u.js";/* empty css            */import"./touch-B9nuNVMx.js";const ue={class:"flex items-center justify-between q-pa-md bg-white"},ce={class:"q-pa-md"},pe={class:"row items-center q-gutter-md"},fe={class:"rounded-borders overflow-hidden",style:{"background-color":"#8a82f7"}},_e={class:"column q-gutter-sm"},ge={class:"row q-gutter-md"},ve={class:"row q-col-gutter-sm"},be={class:"col-12 col-sm-6"},ye={class:"col-12 col-sm-6"},ke={class:"col-12 col-sm-6"},qe={class:"col-12 col-sm-6"},Ve={class:"col-12 col-sm-6"},we={class:"col-12 col-sm-6"},he={class:"col-12 col-sm-6"},Qe={class:"row q-col-gutter-sm"},Ue={class:"col-12 col-sm-6"},xe={class:"col-12 col-sm-6"},Pe={class:"col-12 col-sm-6"},Se={class:"col-12 col-sm-6"},Ce={class:"col-12 col-sm-6"},Ee={class:"col-12 col-sm-6"},Ie={class:"col-12 col-sm-6"},De={class:"col-12 col-sm-6"},Ne={class:"row q-col-gutter-sm"},Be={class:"text-subtitle2 q-mb-xs"},Fe={class:"rounded-borders overflow-hidden"},je={class:"row q-col-gutter-sm q-mb-md"},Te={class:"col-12 col-sm-6"},Me={class:"col-12 col-sm-6"},$e={class:"col-12 col-sm-6"},Re={class:"col-12 col-sm-6"},Oe={class:"col-12 col-sm-6"},We={class:"col-12 col-sm-6"},ze={class:"col-12 col-sm-6"},Ae={class:"row q-col-gutter-sm q-mb-md"},Je={class:"col-12 col-sm-6"},Le={class:"col-12 col-sm-6"},Ge={class:"col-12 col-sm-6"},Ke={class:"col-12 col-sm-6"},He={class:"col-12 col-sm-6"},Xe={class:"col-12 col-sm-6"},Ye={class:"col-12 col-sm-6"},Ze={class:"col-12 col-sm-6"},el={class:"row q-col-gutter-sm q-mb-md"},ll={class:"row items-center justify-between"},ol={class:"text-subtitle2"},sl={key:0},tl={class:"row items-center no-wrap"},rl=["href"],al={key:1,class:"text-grey"},J="https://storage.googleapis.com/a1aa/image/089155c9-d1c1-4945-5728-c9bdb3576171.jpg",yl=Object.assign({layout:de},{__name:"Create",props:["documentTypes","offices"],setup(E){const b=me(),d=$("1"),e=le({avatar:null,name:"",email:"",mobile:"",parent_name:"",date_of_birth:"",designation:"",employment_type:"",office:"",educational_qln:"",technical_qln:"",name_of_workplace:"",post_per_qualification:"",date_of_engagement:"",skill_category:"",skill_at_present:"",documents:[]}),I=$(null),F=$(null);function L(){var r;(r=F.value)==null||r.click()}function G(r){const l=r.target.files[0];if(l&&l.size<=800*1024){const a=new FileReader;a.onload=()=>{I.value=a.result},e.avatar=l,a.readAsDataURL(l)}else alert("File too large or invalid type. Max size: 800KB.")}function K(){I.value=null,F.value.value=null,e.avatar=null}const j=()=>{if(d.value==="1"){if(!e.name||!e.mobile||!e.parent_name||!e.date_of_birth||!e.educational_qln||!e.technical_qln){b.notify({type:"negative",message:"Please fill all required Personal Info fields."});return}d.value="2"}else if(d.value==="2"){if(!e.employment_type||!e.designation||!e.date_of_engagement||!e.name_of_workplace||!e.office||!e.post_per_qualification||!e.skill_category||!e.skill_at_present){b.notify({type:"negative",message:"Please fill all required Job Info fields."});return}d.value="3"}else d.value==="3"&&(d.value="4")},T=()=>{d.value==="4"?d.value="3":d.value==="3"?d.value="2":d.value==="2"&&(d.value="1")},H=r=>r?typeof r=="string"?r:URL.createObjectURL(r):"#",X=[{label:"MR",value:"MR"},{label:"PE",value:"PE"}],R=[{label:"Unskilled",value:"Unskilled"},{label:"Semi-Skilled",value:"Semi-Skilled"},{label:"Skilled-I",value:"Skilled-I"},{label:"Skilled-II",value:"Skilled-II"}],Y=()=>{b.dialog({title:"Confirm Submission",message:"Are you sure you want to submit?",cancel:!0,persistent:!0}).onOk(()=>{const r=new FormData;r.append("avatar",e.avatar),r.append("name",e.name),r.append("email",e.email),r.append("mobile",e.mobile),r.append("parent_name",e.parent_name),r.append("date_of_birth",e.date_of_birth),r.append("designation",e.designation),r.append("employment_type",e.employment_type),r.append("office",e.office),r.append("educational_qln",e.educational_qln),r.append("technical_qln",e.technical_qln),r.append("name_of_workplace",e.name_of_workplace),r.append("post_per_qualification",e.post_per_qualification),r.append("date_of_engagement",e.date_of_engagement),r.append("skill_category",e.skill_category),r.append("skill_at_present",e.skill_at_present);for(const l in e.documents)e.documents[l]&&r.append(`documents[${l}]`,e.documents[l]);axios.post(route("employee.store"),r,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{const{employee:a,message:f}=l.data;b.notify({type:"positive",message:l.data.message||"Employee saved successfully."}),e.reset(),re.get(route("employee.show",a))}).catch(l=>{if(l.response){const a=l.response.data.errors,f=[];let c=null;if(a){for(const g in a)c||(c=g),a[g]&&f.push(...a[g]);if(e.errors=a,c){const y={name:1,email:1,mobile:1,parent_name:1,date_of_birth:1,educational_qln:1,technical_qln:1,employment_type:2,designation:2,date_of_engagement:2,name_of_workplace:2,office:2,post_per_qualification:2,skill_category:2,skill_at_present:2,documents:3}[c]||1;d.value=String(y)}b.notify({type:"negative",message:f.join(", ")})}else l.response.data.message&&b.notify({type:"negative",message:l.response.data.message})}else b.notify({type:"negative",message:"System Error. Please try again later."})})})};return(r,l)=>(k(),oe(ee,{class:"container",padding:""},{default:p(()=>[s("div",ue,[s("div",null,[l[19]||(l[19]=s("div",{class:"stitle"},"Create Employee",-1)),t(Z,{class:"text-dark"},{default:p(()=>[t(M,{class:"cursor-pointer",icon:"dashboard",label:"Dashboard",onClick:l[0]||(l[0]=a=>r.$inertia.get(r.route("dashboard")))}),t(M,{class:"cursor-pointer",label:"All Employees",onClick:l[1]||(l[1]=a=>r.$inertia.get(r.route("employees.all")))}),t(M,{label:"New Employee"})]),_:1})])]),l[39]||(l[39]=s("br",null,null,-1)),t(ie,{onSubmit:se(Y,["prevent"]),class:"bg-white q-pa-md"},{default:p(()=>[t(ae,{modelValue:d.value,"onUpdate:modelValue":l[18]||(l[18]=a=>d.value=a),ref:"stepper",animated:"",color:"secondary"},{default:p(()=>[t(N,{name:"1",title:"Personal Info",icon:"person",done:d.value>1},{default:p(()=>{var a,f,c,g,y,V,w,h,Q,U,x,P,S,C;return[s("div",ce,[s("div",pe,[s("div",fe,[t(W,{src:I.value||J,alt:"Profile Photo",style:{width:"120px",height:"120px"},"img-class":"object-cover"},null,8,["src"])]),s("div",_e,[s("div",ge,[t(v,{label:"Upload new Photo",color:"primary",onClick:L,class:"text-weight-medium",rounded:"",unelevated:""}),t(v,{label:"Reset",color:"grey-4","text-color":"dark",onClick:K,class:"text-weight-medium",rounded:"",unelevated:""})]),l[20]||(l[20]=s("p",{class:"text-subtitle2 text-grey-7"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1))])]),s("input",{ref_key:"fileInput",ref:F,type:"file",accept:"image/*",class:"hidden",onChange:G},null,544)]),s("div",ve,[s("div",be,[t(_,{modelValue:o(e).name,"onUpdate:modelValue":l[2]||(l[2]=i=>o(e).name=i),label:"Name",outlined:"",dense:"",error:!!((a=o(e).errors)!=null&&a.name),"error-message":(f=o(e).errors)==null?void 0:f.name,rules:[i=>!!i||"Name is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",ye,[t(_,{modelValue:o(e).email,"onUpdate:modelValue":l[3]||(l[3]=i=>o(e).email=i),label:"Email",type:"email",outlined:"",dense:"",error:!!((c=o(e).errors)!=null&&c.email),"error-message":(g=o(e).errors)==null?void 0:g.email},null,8,["modelValue","error","error-message"])]),s("div",ke,[t(_,{modelValue:o(e).mobile,"onUpdate:modelValue":l[4]||(l[4]=i=>o(e).mobile=i),label:"Mobile",mask:"##########",outlined:"",dense:"",error:!!((y=o(e).errors)!=null&&y.mobile),"error-message":(V=o(e).errors)==null?void 0:V.mobile,rules:[i=>!!i||"Mobile is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",qe,[t(_,{modelValue:o(e).parent_name,"onUpdate:modelValue":l[5]||(l[5]=i=>o(e).parent_name=i),label:"Parent Name",outlined:"",dense:"",error:!!((w=o(e).errors)!=null&&w.parent_name),"error-message":(h=o(e).errors)==null?void 0:h.parent_name,rules:[i=>!!i||"Parent Name is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ve,[t(_,{modelValue:o(e).date_of_birth,"onUpdate:modelValue":l[6]||(l[6]=i=>o(e).date_of_birth=i),label:"Date of Birth",type:"date",outlined:"",dense:"",error:!!((Q=o(e).errors)!=null&&Q.date_of_birth),"error-message":(U=o(e).errors)==null?void 0:U.date_of_birth,rules:[i=>!!i||"Date of Birth is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",we,[t(_,{modelValue:o(e).educational_qln,"onUpdate:modelValue":l[7]||(l[7]=i=>o(e).educational_qln=i),label:"Educational Qualification",outlined:"",dense:"",error:!!((x=o(e).errors)!=null&&x.educational_qln),"error-message":(P=o(e).errors)==null?void 0:P.educational_qln,rules:[i=>!!i||"Education Qualification is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",he,[t(_,{modelValue:o(e).technical_qln,"onUpdate:modelValue":l[8]||(l[8]=i=>o(e).technical_qln=i),label:"Technical Qualification",outlined:"",dense:"",error:!!((S=o(e).errors)!=null&&S.technical_qln),"error-message":(C=o(e).errors)==null?void 0:C.technical_qln,rules:[i=>!!i||"Technical Qualification is required"]},null,8,["modelValue","error","error-message","rules"])])]),t(D,null,{default:p(()=>[t(v,{color:"primary",label:"Next",onClick:j})]),_:1})]}),_:1},8,["done"]),t(N,{name:"2",title:"Job Info",icon:"work",done:d.value>2},{default:p(()=>{var a,f,c,g,y,V,w,h,Q,U,x,P,S,C,i,O;return[s("div",Qe,[s("div",Ue,[t(B,{modelValue:o(e).employment_type,"onUpdate:modelValue":l[9]||(l[9]=n=>o(e).employment_type=n),label:"Employment Type",options:X,"emit-value":"","map-options":"",outlined:"",dense:"",error:!!((a=o(e).errors)!=null&&a.employment_type),"error-message":(f=o(e).errors)==null?void 0:f.employment_type,rules:[n=>!!n||"Employment Type is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",xe,[t(_,{modelValue:o(e).designation,"onUpdate:modelValue":l[10]||(l[10]=n=>o(e).designation=n),label:"Designation",outlined:"",dense:"",error:!!((c=o(e).errors)!=null&&c.designation),"error-message":(g=o(e).errors)==null?void 0:g.designation,rules:[n=>!!n||"Designation is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Pe,[t(_,{modelValue:o(e).date_of_engagement,"onUpdate:modelValue":l[11]||(l[11]=n=>o(e).date_of_engagement=n),label:"Date of Engagement",type:"date",outlined:"",dense:"",error:!!((y=o(e).errors)!=null&&y.date_of_engagement),"error-message":(V=o(e).errors)==null?void 0:V.date_of_engagement,rules:[n=>!!n||"Date of Engagement is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Se,[t(_,{modelValue:o(e).name_of_workplace,"onUpdate:modelValue":l[12]||(l[12]=n=>o(e).name_of_workplace=n),label:"Workplace",outlined:"",dense:"",error:!!((w=o(e).errors)!=null&&w.name_of_workplace),"error-message":(h=o(e).errors)==null?void 0:h.name_of_workplace,rules:[n=>!!n||"Workplace is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ce,[t(B,{modelValue:o(e).office,"onUpdate:modelValue":l[13]||(l[13]=n=>o(e).office=n),label:"Office",options:E.offices,"option-label":"name","option-value":"id","emit-value":"","map-options":"",outlined:"",dense:"",error:!!((Q=o(e).errors)!=null&&Q.office),"error-message":(U=o(e).errors)==null?void 0:U.office,rules:[n=>!!n||"Office is required"]},null,8,["modelValue","options","error","error-message","rules"])]),s("div",Ee,[t(_,{modelValue:o(e).post_per_qualification,"onUpdate:modelValue":l[14]||(l[14]=n=>o(e).post_per_qualification=n),label:"Post per Qualification",outlined:"",dense:"",error:!!((x=o(e).errors)!=null&&x.post_per_qualification),"error-message":(P=o(e).errors)==null?void 0:P.post_per_qualification,rules:[n=>!!n||"Post per Qualification is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ie,[t(B,{modelValue:o(e).skill_category,"onUpdate:modelValue":l[15]||(l[15]=n=>o(e).skill_category=n),label:"Skill Category",options:R,"emit-value":"","map-options":"",outlined:"",dense:"",error:!!((S=o(e).errors)!=null&&S.skill_category),"error-message":(C=o(e).errors)==null?void 0:C.skill_category,rules:[n=>!!n||"Skill Category is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",De,[t(B,{modelValue:o(e).skill_at_present,"onUpdate:modelValue":l[16]||(l[16]=n=>o(e).skill_at_present=n),label:"Skill at Present",options:R,"emit-value":"","map-options":"",outlined:"",dense:"",error:!!((i=o(e).errors)!=null&&i.skill_at_present),"error-message":(O=o(e).errors)==null?void 0:O.skill_at_present,rules:[n=>!!n||"Skill at Present is required"]},null,8,["modelValue","error","error-message","rules"])])]),t(D,null,{default:p(()=>[t(v,{color:"primary",label:"Next",onClick:j}),t(v,{flat:"",color:"primary",label:"Back",onClick:T,class:"q-ml-sm"})]),_:1})]}),_:1},8,["done"]),t(N,{name:"3",title:"Upload Documents",icon:"cloud_upload",done:d.value>3},{default:p(()=>[s("div",Ne,[(k(!0),q(z,null,A(E.documentTypes,(a,f)=>(k(),q("div",{class:"col-12 col-sm-6",key:a.id},[s("div",Be,m(a.name),1),t(ne,{filled:"",modelValue:o(e).documents[a.id],"onUpdate:modelValue":c=>o(e).documents[a.id]=c,label:"Upload File",accept:".pdf,.jpg,.jpeg,.png",counter:!0,clearable:"",class:"full-width"},null,8,["modelValue","onUpdate:modelValue"])]))),128))]),t(D,null,{default:p(()=>[t(v,{color:"primary",label:"Next",onClick:j}),t(v,{flat:"",color:"primary",label:"Back",onClick:T,class:"q-ml-sm"})]),_:1})]),_:1},8,["done"]),t(N,{name:"4",title:"Preview Information",icon:"visibility",done:d.value>4},{default:p(()=>[s("div",Fe,[t(W,{src:I.value||J,alt:"Profile Photo",style:{width:"120px",height:"120px"},"img-class":"object-cover"},null,8,["src"])]),l[36]||(l[36]=s("div",{class:"q-mb-md text-h6"},"Personal Info",-1)),s("div",je,[s("div",Te,[l[21]||(l[21]=s("strong",null,"Name:",-1)),u(" "+m(o(e).name),1)]),s("div",Me,[l[22]||(l[22]=s("strong",null,"Email:",-1)),u(" "+m(o(e).email),1)]),s("div",$e,[l[23]||(l[23]=s("strong",null,"Mobile:",-1)),u(" "+m(o(e).mobile),1)]),s("div",Re,[l[24]||(l[24]=s("strong",null,"Parent Name:",-1)),u(" "+m(o(e).parent_name),1)]),s("div",Oe,[l[25]||(l[25]=s("strong",null,"Date of Birth:",-1)),u(" "+m(o(e).date_of_birth),1)]),s("div",We,[l[26]||(l[26]=s("strong",null,"Education:",-1)),u(" "+m(o(e).educational_qln),1)]),s("div",ze,[l[27]||(l[27]=s("strong",null,"Technical Qualification:",-1)),u(" "+m(o(e).technical_qln),1)])]),l[37]||(l[37]=s("div",{class:"q-mb-md text-h6"},"Job Info",-1)),s("div",Ae,[s("div",Je,[l[28]||(l[28]=s("strong",null,"Employment Type:",-1)),u(" "+m(o(e).employment_type),1)]),s("div",Le,[l[29]||(l[29]=s("strong",null,"Designation:",-1)),u(" "+m(o(e).designation),1)]),s("div",Ge,[l[30]||(l[30]=s("strong",null,"Date of Engagement:",-1)),u(" "+m(o(e).date_of_engagement),1)]),s("div",Ke,[l[31]||(l[31]=s("strong",null,"Workplace:",-1)),u(" "+m(o(e).name_of_workplace),1)]),s("div",He,[l[32]||(l[32]=s("strong",null,"Office:",-1)),u(" "+m(E.offices[o(e).office].name),1)]),s("div",Xe,[l[33]||(l[33]=s("strong",null,"Post per Qualification:",-1)),u(" "+m(o(e).post_per_qualification),1)]),s("div",Ye,[l[34]||(l[34]=s("strong",null,"Skill Category:",-1)),u(" "+m(o(e).skill_category),1)]),s("div",Ze,[l[35]||(l[35]=s("strong",null,"Skill at Present:",-1)),u(" "+m(o(e).skill_at_present),1)])]),l[38]||(l[38]=s("div",{class:"q-mb-md text-h6"},"Uploaded Documents",-1)),s("div",el,[(k(!0),q(z,null,A(E.documentTypes,(a,f)=>(k(),q("div",{class:"col-12 col-sm-6",key:a.id},[s("div",ll,[s("div",ol,[s("strong",null,m(a.name),1)]),o(e).documents[a.id]?(k(),q("div",sl,[s("div",tl,[s("a",{href:H(o(e).documents[a.id]),target:"_blank",class:"text-primary text-weight-medium"},[t(te,{name:"visibility",class:"q-mr-xs"})],8,rl)])])):(k(),q("div",al,"No document uploaded"))])]))),128))]),t(D,null,{default:p(()=>[t(v,{type:"submit",color:"btn-primary",label:"Submit"}),t(v,{flat:"",color:"primary",label:"Back",onClick:T,class:"q-ml-sm"}),t(v,{flat:"",color:"negative",label:"Cancel",class:"q-ml-sm",onClick:l[17]||(l[17]=a=>r.$inertia.get(r.route("employees.all")))})]),_:1})]),_:1,__:[36,37,38]},8,["done"])]),_:1},8,["modelValue"])]),_:1})]),_:1,__:[39]}))}});export{yl as default};
