import{Q as Ft,a as dt}from"./QBreadcrumbs-BqovQUvq.js";import{b as It,a as Mt,Q as Ht}from"./QLayout-DfDNxEFp.js";import{K as _t,L as Be,M as wt,N as Qe,r as N,E as P,j as Ne,i as kt,O as me,R as Ze,k as D,z as ve,P as Wt,S as Kt,T as at,U as nt,I as Ae,V as Ie,X as et,h as fe,Y as xt,Z as Yt,_ as Jt,J as je,c as T,o as g,w as l,f as t,q as j,b as d,Q as ee,d as L,e as A,F as le,n as ue,t as C,m as E,p as M,x as be,l as $e,u as x,B as b,$ as Gt,a0 as Xt,a1 as Je,a2 as Zt,a3 as el,a4 as tl,a5 as ll,a6 as ct,a7 as ft,a8 as al,a9 as nl,aa as Se,ab as ye,W as tt,ac as Re,ad as qt,ae as ol,af as Ct,ag as Tt,ah as sl,A as St,H as il,ai as rl,aj as mt,ak as ul,al as dl,am as cl,an as fl,G as vt,v as ml}from"./app-C2dex-nA.js";import{b as $t,Q as Me,a as V,c as h,v as vl,d as gt,u as gl,p as pt,e as pl,f as bl,g as yl,r as bt,s as hl,C as De,_ as _l,h as wl}from"./BackendLayout-61FwaHAo.js";import{r as kl,Q as lt}from"./QSelect-BZa9mMoO.js";import{a as xl,Q as Dt,u as ql,b as Cl,c as Tl}from"./QTable-CKa4PAwo.js";import{Q as Sl}from"./QTd-BDG46jDw.js";import{u as xe}from"./use-quasar-25QNHLYa.js";import{u as Ee}from"./useUtils-CCSkXXzh.js";import{_ as Rt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as yt}from"./touch-C2QLkE3y.js";import{Q as He}from"./QFile-sja2y1j2.js";import{Q as Et}from"./QForm-9ePr80Zr.js";import"./date-BYqxjEjy.js";let $l=0;const Dl=["click","keydown"],Rl={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${$l++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function El(e,a,o,r){const i=_t(wt,Be);if(i===Be)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Be;const{proxy:f}=Qe(),c=N(null),v=N(null),u=N(null),n=P(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),s=P(()=>i.currentModel.value===e.name),p=P(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(s.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),w=P(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),q=P(()=>e.disable===!0||i.hasFocus.value===!0||s.value===!1&&i.hasActiveTab.value===!0?-1:e.tabindex||0);function S(O,Y){var B;if(Y!==!0&&(O==null?void 0:O.qAvoidFocus)!==!0&&((B=c.value)==null||B.focus()),e.disable!==!0){i.updateModel({name:e.name}),o("click",O);return}}function _(O){Kt(O,[13,32])?S(O,!0):at(O)!==!0&&O.keyCode>=35&&O.keyCode<=40&&O.altKey!==!0&&O.metaKey!==!0&&i.onKbdNavigate(O.keyCode,f.$el)===!0&&nt(O),o("keydown",O)}function H(){const O=i.tabProps.value.narrowIndicator,Y=[],B=D("div",{ref:u,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});e.icon!==void 0&&Y.push(D(ve,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&Y.push(D("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&Y.push(e.alertIcon!==void 0?D(ve,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):D("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),O===!0&&Y.push(B);const W=[D("div",{class:"q-focus-helper",tabindex:-1,ref:c}),D("div",{class:w.value},Wt(a.default,Y))];return O===!1&&W.push(B),W}const K={name:P(()=>e.name),rootRef:v,tabIndicatorRef:u,routeData:r};Ne(()=>{i.unregisterTab(K)}),kt(()=>{i.registerTab(K)});function ne(O,Y){const B={ref:v,class:p.value,tabindex:q.value,role:"tab","aria-selected":s.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:S,onKeydown:_,...Y};return me(D(O,B,H()),[[Ze,n.value]])}return{renderTab:ne,$tabs:i}}const Oe=Ae({name:"QTab",props:Rl,emits:Dl,setup(e,{slots:a,emit:o}){const{renderTab:r}=El(e,a,o);return()=>r("div")}});function Pl(e,a,o){const r=o===!0?["left","right"]:["top","bottom"];return`absolute-${a===!0?r[0]:r[1]}${e?` text-${e}`:""}`}const Vl=["left","center","right","justify"],Ll=Ae({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Vl.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:a,emit:o}){const{proxy:r}=Qe(),{$q:i}=r,{registerTick:f}=Ie(),{registerTick:c}=Ie(),{registerTick:v}=Ie(),{registerTimeout:u,removeTimeout:n}=et(),{registerTimeout:s,removeTimeout:p}=et(),w=N(null),q=N(null),S=N(e.modelValue),_=N(!1),H=N(!0),K=N(!1),ne=N(!1),O=[],Y=N(0),B=N(!1);let W=null,X=null,ae;const ge=P(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Pl(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),he=P(()=>{const k=Y.value,$=S.value;for(let U=0;U<k;U++)if(O[U].name.value===$)return!0;return!1}),_e=P(()=>`q-tabs__content--align-${_.value===!0?"left":ne.value===!0?"justify":e.align}`),R=P(()=>`q-tabs row no-wrap items-center q-tabs--${_.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),de=P(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+_e.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),qe=P(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),we=P(()=>e.vertical!==!0&&i.lang.rtl===!0),ce=P(()=>kl===!1&&we.value===!0);fe(we,se),fe(()=>e.modelValue,k=>{Pe({name:k,setCurrent:!0,skipEmit:!0})}),fe(()=>e.outsideArrows,Ce);function Pe({name:k,setCurrent:$,skipEmit:U}){S.value!==k&&(U!==!0&&e["onUpdate:modelValue"]!==void 0&&o("update:modelValue",k),($===!0||e["onUpdate:modelValue"]===void 0)&&(Le(S.value,k),S.value=k))}function Ce(){f(()=>{w.value&&Ve({width:w.value.offsetWidth,height:w.value.offsetHeight})})}function Ve(k){if(qe.value===void 0||q.value===null)return;const $=k[qe.value.container],U=Math.min(q.value[qe.value.scroll],Array.prototype.reduce.call(q.value.children,(G,F)=>G+(F[qe.value.content]||0),0)),J=$>0&&U>$;_.value=J,J===!0&&c(se),ne.value=$<parseInt(e.breakpoint,10)}function Le(k,$){const U=k!=null&&k!==""?O.find(G=>G.name.value===k):null,J=$!=null&&$!==""?O.find(G=>G.name.value===$):null;if(Fe===!0)Fe=!1;else if(U&&J){const G=U.tabIndicatorRef.value,F=J.tabIndicatorRef.value;W!==null&&(clearTimeout(W),W=null),G.style.transition="none",G.style.transform="none",F.style.transition="none",F.style.transform="none";const Q=G.getBoundingClientRect(),te=F.getBoundingClientRect();F.style.transform=e.vertical===!0?`translate3d(0,${Q.top-te.top}px,0) scale3d(1,${te.height?Q.height/te.height:1},1)`:`translate3d(${Q.left-te.left}px,0,0) scale3d(${te.width?Q.width/te.width:1},1,1)`,v(()=>{W=setTimeout(()=>{W=null,F.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",F.style.transform="none"},70)})}J&&_.value===!0&&oe(J.rootRef.value)}function oe(k){const{left:$,width:U,top:J,height:G}=q.value.getBoundingClientRect(),F=k.getBoundingClientRect();let Q=e.vertical===!0?F.top-J:F.left-$;if(Q<0){q.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Q),se();return}Q+=e.vertical===!0?F.height-G:F.width-U,Q>0&&(q.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Q),se())}function se(){const k=q.value;if(k===null)return;const $=k.getBoundingClientRect(),U=e.vertical===!0?k.scrollTop:Math.abs(k.scrollLeft);we.value===!0?(H.value=Math.ceil(U+$.width)<k.scrollWidth-1,K.value=U>0):(H.value=U>0,K.value=e.vertical===!0?Math.ceil(U+$.height)<k.scrollHeight:Math.ceil(U+$.width)<k.scrollWidth)}function I(k){X!==null&&clearInterval(X),X=setInterval(()=>{Z(k)===!0&&m()},5)}function pe(){I(ce.value===!0?Number.MAX_SAFE_INTEGER:0)}function ie(){I(ce.value===!0?0:Number.MAX_SAFE_INTEGER)}function m(){X!==null&&(clearInterval(X),X=null)}function y(k,$){const U=Array.prototype.filter.call(q.value.children,te=>te===$||te.matches&&te.matches(".q-tab.q-focusable")===!0),J=U.length;if(J===0)return;if(k===36)return oe(U[0]),U[0].focus(),!0;if(k===35)return oe(U[J-1]),U[J-1].focus(),!0;const G=k===(e.vertical===!0?38:37),F=k===(e.vertical===!0?40:39),Q=G===!0?-1:F===!0?1:void 0;if(Q!==void 0){const te=we.value===!0?-1:1,ke=U.indexOf($)+Q*te;return ke>=0&&ke<J&&(oe(U[ke]),U[ke].focus({preventScroll:!0})),!0}}const z=P(()=>ce.value===!0?{get:k=>Math.abs(k.scrollLeft),set:(k,$)=>{k.scrollLeft=-$}}:e.vertical===!0?{get:k=>k.scrollTop,set:(k,$)=>{k.scrollTop=$}}:{get:k=>k.scrollLeft,set:(k,$)=>{k.scrollLeft=$}});function Z(k){const $=q.value,{get:U,set:J}=z.value;let G=!1,F=U($);const Q=k<F?-1:1;return F+=Q*5,F<0?(G=!0,F=0):(Q===-1&&F<=k||Q===1&&F>=k)&&(G=!0,F=k),J($,F),se(),G}function re(k,$){for(const U in k)if(k[U]!==$[U])return!1;return!0}function We(){let k=null,$={matchedLen:0,queryDiff:9999,hrefLen:0};const U=O.filter(Q=>{var te;return((te=Q.routeData)==null?void 0:te.hasRouterLink.value)===!0}),{hash:J,query:G}=r.$route,F=Object.keys(G).length;for(const Q of U){const te=Q.routeData.exact.value===!0;if(Q.routeData[te===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:ke,query:Ke,matched:zt,href:Qt}=Q.routeData.resolvedLink.value,Ye=Object.keys(Ke).length;if(te===!0){if(ke!==J||Ye!==F||re(G,Ke)===!1)continue;k=Q.name.value;break}if(ke!==""&&ke!==J||Ye!==0&&re(Ke,G)===!1)continue;const Te={matchedLen:zt.length,queryDiff:F-Ye,hrefLen:Qt.length-ke.length};if(Te.matchedLen>$.matchedLen){k=Q.name.value,$=Te;continue}else if(Te.matchedLen!==$.matchedLen)continue;if(Te.queryDiff<$.queryDiff)k=Q.name.value,$=Te;else if(Te.queryDiff!==$.queryDiff)continue;Te.hrefLen>$.hrefLen&&(k=Q.name.value,$=Te)}if(k===null&&O.some(Q=>Q.routeData===void 0&&Q.name.value===S.value)===!0){Fe=!1;return}Pe({name:k,setCurrent:!0})}function Bt(k){if(n(),B.value!==!0&&w.value!==null&&k.target&&typeof k.target.closest=="function"){const $=k.target.closest(".q-tab");$&&w.value.contains($)===!0&&(B.value=!0,_.value===!0&&oe($))}}function jt(){u(()=>{B.value=!1},30)}function Ue(){it.avoidRouteWatcher===!1?s(We):p()}function st(){if(ae===void 0){const k=fe(()=>r.$route.fullPath,Ue);ae=()=>{k(),ae=void 0}}}function Ut(k){O.push(k),Y.value++,Ce(),k.routeData===void 0||r.$route===void 0?s(()=>{if(_.value===!0){const $=S.value,U=$!=null&&$!==""?O.find(J=>J.name.value===$):null;U&&oe(U.rootRef.value)}}):(st(),k.routeData.hasRouterLink.value===!0&&Ue())}function Nt(k){O.splice(O.indexOf(k),1),Y.value--,Ce(),ae!==void 0&&k.routeData!==void 0&&(O.every($=>$.routeData===void 0)===!0&&ae(),Ue())}const it={currentModel:S,tabProps:ge,hasFocus:B,hasActiveTab:he,registerTab:Ut,unregisterTab:Nt,verifyRouteModel:Ue,updateModel:Pe,onKbdNavigate:y,avoidRouteWatcher:!1};xt(wt,it);function rt(){W!==null&&clearTimeout(W),m(),ae==null||ae()}let ut,Fe;return Ne(rt),Yt(()=>{ut=ae!==void 0,rt()}),Jt(()=>{ut===!0&&(st(),Fe=!0,Ue()),Ce()}),()=>D("div",{ref:w,class:R.value,role:"tablist",onFocusin:Bt,onFocusout:jt},[D(It,{onResize:Ve}),D("div",{ref:q,class:de.value,onScroll:se},je(a.default)),D(ve,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(H.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||i.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:pe,onTouchstartPassive:pe,onMouseupPassive:m,onMouseleavePassive:m,onTouchendPassive:m}),D(ve,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(K.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||i.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:ie,onTouchstartPassive:ie,onMouseupPassive:m,onMouseleavePassive:m,onTouchendPassive:m})])}}),Ol={class:"row q-col-gutter-md q-mt-sm"},Al={class:"q-pa-sm"},Bl={class:"q-pa-sm"},jl={class:"q-pa-sm"},Ul={class:"q-pa-sm"},Nl={class:"q-pa-sm"},zl={key:0},Ql={__name:"Document",props:["data","office"],setup(e){const a=e,o=N(""),r=P(()=>{var f;return(f=a.data)!=null&&f.documents?a.data.documents.filter(c=>{var u,n,s;const v=o.value.toLowerCase();return((u=c.name)==null?void 0:u.toLowerCase().includes(v))||((s=(n=c.type)==null?void 0:n.name)==null?void 0:s.toLowerCase().includes(v))}):[]});function i(f){return new Date(f).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})}return(f,c)=>(g(),T(M,{class:"q-mt-md"},{default:l(()=>[t(j,null,{default:l(()=>[c[1]||(c[1]=d("div",{class:"stitle"},"Uploaded Documents",-1)),d("div",Ol,[t(ee,{modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=v=>o.value=v),dense:"",outlined:"",label:"Search by document name or type...",class:"col-12 col-sm-6"},null,8,["modelValue"])])]),_:1,__:[1]}),t(xl,{flat:"",dense:"",class:"q-ma-sm"},{default:l(()=>[c[3]||(c[3]=d("thead",null,[d("tr",{class:"text-left"},[d("th",null,"Document Name"),d("th",null,"Type"),d("th",null,"Mime Type"),d("th",null,"Upload Date"),d("th",null,"Actions")])],-1)),d("tbody",null,[(g(!0),L(le,null,ue(r.value,v=>{var u;return g(),L("tr",{key:v.id,class:"text-left"},[d("td",Al,C(v.name),1),d("td",Bl,C(((u=v.type)==null?void 0:u.name)||"—"),1),d("td",jl,C(v.mime),1),d("td",Ul,C(i(v.upload_date)),1),d("td",Nl,[t(E,{icon:"visibility",flat:"",dense:"",round:"",href:`/storage/${v.path}`,target:"_blank",title:"View Document"},null,8,["href"]),t(E,{icon:"download",flat:"",dense:"",round:"",href:`/storage/${v.path}`,download:"",title:"Download Document"},null,8,["href"])])])}),128)),r.value.length===0?(g(),L("tr",zl,c[2]||(c[2]=[d("td",{colspan:"5",class:"text-center text-grey"},"No documents found",-1)]))):A("",!0)])]),_:1,__:[3]})]),_:1}))}},Fl={__name:"TransferRequest",props:["data","office"],setup(e){const{formatDate:a}=Ee(),o=xe(),r=N(!1),i=be({}),f=v=>{i.post(route("transfer.approve",v),{onStart:()=>{o.loading.show()},onFinish:()=>{o.loading.hide(),r.value=!1,i.reset(),o.notify({type:"success",message:"Transfer Approved",position:"bottom"})},onError:u=>{Object.values(u).forEach(n=>{o.notify({type:"negative",message:n,position:"bottom"})})}})},c=v=>{i.post(route("transfer.reject",v),{onStart:()=>{o.loading.show()},onFinish:()=>{o.loading.hide(),r.value=!1,i.reset(),o.notify({type:"negative",message:"Transfer Rejected",position:"bottom"})},onError:u=>{Object.values(u).forEach(n=>{o.notify({type:"negative",message:n,position:"bottom"})})}})};return(v,u)=>(g(),T(M,{class:"q-mt-md"},{default:l(()=>[t(j,{class:"flex items-center justify-between"},{default:l(()=>u[0]||(u[0]=[d("div",{class:"stitle text-lg font-bold"},"Transfer Request",-1)])),_:1,__:[0]}),t($e),t(j,null,{default:l(()=>[u[3]||(u[3]=d("div",{class:"stitle text-md font-semibold q-mb-sm"},"Tranfer Requests",-1)),t(Dt,{rows:e.data.transfer_requests,columns:[{name:"current_office",label:"Current Office",field:n=>{var s;return(s=n.current_office)==null?void 0:s.name}},{name:"requested_office",label:"Requested Office",field:n=>{var s;return(s=n.requested_office)==null?void 0:s.name}},{name:"status",label:"Status",field:"approval_status"},{name:"date",label:"Request Date",field:n=>x(a)(n.request_date)},{name:"actions",label:"Actions",field:"id",align:"center"}],"row-key":"id",flat:"",bordered:""},{"body-cell-actions":l(n=>[t(Sl,{props:n},{default:l(()=>[n.row.approval_status==="pending"?(g(),T($t,{key:0,flat:"",dense:"",color:"primary",label:"Actions",size:"sm"},{default:l(()=>[t(Me,null,{default:l(()=>[me((g(),T(V,{clickable:"",onClick:s=>f(n.row.id)},{default:l(()=>[t(h,{avatar:""},{default:l(()=>[t(ve,{name:"check",color:"positive"})]),_:1}),t(h,null,{default:l(()=>u[1]||(u[1]=[b("Approve")])),_:1,__:[1]})]),_:2},1032,["onClick"])),[[Ze]]),me((g(),T(V,{clickable:"",onClick:s=>c(n.row.id)},{default:l(()=>[t(h,{avatar:""},{default:l(()=>[t(ve,{name:"close",color:"negative"})]),_:1}),t(h,null,{default:l(()=>u[2]||(u[2]=[b("Reject")])),_:1,__:[2]})]),_:2},1032,["onClick"])),[[Ze]])]),_:2},1024)]),_:2},1024)):A("",!0)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1,__:[3]})]),_:1}))}},Il=Rt(Fl,[["__scopeId","data-v-41900c29"]]),ze=Ae({name:"QTooltip",inheritAttrs:!1,props:{...gl,...Zt,...Je,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Je.transitionShow,default:"jump-down"},transitionHide:{...Je.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:gt},self:{type:String,default:"top middle",validator:gt},offset:{type:Array,default:()=>[14,14],validator:vl},scrollTarget:Xt,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Gt],setup(e,{slots:a,emit:o,attrs:r}){let i,f;const c=Qe(),{proxy:{$q:v}}=c,u=N(null),n=N(!1),s=P(()=>pt(e.anchor,v.lang.rtl)),p=P(()=>pt(e.self,v.lang.rtl)),w=P(()=>e.persistent!==!0),{registerTick:q,removeTick:S}=Ie(),{registerTimeout:_}=et(),{transitionProps:H,transitionStyle:K}=el(e),{localScrollTarget:ne,changeScrollEvent:O,unconfigureScrollTarget:Y}=pl(e,Le),{anchorEl:B,canShow:W,anchorEvents:X}=bl({showing:n,configureAnchorEl:Ve}),{show:ae,hide:ge}=tl({showing:n,canShow:W,handleShow:de,handleHide:qe,hideOnRouteChange:w,processOnMount:!0});Object.assign(X,{delayShow:Pe,delayHide:Ce});const{showPortal:he,hidePortal:_e,renderPortal:R}=ll(c,u,se,"tooltip");if(v.platform.is.mobile===!0){const I={anchorEl:B,innerRef:u,onClickOutside(ie){return ge(ie),ie.target.classList.contains("q-dialog__backdrop")&&nt(ie),!0}},pe=P(()=>e.modelValue===null&&e.persistent!==!0&&n.value===!0);fe(pe,ie=>{(ie===!0?yl:bt)(I)}),Ne(()=>{bt(I)})}function de(I){he(),q(()=>{f=new MutationObserver(()=>ce()),f.observe(u.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),ce(),Le()}),i===void 0&&(i=fe(()=>v.screen.width+"|"+v.screen.height+"|"+e.self+"|"+e.anchor+"|"+v.lang.rtl,ce)),_(()=>{he(!0),o("show",I)},e.transitionDuration)}function qe(I){S(),_e(),we(),_(()=>{_e(!0),o("hide",I)},e.transitionDuration)}function we(){f!==void 0&&(f.disconnect(),f=void 0),i!==void 0&&(i(),i=void 0),Y(),ct(X,"tooltipTemp")}function ce(){hl({targetEl:u.value,offset:e.offset,anchorEl:B.value,anchorOrigin:s.value,selfOrigin:p.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Pe(I){if(v.platform.is.mobile===!0){yt(),document.body.classList.add("non-selectable");const pe=B.value,ie=["touchmove","touchcancel","touchend","click"].map(m=>[pe,m,"delayHide","passiveCapture"]);ft(X,"tooltipTemp",ie)}_(()=>{ae(I)},e.delay)}function Ce(I){v.platform.is.mobile===!0&&(ct(X,"tooltipTemp"),yt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),_(()=>{ge(I)},e.hideDelay)}function Ve(){if(e.noParentEvent===!0||B.value===null)return;const I=v.platform.is.mobile===!0?[[B.value,"touchstart","delayShow","passive"]]:[[B.value,"mouseenter","delayShow","passive"],[B.value,"mouseleave","delayHide","passive"]];ft(X,"anchor",I)}function Le(){if(B.value!==null||e.scrollTarget!==void 0){ne.value=al(B.value,e.scrollTarget);const I=e.noParentEvent===!0?ce:ge;O(ne.value,I)}}function oe(){return n.value===!0?D("div",{...r,ref:u,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",r.class],style:[r.style,K.value],role:"tooltip"},je(a.default)):null}function se(){return D(nl,H.value,oe)}return Ne(we),Object.assign(c.proxy,{updatePosition:ce}),R}}),Ml={key:0,class:"text-gray-500 text-center py-6"},Hl={key:1,class:"flex flex-col gap-4"},Wl={class:"flex flex-wrap justify-between items-center mb-3"},Kl={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 p-3 rounded-md"},Yl={key:0,class:"mt-4"},Jl={class:"space-y-2"},Gl={class:"flex items-center space-x-2"},Xl={class:"flex space-x-2"},Zl={__name:"EditRequest",props:["data"],setup(e){const{formatDate:a}=Ee(),o=c=>{tt.post(route("edit.approve",c))},r=c=>{tt.post(route("edit.reject",c))},i=c=>{try{return JSON.parse(c)}catch{return{}}},f={name:"Name",date_of_birth:"Date of Birth",parent_name:"Parent's Name",employment_type:"Employment Type",designation:"Designation",educational_qln:"Educational Qualification",name_of_workplace:"Workplace Name",post_per_qualification:"Post per Qualification",date_of_engagement:"Date of Engagement",skill_category:"Skill Category",skill_at_present:"Skill at Present"};return(c,v)=>(g(),T(M,{class:"q-mt-md"},{default:l(()=>[t(j,null,{default:l(()=>v[0]||(v[0]=[d("div",{class:"stitle text-lg font-bold"},"Edit Requests",-1)])),_:1,__:[0]}),t($e),t(j,null,{default:l(()=>[e.data.edit_requests.length===0?(g(),L("div",Ml," No edit requests found. ")):(g(),L("div",Hl,[(g(!0),L(le,null,ue(e.data.edit_requests,u=>(g(),T(M,{key:u.id,class:"shadow-md rounded-xl border border-gray-200 hover:shadow-lg transition"},{default:l(()=>[t(j,null,{default:l(()=>[d("div",Wl,[d("div",null,[v[1]||(v[1]=d("b",{class:"text-label"},"Status:",-1)),d("span",{class:Se({"text-yellow-600":u.approval_status==="pending","text-green-600":u.approval_status==="approved","text-red-600":u.approval_status==="rejected"})},C(u.approval_status),3)]),d("div",null,[v[2]||(v[2]=d("b",{class:"text-label"},"Requested On:",-1)),b(" "+C(x(a)(u.request_date)),1)])]),d("div",null,[v[3]||(v[3]=d("b",{class:"block mb-2 text-label"},"Requested Changes:",-1)),d("div",Kl,[(g(!0),L(le,null,ue(i(u.requested_changes),(n,s)=>(g(),L("div",{key:s,class:"flex justify-between items-center"},[t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>[b(C(f[s]??s)+": ",1)]),_:2},1024),t(h,{class:"text-label"},{default:l(()=>[b(C(s==="date_of_birth"||s==="date_of_engagement"?x(a)(n):n),1)]),_:2},1024)]),_:2},1024)]))),128))])]),u.attachments&&u.attachments.length>0?(g(),L("div",Yl,[v[6]||(v[6]=d("b",{class:"block mb-2"},"Attached Documents:",-1)),d("div",Jl,[(g(!0),L(le,null,ue(u.attachments,n=>{var s;return g(),L("div",{key:n.id,class:"flex items-center justify-between p-2 border rounded-md"},[d("div",Gl,[t(ve,{name:"attach_file",size:"sm"}),d("span",null,[d("b",null,C(((s=n.type)==null?void 0:s.name)||"Unknown Type"),1)])]),d("div",Xl,[t(E,{flat:"",dense:"",round:"",color:"primary",icon:"download",href:`/storage/${n.path}`,target:"_blank"},{default:l(()=>[t(ze,null,{default:l(()=>v[4]||(v[4]=[b("Download")])),_:1,__:[4]})]),_:2},1032,["href"]),t(E,{flat:"",dense:"",round:"",color:"primary",icon:"visibility",href:`/storage/${n.path}`,target:"_blank"},{default:l(()=>[t(ze,null,{default:l(()=>v[5]||(v[5]=[b("View")])),_:1,__:[5]})]),_:2},1032,["href"])])])}),128))])])):A("",!0)]),_:2},1024),u.approval_status==="pending"?(g(),T(ye,{key:0,align:"right"},{default:l(()=>[t(E,{label:"Approve",color:"positive",onClick:n=>o(u.id)},null,8,["onClick"]),t(E,{label:"Reject",color:"negative",onClick:n=>r(u.id)},null,8,["onClick"])]),_:2},1024)):A("",!0)]),_:2},1024))),128))]))]),_:1})]),_:1}))}},ea={key:0,class:"text-gray-500 text-center py-6"},ta={key:1,class:"flex flex-col gap-4"},la={class:"flex flex-wrap justify-between items-center mb-3"},aa={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 p-3 rounded-md"},na={key:0,class:"mt-3"},oa={__name:"DeletionRequest",props:["data"],setup(e){const{formatDate:a}=Ee(),o=xe(),r=be({});function i(v){try{return JSON.parse(v.reason)}catch{return{}}}const f=v=>{r.post(route("deletion.approve",v),{onStart:()=>{o.loading.show()},onFinish:()=>{o.loading.hide(),r.reset(),o.notify({type:"success",message:"Deletion Approved",position:"bottom"})},onError:u=>{Object.values(u).forEach(n=>{o.notify({type:"negative",message:n,position:"bottom"})})}})},c=v=>{r.post(route("deletion.reject",v),{onStart:()=>{o.loading.show()},onFinish:()=>{o.loading.hide(),r.reset(),o.notify({type:"negative",message:"Deletion Rejected",position:"bottom"})},onError:u=>{Object.values(u).forEach(n=>{o.notify({type:"negative",message:n,position:"bottom"})})}})};return(v,u)=>(g(),T(M,{class:"q-mt-md"},{default:l(()=>[t(j,null,{default:l(()=>u[0]||(u[0]=[d("div",{class:"stitle text-lg font-bold"},"Deletion Requests",-1)])),_:1,__:[0]}),t($e),t(j,null,{default:l(()=>[e.data.deletion_requests.length===0?(g(),L("div",ea," No deletion requests. ")):(g(),L("div",ta,[(g(!0),L(le,null,ue(e.data.deletion_requests,n=>(g(),T(M,{key:n.id,class:"shadow-md rounded-xl border border-gray-200 hover:shadow-lg transition"},{default:l(()=>[t(j,null,{default:l(()=>[d("div",la,[d("div",null,[u[1]||(u[1]=d("b",{class:"text-label"},"Status:",-1)),d("span",{class:Se({"text-yellow-600":n.approval_status==="pending","text-green-600":n.approval_status==="approved","text-red-600":n.approval_status==="rejected"})},C(n.approval_status),3)]),d("div",null,[u[2]||(u[2]=d("b",{class:"text-label"},"Requested On:",-1)),b(" "+C(x(a)(n.request_date)),1)])]),d("div",null,[u[7]||(u[7]=d("b",{class:"block mb-2 text-label"},"Reason Details:",-1)),d("div",aa,[t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>u[3]||(u[3]=[b("Reason:")])),_:1,__:[3]}),t(h,{class:"text-label"},{default:l(()=>[b(C(i(n).reason),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>u[4]||(u[4]=[b("Year:")])),_:1,__:[4]}),t(h,{class:"text-label"},{default:l(()=>[b(C(i(n).year),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>u[5]||(u[5]=[b("Remark:")])),_:1,__:[5]}),t(h,{class:"text-label"},{default:l(()=>[b(C(i(n).remark),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>u[6]||(u[6]=[b("Seniority List:")])),_:1,__:[6]}),t(h,{class:"text-label"},{default:l(()=>[b(C(i(n).seniority_list),1)]),_:2},1024)]),_:2},1024)]),i(n).supporting_document?(g(),L("div",na,[t(E,{dense:"",flat:"",color:"primary",icon:"attach_file",href:`/${i(n).supporting_document}`,target:"_blank",label:"View Document"},null,8,["href"])])):A("",!0)])]),_:2},1024),n.approval_status==="pending"?(g(),T(ye,{key:0,align:"right"},{default:l(()=>[t(E,{label:"Approve",color:"positive",onClick:s=>f(n.id)},null,8,["onClick"]),t(E,{label:"Reject",color:"negative",onClick:s=>c(n.id)},null,8,["onClick"])]),_:2},1024)):A("",!0)]),_:2},1024))),128))]))]),_:1})]),_:1}))}},sa={key:0,class:"text-gray-500 text-center py-6"},ia={key:1,class:"flex flex-col gap-4"},ra={class:"flex flex-wrap justify-between items-center mb-3"},ua={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 p-3 rounded-md"},da={key:0,class:"mt-3"},ca={__name:"RequestDeletion",props:["data"],setup(e){const{formatDate:a}=Ee(),o=e,r=xe(),i=be({reason:"",seniority_list:"",year:"",remark:"",supporting_document:null}),f=N(!1);function c(u){try{return JSON.parse(u.reason)}catch{return{}}}function v(){i.post(route("deletion.request",o.data),{preserveScroll:!0,onSuccess:()=>{r.notify({type:"positive",message:"Deletion request submitted successfully"}),f.value=!1,i.reset()},onError:u=>{Object.values(u).forEach(n=>{r.notify({type:"negative",message:n,position:"bottom"})})}})}return(u,n)=>(g(),T(M,{class:"q-mt-md"},{default:l(()=>[t(j,{class:"flex items-center justify-between"},{default:l(()=>[n[8]||(n[8]=d("div",{class:"stitle text-lg font-bold"},"Request Deletion",-1)),d("div",null,[e.data.employment_type!=="Deleted"?(g(),T(E,{key:0,label:"Request Deletion",color:"negative",onClick:n[0]||(n[0]=s=>f.value=!0)})):A("",!0)])]),_:1,__:[8]}),t($e),t(Re,{modelValue:f.value,"onUpdate:modelValue":n[7]||(n[7]=s=>f.value=s)},{default:l(()=>[t(M,{style:{"min-width":"400px"}},{default:l(()=>[t(j,null,{default:l(()=>n[9]||(n[9]=[d("div",{class:"text-h6"},"Submit Deletion Request",-1)])),_:1,__:[9]}),t(j,null,{default:l(()=>[t(ee,{modelValue:x(i).reason,"onUpdate:modelValue":n[1]||(n[1]=s=>x(i).reason=s),label:"Reason",type:"textarea",outlined:"",error:!!x(i).errors.reason,"error-message":x(i).errors.reason},null,8,["modelValue","error","error-message"]),t(ee,{modelValue:x(i).seniority_list,"onUpdate:modelValue":n[2]||(n[2]=s=>x(i).seniority_list=s),label:"Seniority List",outlined:"",class:"q-mt-sm"},null,8,["modelValue"]),t(ee,{modelValue:x(i).year,"onUpdate:modelValue":n[3]||(n[3]=s=>x(i).year=s),label:"Year",type:"number",outlined:"",class:"q-mt-sm"},null,8,["modelValue"]),t(ee,{modelValue:x(i).remark,"onUpdate:modelValue":n[4]||(n[4]=s=>x(i).remark=s),label:"Remark",type:"textarea",outlined:"",class:"q-mt-sm"},null,8,["modelValue"]),t(He,{modelValue:x(i).supporting_document,"onUpdate:modelValue":n[5]||(n[5]=s=>x(i).supporting_document=s),label:"Supporting Document",outlined:"",class:"q-mt-sm",error:!!x(i).errors.supporting_document,"error-message":x(i).errors.supporting_document},null,8,["modelValue","error","error-message"])]),_:1}),t(ye,{align:"right"},{default:l(()=>[t(E,{flat:"",label:"Cancel",color:"grey",onClick:n[6]||(n[6]=s=>f.value=!1)}),t(E,{label:"Submit",color:"negative",onClick:v,loading:x(i).processing},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(j,null,{default:l(()=>[e.data.deletion_requests.length===0?(g(),L("div",sa," No deletion requests. ")):(g(),L("div",ia,[(g(!0),L(le,null,ue(e.data.deletion_requests,s=>(g(),T(M,{key:s.id,class:"shadow-md rounded-xl border border-gray-200 hover:shadow-lg transition"},{default:l(()=>[t(j,null,{default:l(()=>[d("div",ra,[d("div",null,[n[10]||(n[10]=d("b",{class:"text-label"},"Status:",-1)),d("span",{class:Se({"text-yellow-600":s.approval_status==="pending","text-green-600":s.approval_status==="approved","text-red-600":s.approval_status==="rejected"})},C(s.approval_status),3)]),d("div",null,[n[11]||(n[11]=d("b",{class:"text-label"},"Requested On:",-1)),b(" "+C(x(a)(s.request_date)),1)])]),d("div",null,[n[16]||(n[16]=d("b",{class:"block mb-2 text-label"},"Reason Details:",-1)),d("div",ua,[t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>n[12]||(n[12]=[b("Reason:")])),_:1,__:[12]}),t(h,{class:"text-label"},{default:l(()=>[b(C(c(s).reason),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>n[13]||(n[13]=[b("Year:")])),_:1,__:[13]}),t(h,{class:"text-label"},{default:l(()=>[b(C(c(s).year),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>n[14]||(n[14]=[b("Remark:")])),_:1,__:[14]}),t(h,{class:"text-label"},{default:l(()=>[b(C(c(s).remark),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>n[15]||(n[15]=[b("Seniority List:")])),_:1,__:[15]}),t(h,{class:"text-label"},{default:l(()=>[b(C(c(s).seniority_list),1)]),_:2},1024)]),_:2},1024)]),c(s).supporting_document?(g(),L("div",da,[t(E,{dense:"",flat:"",color:"primary",icon:"attach_file",href:`/${c(s).supporting_document}`,target:"_blank",label:"View Document"},null,8,["href"])])):A("",!0)])]),_:2},1024)]),_:2},1024))),128))]))]),_:1})]),_:1}))}},fa={key:0,class:"text-gray-500 text-center py-6"},ma={key:1,class:"flex flex-col gap-4"},va={class:"flex flex-wrap justify-between items-center mb-3"},ga={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 p-3 rounded-md"},pa={key:0,class:"mt-4"},ba={class:"space-y-2"},ya={class:"flex items-center space-x-2"},ha={class:"flex space-x-2"},_a={class:"grid grid-cols-2 gap-4 items-start relative"},wa={class:"text-sm font-bold mb-1"},ka={class:"q-mt-md"},xa={class:"text-sm font-bold mb-1"},qa={key:2,class:"border rounded p-4 bg-gray-50 q-mt-md"},Ca={class:"text-sm font-bold mb-2"},Ta={__name:"RequestEdit",props:["data","documentTypes"],setup(e){const{formatDate:a}=Ee(),o=e,r=xe(),i=N(!1),f=be({requested_changes:{name:"",date_of_birth:"",parent_name:"",educational_qln:"",technical_qln:""},documents:{}}),c={date_of_birth:["Birth Certificate","Aadhar","EPIC","Educational Certificate"],name:["Birth Certificate","Aadhar","EPIC","Educational Certificate"],parent_name:["Birth Certificate"],educational_qln:["Educational Certificate"],technical_qln:["Technical Certificate"]},v={name:"Name",date_of_birth:"Date of Birth",parent_name:"Parent's Name",educational_qln:"Educational Qualification",technical_qln:"Technical Qualification"},u=()=>{const n=new FormData;Object.entries(f.requested_changes).forEach(([s,p])=>{p&&n.append(`requested_changes[${s}]`,p)}),Object.entries(f.documents).forEach(([s,p])=>{p&&[].concat(p).forEach(w=>{n.append(`documents[${s}][]`,w)})}),f.post(route("edit.request",o.data),{data:n,forceFormData:!0,onSuccess:()=>{i.value=!1,f.reset()},onError:s=>{Object.values(s).forEach(p=>{Array.isArray(p)?p.forEach(w=>{r.notify({type:"negative",message:w})}):r.notify({type:"negative",message:p})})}})};return(n,s)=>(g(),L(le,null,[t(M,{class:"q-mt-md"},{default:l(()=>[t(j,{class:"flex items-center justify-between"},{default:l(()=>[s[2]||(s[2]=d("div",{class:"stitle text-lg font-bold"},"Request Edit",-1)),t(E,{label:"Request Edit",color:"primary",onClick:s[0]||(s[0]=p=>i.value=!0)})]),_:1,__:[2]}),t($e),t(j,null,{default:l(()=>[e.data.edit_requests.length===0?(g(),L("div",fa," No edit requests found. ")):(g(),L("div",ma,[(g(!0),L(le,null,ue(e.data.edit_requests,p=>(g(),T(M,{key:p.id,class:"shadow-md rounded-xl border border-gray-200 hover:shadow-lg transition"},{default:l(()=>[t(j,null,{default:l(()=>[d("div",va,[d("div",null,[s[3]||(s[3]=d("b",null,"Status:",-1)),d("span",{class:Se({"text-yellow-600":p.approval_status==="pending","text-green-600":p.approval_status==="approved","text-red-600":p.approval_status==="rejected"})},C(p.approval_status),3)]),d("div",null,[s[4]||(s[4]=d("b",null,"Requested On:",-1)),b(" "+C(x(a)(p.request_date)),1)])]),d("div",null,[s[5]||(s[5]=d("b",{class:"block mb-2"},"Requested Changes:",-1)),d("div",ga,[(g(!0),L(le,null,ue(JSON.parse(p.requested_changes),(w,q)=>(g(),L("div",{key:q,class:"flex justify-between items-center"},[t(V,null,{default:l(()=>[t(h,{side:""},{default:l(()=>[b(C(v[q]??q)+": ",1)]),_:2},1024),t(h,null,{default:l(()=>[b(C(q==="date_of_birth"?x(a)(w):w),1)]),_:2},1024)]),_:2},1024)]))),128))])]),p.attachments&&p.attachments.length>0?(g(),L("div",pa,[s[8]||(s[8]=d("b",{class:"block mb-2"},"Attached Documents:",-1)),d("div",ba,[(g(!0),L(le,null,ue(p.attachments,w=>{var q;return g(),L("div",{key:w.id,class:"flex items-center justify-between p-2 border rounded-md"},[d("div",ya,[t(ve,{name:"attach_file",size:"sm"}),d("span",null,[d("b",null,C(((q=w.type)==null?void 0:q.name)||"Unknown Type")+":",1),b(" "+C(w.name),1)])]),d("div",ha,[t(E,{flat:"",dense:"",round:"",color:"primary",icon:"download",href:`/storage/${w.path}`,target:"_blank"},{default:l(()=>[t(ze,null,{default:l(()=>s[6]||(s[6]=[b("Download")])),_:1,__:[6]})]),_:2},1032,["href"]),t(E,{flat:"",dense:"",round:"",color:"primary",icon:"visibility",href:`/storage/${w.path}`,target:"_blank"},{default:l(()=>[t(ze,null,{default:l(()=>s[7]||(s[7]=[b("View")])),_:1,__:[7]})]),_:2},1032,["href"])])])}),128))])])):A("",!0)]),_:2},1024)]),_:2},1024))),128))]))]),_:1})]),_:1}),t(Re,{modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=p=>i.value=p),persistent:""},{default:l(()=>[t(M,{style:{"min-width":"700px"}},{default:l(()=>[t(j,null,{default:l(()=>s[9]||(s[9]=[d("div",{class:"text-lg font-bold"},"Request Edit",-1)])),_:1,__:[9]}),t(j,null,{default:l(()=>[(g(),L(le,null,ue(v,(p,w)=>d("div",{key:w,class:"mb-6"},[d("div",_a,[d("div",null,[d("div",wa,"Existing "+C(p)+":",1),d("div",ka,C(w==="date_of_birth"?x(a)(o.data[w]):o.data[w]||"—"),1)]),s[10]||(s[10]=d("div",{class:"absolute top-0 bottom-0 left-1/2 w-px bg-gray-300"},null,-1)),d("div",null,[d("div",xa,"New "+C(p)+":",1),w!=="date_of_birth"?(g(),T(ee,{key:0,modelValue:x(f).requested_changes[w],"onUpdate:modelValue":q=>x(f).requested_changes[w]=q,outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])):(g(),T(ee,{key:1,modelValue:x(f).requested_changes[w],"onUpdate:modelValue":q=>x(f).requested_changes[w]=q,type:"date",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])),x(f).requested_changes[w]?(g(),L("div",qa,[d("div",Ca," Required Documents for "+C(p)+": ",1),(g(!0),L(le,null,ue(c[w],q=>(g(),L("div",{key:q,class:"mb-3"},[t(He,{filled:"",modelValue:x(f).documents[q],"onUpdate:modelValue":S=>x(f).documents[q]=S,label:q,accept:".pdf,.jpg,.jpeg,.png",clearable:"",class:"q-mt-md"},null,8,["modelValue","onUpdate:modelValue","label"])]))),128))])):A("",!0)])]),t($e,{spaced:"",class:"q-my-md"})])),64))]),_:1}),t(ye,{align:"right"},{default:l(()=>[me(t(E,{flat:"",label:"Cancel"},null,512),[[De]]),t(E,{label:"Submit",color:"primary",loading:x(f).processing,onClick:u},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Sa={__name:"RequestTransfer",props:["data","office"],setup(e){const{formatDate:a}=Ee(),o=e,r=xe(),i=N(!1),f=be({requested_office_id:""}),c=P(()=>{var u,n;return((n=(u=o.data.transfer_requests)==null?void 0:u.slice(-1)[0])==null?void 0:n.approval_status)==="pending"}),v=()=>{f.post(route("transfer.request",o.data),{onStart:()=>{r.loading.show()},onFinish:()=>{r.loading.hide(),i.value=!1,f.reset(),r.notify({type:"positive",message:"Transfer Requested",position:"bottom"})},onError:u=>{Object.values(u).forEach(n=>{r.notify({type:"negative",message:n,position:"bottom"})})}})};return(u,n)=>(g(),L(le,null,[t(M,{class:"q-mt-md"},{default:l(()=>[t(j,{class:"flex items-center justify-between"},{default:l(()=>[n[3]||(n[3]=d("div",{class:"stitle text-lg font-bold"},"Request Transfer",-1)),d("div",null,[t(E,{label:"Request Transfer",color:"primary",disable:c.value,onClick:n[0]||(n[0]=s=>i.value=!0)},null,8,["disable"])])]),_:1,__:[3]}),t($e),t(j,null,{default:l(()=>[n[4]||(n[4]=d("div",{class:"stitle text-md font-semibold q-mb-sm"},"Previous Requests",-1)),t(Dt,{rows:e.data.transfer_requests,columns:[{name:"id",label:"ID",field:"id",align:"left"},{name:"current_office",label:"Current Office",field:s=>{var p;return(p=s.current_office)==null?void 0:p.name}},{name:"requested_office",label:"Requested Office",field:s=>{var p;return(p=s.requested_office)==null?void 0:p.name}},{name:"status",label:"Status",field:"approval_status"},{name:"date",label:"Request Date",field:s=>x(a)(s.request_date)}],"row-key":"id",flat:"",bordered:""},null,8,["rows","columns"])]),_:1,__:[4]})]),_:1}),t(Re,{modelValue:i.value,"onUpdate:modelValue":n[2]||(n[2]=s=>i.value=s),persistent:""},{default:l(()=>[t(M,{style:{"min-width":"400px"}},{default:l(()=>[t(j,null,{default:l(()=>n[5]||(n[5]=[d("div",{class:"text-h6"},"Select Requested Office",-1)])),_:1,__:[5]}),t(j,null,{default:l(()=>[t(lt,{modelValue:x(f).requested_office_id,"onUpdate:modelValue":n[1]||(n[1]=s=>x(f).requested_office_id=s),options:e.office,"option-value":"id","option-label":"name",label:"Office",dense:"",outlined:""},null,8,["modelValue","options"])]),_:1}),t(ye,{align:"right"},{default:l(()=>[me(t(E,{flat:"",label:"Cancel",color:"negative"},null,512),[[De]]),t(E,{flat:"",label:"Submit",color:"primary",onClick:v})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},$a=Rt(Sa,[["__scopeId","data-v-f7de171d"]]),Da=Ae({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:a}){const o=_t(qt,Be);if(o===Be)return console.error("QTimelineEntry needs to be child of QTimeline"),Be;const r=P(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),i=P(()=>`q-timeline__dot text-${e.color||o.color}`),f=P(()=>o.layout==="comfortable"&&o.side==="left");return()=>{const c=ol(a.default,[]);if(e.body!==void 0&&c.unshift(e.body),e.heading===!0){const n=[D("div"),D("div"),D(e.tag,{class:"q-timeline__heading-title"},c)];return D("div",{class:"q-timeline__heading"},f.value===!0?n.reverse():n)}let v;e.icon!==void 0?v=[D(ve,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(v=[D("img",{class:"q-timeline__dot-img",src:e.avatar})]);const u=[D("div",{class:"q-timeline__subtitle"},[D("span",{},je(a.subtitle,[e.subtitle]))]),D("div",{class:i.value},v),D("div",{class:"q-timeline__content"},[D("h6",{class:"q-timeline__title"},je(a.title,[e.title]))].concat(c))];return D("li",{class:r.value},f.value===!0?u.reverse():u)}}}),Ra=Ae({name:"QTimeline",props:{...Ct,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:a}){const o=Qe(),r=Tt(e,o.proxy.$q);xt(qt,e);const i=P(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(r.value===!0?" q-timeline--dark":""));return()=>D("ul",{class:i.value},je(a.default))}}),Ea={class:"flex items-center justify-between q-pa-md bg-white"},Pa={class:"flex q-gutter-sm"},Va={key:0},La={class:"flex items-center justify-between"},Oa={key:1,class:"text-subtitle2 text-grey-7 q-pa-md"},Aa={key:0},Ba={key:1},ja={__name:"Transfer",props:["data","office","canCreateTransfer","canDeleteTransfer"],setup(e){const a=e,o=xe(),r=N(!1),i=N(!1),f=be({old_office_id:null,new_office_id:null,transfer_date:"",is_present_transfer:!1}),c=P(()=>{var s;return[...((s=a.data)==null?void 0:s.transfers)||[]].sort((p,w)=>new Date(p.transfer_date)-new Date(w.transfer_date))});function v(s){return new Date(s).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})}const u=s=>{f.is_present_transfer=i.value,f.post(route("transfer.store",a.data),{onStart:()=>{o.loading.show(),f.reset()},onFinish:()=>{o.loading.hide(),r.value=!1,f.reset()},onError:p=>{Object.values(p).forEach(w=>{o.notify({type:"negative",message:w,position:"bottom"})})}})},n=s=>{o.dialog({title:"Confirmation",message:"Do you want to delete?",ok:"Yes",cancel:"No"}).onOk(()=>{tt.delete(route("transfer.destroy",s),{onStart:p=>o.loading.show(),onFinish:p=>o.loading.hide(),preserveState:!1})})};return fe(i,s=>{s?(f.old_office_id=a.data.office,f.transfer_date=new Date().toISOString().split("T")[0]):(f.old_office_id=null,f.transfer_date="")}),(s,p)=>(g(),L(le,null,[t(M,{class:"q-mt-md"},{default:l(()=>[d("div",Ea,[p[7]||(p[7]=d("div",null,[d("div",{class:"stitle"},"Transfer History")],-1)),d("div",Pa,[e.canCreateTransfer?(g(),T(E,{key:0,onClick:p[0]||(p[0]=w=>r.value=!0),color:"btn-primary",icon:"add"})):A("",!0)])]),t(j,null,{default:l(()=>[c.value.length>0?(g(),L("div",Va,[t(Ra,{color:"primary",class:"q-pa-md"},{default:l(()=>[(g(!0),L(le,null,ue(c.value,(w,q)=>(g(),T(Da,{key:w.id,title:v(w.transfer_date),icon:q===c.value.length-1?"flag":"swap_horiz"},{subtitle:l(()=>[d("div",La,[d("span",null,"Transfer #"+C(q+1),1),e.canDeleteTransfer?(g(),T(E,{key:0,icon:"delete",color:"red",flat:"",dense:"",size:"m",onClick:S=>n(w.id),title:"Delete Transfer"},null,8,["onClick"])):A("",!0)])]),default:l(()=>{var S,_;return[d("div",null,[p[8]||(p[8]=b(" From ")),d("strong",null,C(((S=w.old_office)==null?void 0:S.name)||"Unknown Office"),1),p[9]||(p[9]=b(" to ")),d("strong",null,C(((_=w.new_office)==null?void 0:_.name)||"Unknown Office"),1)])]}),_:2},1032,["title","icon"]))),128))]),_:1})])):(g(),L("div",Oa," No transfer history found "))]),_:1})]),_:1}),t(Re,{modelValue:r.value,"onUpdate:modelValue":p[6]||(p[6]=w=>r.value=w)},{default:l(()=>[t(M,{style:{"min-width":"400px"}},{default:l(()=>[t(j,null,{default:l(()=>p[10]||(p[10]=[d("div",{class:"stitle"},"Add Transfer",-1)])),_:1,__:[10]}),t(j,{class:"q-gutter-md"},{default:l(()=>[t(sl,{modelValue:i.value,"onUpdate:modelValue":p[1]||(p[1]=w=>i.value=w),label:"Is Present Transfer?",color:"primary"},null,8,["modelValue"]),i.value?(g(),L("div",Aa,[t(ee,{modelValue:e.data.office.name,"onUpdate:modelValue":p[2]||(p[2]=w=>e.data.office.name=w),label:"Old Office",dense:"",outlined:"",readonly:""},null,8,["modelValue"])])):(g(),L("div",Ba,[t(lt,{modelValue:x(f).old_office_id,"onUpdate:modelValue":p[3]||(p[3]=w=>x(f).old_office_id=w),options:e.office,"option-value":"id","option-label":"name",label:"Old Office",dense:"",outlined:""},null,8,["modelValue","options"])])),t(lt,{modelValue:x(f).new_office_id,"onUpdate:modelValue":p[4]||(p[4]=w=>x(f).new_office_id=w),options:e.office,"option-value":"id","option-label":"name",label:"New Office",dense:"",outlined:""},null,8,["modelValue","options"]),t(ee,{modelValue:x(f).transfer_date,"onUpdate:modelValue":p[5]||(p[5]=w=>x(f).transfer_date=w),type:"date",label:"Transfer Date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(ye,{align:"right"},{default:l(()=>[me(t(E,{flat:"",label:"Cancel"},null,512),[[De]]),t(E,{flat:"",label:"Submit",color:"primary",onClick:u})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Ua=Ae({name:"QSpace",setup(){const e=D("div",{class:"q-space"});return()=>e}}),Na={__name:"DeletionDialog",props:{modelValue:Boolean,employee:Object},emits:["update:modelValue"],setup(e,{emit:a}){const o=xe(),r=e,i=a,f=N(r.modelValue);fe(()=>r.modelValue,u=>f.value=u),fe(f,u=>i("update:modelValue",u));const c=be({seniority_list:"",reason:"",year:new Date().getFullYear(),remark:"",supporting_document:null});function v(){c.post(route("deletion.store",r.employee),{preserveScroll:!0,onSuccess:()=>{f.value=!1,c.reset(),o.notify({type:"positive",message:"Employee Deleted successfully."})}})}return(u,n)=>(g(),T(Re,{modelValue:f.value,"onUpdate:modelValue":n[5]||(n[5]=s=>f.value=s)},{default:l(()=>[t(M,{style:{"min-width":"400px"}},{default:l(()=>[t(j,{class:"row items-center q-pa-sm bg-negative text-white"},{default:l(()=>[n[6]||(n[6]=d("div",{class:"text-h6"},"Employee Deletion Details",-1)),t(Ua),me(t(E,{icon:"close",flat:"",round:"",dense:""},null,512),[[De]])]),_:1,__:[6]}),t(Et,{onSubmit:St(v,["prevent"])},{default:l(()=>[t(j,{class:"q-gutter-md"},{default:l(()=>[t(ee,{modelValue:x(c).seniority_list,"onUpdate:modelValue":n[0]||(n[0]=s=>x(c).seniority_list=s),label:"Seniority List",dense:"",outlined:"",type:"number"},null,8,["modelValue"]),t(ee,{modelValue:x(c).reason,"onUpdate:modelValue":n[1]||(n[1]=s=>x(c).reason=s),label:"Reason",dense:"",outlined:"",required:""},null,8,["modelValue"]),t(ee,{modelValue:x(c).year,"onUpdate:modelValue":n[2]||(n[2]=s=>x(c).year=s),label:"Year",dense:"",outlined:"",type:"number"},null,8,["modelValue"]),t(ee,{modelValue:x(c).remark,"onUpdate:modelValue":n[3]||(n[3]=s=>x(c).remark=s),label:"Remark",type:"textarea",dense:"",outlined:""},null,8,["modelValue"]),t(He,{modelValue:x(c).supporting_document,"onUpdate:modelValue":n[4]||(n[4]=s=>x(c).supporting_document=s),label:"Supporting Document",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(ye,{align:"right",class:"q-pa-sm"},{default:l(()=>[me(t(E,{flat:"",label:"Cancel"},null,512),[[De]]),t(E,{color:"negative",label:"Submit Deletion",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},za={class:"flex items-center justify-between q-pa-md bg-white"},Qa={class:"flex q-gutter-sm"},Fa={__name:"Deletion",props:["deletion","canEditDelete"],setup(e){const a=xe(),o=e,r=N(!1),i=be({reason:o.deletion.reason||"",seniority_list:o.deletion.seniority_list||"",year:o.deletion.year||"",remark:o.deletion.remark||"",supporting_document:null}),f=()=>{i.post(route("deletion.update",o.deletion),{preserveScroll:!0,onSuccess:()=>{r.value=!1,a.notify({type:"positive",message:"Deleted details updated successfully."})}})},c=v=>{window.open(v,"_blank")};return(v,u)=>(g(),L(le,null,[t(M,{class:"q-mt-md"},{default:l(()=>[d("div",za,[u[8]||(u[8]=d("div",null,[d("div",{class:"stitle text-red"},"Deletion Detail")],-1)),d("div",Qa,[e.canEditDelete?(g(),T(E,{key:0,onClick:u[0]||(u[0]=n=>r.value=!0),color:"btn-primary",icon:"edit"})):A("",!0)])]),t(j,null,{default:l(()=>[t(Me,{class:"q-mt-sm"},{default:l(()=>[t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>u[9]||(u[9]=[b("Reason:")])),_:1,__:[9]}),t(h,{class:"text-label"},{default:l(()=>[b(C(e.deletion.reason),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>u[10]||(u[10]=[b("Seniority List:")])),_:1,__:[10]}),t(h,{class:"text-label"},{default:l(()=>[b(C(e.deletion.seniority_list),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>u[11]||(u[11]=[b("Year:")])),_:1,__:[11]}),t(h,{class:"text-label"},{default:l(()=>[b(C(e.deletion.year),1)]),_:1})]),_:1}),e.deletion.remark?(g(),T(V,{key:0},{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>u[12]||(u[12]=[b("Remark:")])),_:1,__:[12]}),t(h,{class:"text-label"},{default:l(()=>[b(C(e.deletion.remark),1)]),_:1})]),_:1})):A("",!0),e.deletion.supporting_document?(g(),T(V,{key:1},{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>u[13]||(u[13]=[b("Supporting Document:")])),_:1,__:[13]}),t(h,{class:"text-label"},{default:l(()=>[t(E,{dense:"",flat:"",icon:"visibility",href:`/storage/${e.deletion.supporting_document}`,target:"_blank"},null,8,["href"])]),_:1})]),_:1})):A("",!0)]),_:1})]),_:1})]),_:1}),t(Re,{modelValue:r.value,"onUpdate:modelValue":u[7]||(u[7]=n=>r.value=n)},{default:l(()=>[t(M,{style:{"min-width":"500px","max-width":"90vw"}},{default:l(()=>[t(j,{class:"bg-negative text-white"},{default:l(()=>u[14]||(u[14]=[d("div",{class:"text-h6"},"Edit Deletion Detail",-1)])),_:1,__:[14]}),t(Et,{onSubmit:St(f,["prevent"])},{default:l(()=>[t(j,{class:"q-gutter-md"},{default:l(()=>[t(ee,{modelValue:x(i).reason,"onUpdate:modelValue":u[1]||(u[1]=n=>x(i).reason=n),label:"Reason",outlined:"",dense:"",required:""},null,8,["modelValue"]),t(ee,{modelValue:x(i).seniority_list,"onUpdate:modelValue":u[2]||(u[2]=n=>x(i).seniority_list=n),label:"Seniority List",outlined:"",dense:""},null,8,["modelValue"]),t(ee,{modelValue:x(i).year,"onUpdate:modelValue":u[3]||(u[3]=n=>x(i).year=n),label:"Year",outlined:"",dense:"",type:"number"},null,8,["modelValue"]),t(ee,{modelValue:x(i).remark,"onUpdate:modelValue":u[4]||(u[4]=n=>x(i).remark=n),label:"Remark",outlined:"",dense:"",type:"textarea"},null,8,["modelValue"]),t(He,{modelValue:x(i).supporting_document,"onUpdate:modelValue":u[6]||(u[6]=n=>x(i).supporting_document=n),label:"Supporting Document",outlined:"",dense:"",accept:".pdf,.png,.jpg,.jpeg"},il({_:2},[e.deletion.supporting_document?{name:"append",fn:l(()=>[t(E,{round:"",dense:"",flat:"",icon:"visibility",href:`/storage/${e.deletion.supporting_document}`,onClick:u[5]||(u[5]=n=>c(`/storage/${e.deletion.supporting_document}`)),class:"q-ml-sm"},null,8,["href"])]),key:"0"}:void 0]),1032,["modelValue"])]),_:1}),t(ye,{align:"right"},{default:l(()=>[me(t(E,{flat:"",label:"Cancel"},null,512),[[De]]),t(E,{color:"primary",label:"Update",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Ia={class:"flex items-center justify-between q-pa-md bg-white"},Ma={class:"flex q-gutter-sm"},Ha={key:0,class:"text-grey-7 text-center q-pa-md"},Wa={class:"text-h6"},Ka={__name:"Remuneration",props:{data:Object,canCreateRemuneration:Boolean},setup(e){const{formatDate:a}=Ee(),o=e,r=N(!1),i=N(!1),f=be({remuneration:"",next_increment_date:""}),c=(u=!1)=>{i.value=u,u&&o.data.remuneration_detail?(f.remuneration=o.data.remuneration_detail.remuneration,f.next_increment_date=o.data.remuneration_detail.next_increment_date):f.reset(),r.value=!0},v=()=>{i.value?f.put(route("remuneration.update",o.data.id),{onSuccess:()=>{r.value=!1}}):f.post(route("remuneration.store",o.data.id),{onSuccess:()=>{r.value=!1,f.reset()}})};return(u,n)=>(g(),L(le,null,[t(M,{class:"q-mt-md"},{default:l(()=>[d("div",Ia,[n[4]||(n[4]=d("div",null,[d("div",{class:"stitle"},"Remuneration Detail")],-1)),d("div",Ma,[e.canCreateRemuneration?(g(),T(E,{key:0,onClick:n[0]||(n[0]=s=>c(!!e.data.remuneration_detail)),color:"btn-primary",icon:e.data.remuneration_detail?"edit":"add"},null,8,["icon"])):A("",!0)])]),t(j,null,{default:l(()=>[e.data.remuneration_detail?(g(),T(Me,{key:1,class:"q-mt-sm"},{default:l(()=>[t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>n[5]||(n[5]=[b("Remuneration:")])),_:1,__:[5]}),t(h,{class:"text-label"},{default:l(()=>[b(" ₹ "+C(e.data.remuneration_detail.remuneration.toLocaleString()),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>n[6]||(n[6]=[b("Medical Allowance (%):")])),_:1,__:[6]}),t(h,{class:"text-label"},{default:l(()=>[b(C(e.data.remuneration_detail.medical_percentage),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>n[7]||(n[7]=[b("Medical Allowance:")])),_:1,__:[7]}),t(h,{class:"text-label"},{default:l(()=>[b(" ₹ "+C(e.data.remuneration_detail.medical_amount.toLocaleString()),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>n[8]||(n[8]=[b("Total:")])),_:1,__:[8]}),t(h,{class:"text-label"},{default:l(()=>[b(" ₹ "+C(e.data.remuneration_detail.total.toLocaleString()),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>n[9]||(n[9]=[b("Monthly Remuneration:")])),_:1,__:[9]}),t(h,{class:"text-label"},{default:l(()=>[b(" ₹ "+C(e.data.remuneration_detail.round_total.toLocaleString()),1)]),_:1})]),_:1}),t($e,{spaced:""}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>n[10]||(n[10]=[b("Date of next Increment:")])),_:1,__:[10]}),t(h,{class:"text-label"},{default:l(()=>[b(C(x(a)(e.data.remuneration_detail.next_increment_date)),1)]),_:1})]),_:1})]),_:1})):(g(),L("div",Ha," No remuneration data available. "))]),_:1})]),_:1}),t(Re,{modelValue:r.value,"onUpdate:modelValue":n[3]||(n[3]=s=>r.value=s)},{default:l(()=>[t(M,{style:{"min-width":"400px"}},{default:l(()=>[t(j,null,{default:l(()=>[d("div",Wa,C(i.value?"Edit":"Add")+" Remuneration",1)]),_:1}),t(j,{class:"q-gutter-md"},{default:l(()=>[t(ee,{label:"Remuneration",type:"number",modelValue:x(f).remuneration,"onUpdate:modelValue":n[1]||(n[1]=s=>x(f).remuneration=s),outlined:"",dense:""},null,8,["modelValue"]),t(ee,{label:"Next Increment Date",type:"date",modelValue:x(f).next_increment_date,"onUpdate:modelValue":n[2]||(n[2]=s=>x(f).next_increment_date=s),outlined:"",dense:""},null,8,["modelValue"])]),_:1}),t(ye,{align:"right"},{default:l(()=>[me(t(E,{flat:"",label:"Cancel"},null,512),[[De]]),t(E,{color:"primary",label:i.value?"Update":"Save",onClick:v},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};function Pt(e,a){if(a&&e===a)return null;const o=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(o)===!0)return e;const r=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,i=r.display;return i==="block"||i==="table"?e:Pt(e.parentNode)}function Ge(e,a,o){return!e||e===document.body?!1:o===!0&&e===a||(a===document?document.body:a).contains(e.parentNode)}function Vt(e,a,o){if(o||(o=document.createRange(),o.selectNode(e),o.setStart(e,0)),a.count===0)o.setEnd(e,a.count);else if(a.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<a.count?a.count-=e.textContent.length:(o.setEnd(e,a.count),a.count=0);else for(let r=0;a.count!==0&&r<e.childNodes.length;r++)o=Vt(e.childNodes[r],a,o);return o}const Ya=/^https?:\/\//;class Ja{constructor(a,o){this.el=a,this.eVm=o,this._range=null}get selection(){if(this.el){const a=document.getSelection();if(Ge(a.anchorNode,this.el,!0)&&Ge(a.focusNode,this.el,!0))return a}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const a=this.selection;return a!=null&&a.rangeCount?a.getRangeAt(0):this._range}get parent(){const a=this.range;if(a!==null){const o=a.startContainer;return o.nodeType===document.ELEMENT_NODE?o:o.parentNode}return null}get blockParent(){const a=this.parent;return a!==null?Pt(a,this.el):null}save(a=this.range){a!==null&&(this._range=a)}restore(a=this._range){const o=document.createRange(),r=document.getSelection();a!==null?(o.setStart(a.startContainer,a.startOffset),o.setEnd(a.endContainer,a.endOffset),r.removeAllRanges(),r.addRange(o)):(r.selectAllChildren(this.el),r.collapseToEnd())}savePosition(){let a=-1,o;const r=document.getSelection(),i=this.el.parentNode;if(r.focusNode&&Ge(r.focusNode,i))for(o=r.focusNode,a=r.focusOffset;o&&o!==i;)o!==this.el&&o.previousSibling?(o=o.previousSibling,a+=o.textContent.length):o=o.parentNode;this.savedPos=a}restorePosition(a=0){if(this.savedPos>0&&this.savedPos<a){const o=window.getSelection(),r=Vt(this.el,{count:this.savedPos});r&&(r.collapse(!1),o.removeAllRanges(),o.addRange(r))}}hasParent(a,o){const r=o?this.parent:this.blockParent;return r!==null?r.nodeName.toLowerCase()===a.toLowerCase():!1}hasParents(a,o,r=this.parent){return r===null?!1:a.includes(r.nodeName.toLowerCase())===!0?!0:o===!0?this.hasParents(a,o,r.parentNode):!1}is(a,o){if(this.selection===null)return!1;switch(a){case"formatBlock":return o==="DIV"&&this.parent===this.el||this.hasParent(o,o==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(a)===o;case"fontName":const r=document.queryCommandValue(a);return r===`"${o}"`||r===o;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const i=document.queryCommandState(a);return o!==void 0?i===o:i}}getParentAttribute(a){return this.parent!==null?this.parent.getAttribute(a):null}can(a){if(a==="outdent")return this.hasParents(["blockquote","li"],!0);if(a==="indent")return this.hasParents(["li"],!0);if(a==="link")return this.selection!==null||this.is("link")}apply(a,o,r=rl){if(a==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(o)&&this.is(a,o)&&(a="outdent",o=null),o==="PRE"&&this.is(a,"PRE")&&(o="P");else if(a==="print"){r();const i=window.open();i.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),i.print(),i.close();return}else if(a==="link"){const i=this.getParentAttribute("href");if(i===null){const f=this.selectWord(this.selection),c=f?f.toString():"";if(!c.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=Ya.test(c)?c:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(f.getRangeAt(0))}else this.eVm.editLinkUrl.value=i,this.range.selectNodeContents(this.parent),this.save();return}else if(a==="fullscreen"){this.eVm.toggleFullscreen(),r();return}else if(a==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),r();return}document.execCommand(a,!1,o),r()}selectWord(a){if(a===null||a.isCollapsed!==!0||a.modify===void 0)return a;const o=document.createRange();o.setStart(a.anchorNode,a.anchorOffset),o.setEnd(a.focusNode,a.focusOffset);const r=o.collapsed?["backward","forward"]:["forward","backward"];o.detach();const i=a.focusNode,f=a.focusOffset;return a.collapse(a.anchorNode,a.anchorOffset),a.modify("move",r[0],"character"),a.modify("move",r[1],"word"),a.extend(i,f),a.modify("extend",r[1],"character"),a.modify("extend",r[0],"word"),a}}function Lt(e,a,o){a.handler?a.handler(e,o,o.caret):o.runCmd(a.cmd,a.param)}function ot(e){return D("div",{class:"q-editor__toolbar-group"},e)}function Ot(e,a,o,r=!1){const i=r||(a.type==="toggle"?a.toggled?a.toggled(e):a.cmd&&e.caret.is(a.cmd,a.param):!1),f=[];if(a.tip&&e.$q.platform.is.desktop){const c=a.key?D("div",[D("small",`(CTRL + ${String.fromCharCode(a.key)})`)]):null;f.push(D(ze,{delay:1e3},()=>[D("div",{innerHTML:a.tip}),c]))}return D(E,{...e.buttonProps.value,icon:a.icon!==null?a.icon:void 0,color:i?a.toggleColor||e.props.toolbarToggleColor:a.color||e.props.toolbarColor,textColor:i&&!e.props.toolbarPush?null:a.textColor||e.props.toolbarTextColor,label:a.label,disable:a.disable?typeof a.disable=="function"?a.disable(e):!0:!1,size:"sm",onClick(c){o==null||o(),Lt(c,a,e)}},()=>f)}function Ga(e,a){const o=a.list==="only-icons";let r=a.label,i=a.icon!==null?a.icon:void 0,f,c;function v(){n.component.proxy.hide()}if(o)c=a.options.map(s=>{const p=s.type===void 0?e.caret.is(s.cmd,s.param):!1;return p&&(r=s.tip,i=s.icon!==null?s.icon:void 0),Ot(e,s,v,p)}),f=e.toolbarBackgroundClass.value,c=[ot(c)];else{const s=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,p=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,w=a.list==="no-icons";c=a.options.map(q=>{const S=q.disable?q.disable(e):!1,_=q.type===void 0?e.caret.is(q.cmd,q.param):!1;_&&(r=q.tip,i=q.icon!==null?q.icon:void 0);const H=q.htmlTip;return D(V,{active:_,activeClass:s,clickable:!0,disable:S,dense:!0,onClick(K){var ne;v(),(K==null?void 0:K.qAvoidFocus)!==!0&&((ne=e.contentRef.value)==null||ne.focus()),e.caret.restore(),Lt(K,q,e)}},()=>[w===!0?null:D(h,{class:_?s:p,side:!0},()=>D(ve,{name:q.icon!==null?q.icon:void 0})),D(h,H?()=>D("div",{class:"text-no-wrap",innerHTML:q.htmlTip}):q.tip?()=>D("div",{class:"text-no-wrap"},q.tip):void 0)])}),f=[e.toolbarBackgroundClass.value,p]}const u=a.highlight&&r!==a.label,n=D($t,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:u?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:u&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:a.fixedLabel?a.label:r,icon:a.fixedIcon?a.icon!==null?a.icon:void 0:i,contentClass:f,onShow:s=>e.emit("dropdownShow",s),onHide:s=>e.emit("dropdownHide",s),onBeforeShow:s=>e.emit("dropdownBeforeShow",s),onBeforeHide:s=>e.emit("dropdownBeforeHide",s)},()=>c);return n}function Xa(e){if(e.caret)return e.buttons.value.filter(a=>!e.isViewingSource.value||a.find(o=>o.cmd==="viewsource")).map(a=>ot(a.map(o=>e.isViewingSource.value&&o.cmd!=="viewsource"?!1:o.type==="slot"?je(e.slots[o.slot]):o.type==="dropdown"?Ga(e,o):Ot(e,o))))}function Za(e,a,o,r={}){const i=Object.keys(r);if(i.length===0)return{};const f={default_font:{cmd:"fontName",param:e,icon:o,tip:a}};return i.forEach(c=>{const v=r[c];f[c]={cmd:"fontName",param:v,icon:o,tip:v,htmlTip:`<font face="${v}">${v}</font>`}}),f}function en(e){if(e.caret){const a=e.props.toolbarColor||e.props.toolbarTextColor;let o=e.editLinkUrl.value;const r=()=>{e.caret.restore(),o!==e.editLinkUrl.value&&document.execCommand("createLink",!1,o===""?" ":o),e.editLinkUrl.value=null};return[D("div",{class:`q-mx-xs text-${a}`},`${e.$q.lang.editor.url}: `),D("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:o,onInput:i=>{ul(i),o=i.target.value},onKeydown:i=>{if(at(i)!==!0)switch(i.keyCode){case 13:return mt(i),r();case 27:mt(i),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),ot([D(E,{key:"qedt_btm_rem",tabindex:-1,...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),D(E,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:r})])]}}const tn=Object.prototype.toString,Xe=Object.prototype.hasOwnProperty,ln=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function ht(e){if(e!==Object(e)||ln.has(tn.call(e))===!0||e.constructor&&Xe.call(e,"constructor")===!1&&Xe.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let a;for(a in e);return a===void 0||Xe.call(e,a)}function At(){let e,a,o,r,i,f,c=arguments[0]||{},v=1,u=!1;const n=arguments.length;for(typeof c=="boolean"&&(u=c,c=arguments[1]||{},v=2),Object(c)!==c&&typeof c!="function"&&(c={}),n===v&&(c=this,v--);v<n;v++)if((e=arguments[v])!==null)for(a in e)o=c[a],r=e[a],c!==r&&(u===!0&&r&&((i=Array.isArray(r))||ht(r)===!0)?(i===!0?f=Array.isArray(o)===!0?o:[]:f=ht(o)===!0?o:{},c[a]=At(u,f,r)):r!==void 0&&(c[a]=r));return c}const an=Ae({name:"QEditor",props:{...Ct,...Cl,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(a=>a.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...ql,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:a,emit:o}){const{proxy:r}=Qe(),{$q:i}=r,f=Tt(e,i),{inFullscreen:c,toggleFullscreen:v}=Tl(),u=dl(),n=N(null),s=N(null),p=N(null),w=N(!1),q=P(()=>!e.readonly&&!e.disable);let S,_,H=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),S=window.getComputedStyle(document.body).fontFamily;const K=P(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),ne=P(()=>({type:"a",flat:e.toolbarOutline!==!0&&e.toolbarPush!==!0,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!q.value,size:"sm"})),O=P(()=>{const m=i.lang.editor,y=i.iconSet.editor;return{bold:{cmd:"bold",icon:y.bold,tip:m.bold,key:66},italic:{cmd:"italic",icon:y.italic,tip:m.italic,key:73},strike:{cmd:"strikeThrough",icon:y.strikethrough,tip:m.strikethrough,key:83},underline:{cmd:"underline",icon:y.underline,tip:m.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:y.unorderedList,tip:m.unorderedList},ordered:{cmd:"insertOrderedList",icon:y.orderedList,tip:m.orderedList},subscript:{cmd:"subscript",icon:y.subscript,tip:m.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:y.superscript,tip:m.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:z=>z.caret&&!z.caret.can("link"),icon:y.hyperlink,tip:m.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:y.toggleFullscreen,tip:m.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:y.viewSource,tip:m.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:y.quote,tip:m.quote,key:81},left:{cmd:"justifyLeft",icon:y.left,tip:m.left},center:{cmd:"justifyCenter",icon:y.center,tip:m.center},right:{cmd:"justifyRight",icon:y.right,tip:m.right},justify:{cmd:"justifyFull",icon:y.justify,tip:m.justify},print:{type:"no-state",cmd:"print",icon:y.print,tip:m.print,key:80},outdent:{type:"no-state",disable:z=>z.caret&&!z.caret.can("outdent"),cmd:"outdent",icon:y.outdent,tip:m.outdent},indent:{type:"no-state",disable:z=>z.caret&&!z.caret.can("indent"),cmd:"indent",icon:y.indent,tip:m.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:y.removeFormat,tip:m.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:y.hr,tip:m.hr},undo:{type:"no-state",cmd:"undo",icon:y.undo,tip:m.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:y.redo,tip:m.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:y.heading1||y.heading,tip:m.heading1,htmlTip:`<h1 class="q-ma-none">${m.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:y.heading2||y.heading,tip:m.heading2,htmlTip:`<h2 class="q-ma-none">${m.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:y.heading3||y.heading,tip:m.heading3,htmlTip:`<h3 class="q-ma-none">${m.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:y.heading4||y.heading,tip:m.heading4,htmlTip:`<h4 class="q-ma-none">${m.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:y.heading5||y.heading,tip:m.heading5,htmlTip:`<h5 class="q-ma-none">${m.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:y.heading6||y.heading,tip:m.heading6,htmlTip:`<h6 class="q-ma-none">${m.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:y.heading,tip:m.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:y.code,htmlTip:`<code>${m.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:y.size1||y.size,tip:m.size1,htmlTip:`<font size="1">${m.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:y.size2||y.size,tip:m.size2,htmlTip:`<font size="2">${m.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:y.size3||y.size,tip:m.size3,htmlTip:`<font size="3">${m.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:y.size4||y.size,tip:m.size4,htmlTip:`<font size="4">${m.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:y.size5||y.size,tip:m.size5,htmlTip:`<font size="5">${m.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:y.size6||y.size,tip:m.size6,htmlTip:`<font size="6">${m.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:y.size7||y.size,tip:m.size7,htmlTip:`<font size="7">${m.size7}</font>`}}}),Y=P(()=>{const m=e.definitions||{},y=e.definitions||e.fonts?At(!0,{},O.value,m,Za(S,i.lang.editor.defaultFont,i.iconSet.editor.font,e.fonts)):O.value;return e.toolbar.map(z=>z.map(Z=>{if(Z.options)return{type:"dropdown",icon:Z.icon,label:Z.label,size:"sm",dense:!0,fixedLabel:Z.fixedLabel,fixedIcon:Z.fixedIcon,highlight:Z.highlight,list:Z.list,options:Z.options.map(We=>y[We])};const re=y[Z];return re?re.type==="no-state"||m[Z]&&(re.cmd===void 0||O.value[re.cmd]&&O.value[re.cmd].type==="no-state")?re:Object.assign({type:"toggle"},re):{type:"slot",slot:Z}}))}),B={$q:i,props:e,slots:a,emit:o,inFullscreen:c,toggleFullscreen:v,runCmd:se,isViewingSource:w,editLinkUrl:p,toolbarBackgroundClass:K,buttonProps:ne,contentRef:s,buttons:Y,setContent:oe};fe(()=>e.modelValue,m=>{H!==m&&(H=m,oe(m,!0))}),fe(p,m=>{o(`link${m?"Show":"Hide"}`)});const W=P(()=>e.toolbar&&e.toolbar.length!==0),X=P(()=>{const m={},y=z=>{z.key&&(m[z.key]={cmd:z.cmd,param:z.param})};return Y.value.forEach(z=>{z.forEach(Z=>{Z.options?Z.options.forEach(y):y(Z)})}),m}),ae=P(()=>c.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),ge=P(()=>`q-editor q-editor--${w.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(c.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(f.value===!0?" q-editor--dark q-dark":"")),he=P(()=>[e.contentClass,"q-editor__content",{col:c.value,"overflow-auto":c.value||e.maxHeight}]),_e=P(()=>e.disable===!0?{"aria-disabled":"true"}:{});function R(){if(s.value!==null){const m=`inner${w.value===!0?"Text":"HTML"}`,y=s.value[m];y!==e.modelValue&&(H=y,o("update:modelValue",y))}}function de(m){if(o("keydown",m),m.ctrlKey!==!0||at(m)===!0){I();return}const y=m.keyCode,z=X.value[y];if(z!==void 0){const{cmd:Z,param:re}=z;nt(m),se(Z,re,!1)}}function qe(m){I(),o("click",m)}function we(m){if(s.value!==null){const{scrollTop:y,scrollHeight:z}=s.value;_=z-y}B.caret.save(),o("blur",m)}function ce(m){cl(()=>{s.value!==null&&_!==void 0&&(s.value.scrollTop=s.value.scrollHeight-_)}),o("focus",m)}function Pe(m){const y=n.value;if(y!==null&&y.contains(m.target)===!0&&(m.relatedTarget===null||y.contains(m.relatedTarget)!==!0)){const z=`inner${w.value===!0?"Text":"HTML"}`;B.caret.restorePosition(s.value[z].length),I()}}function Ce(m){const y=n.value;y!==null&&y.contains(m.target)===!0&&(m.relatedTarget===null||y.contains(m.relatedTarget)!==!0)&&(B.caret.savePosition(),I())}function Ve(){_=void 0}function Le(m){B.caret.save()}function oe(m,y){if(s.value!==null){y===!0&&B.caret.savePosition();const z=`inner${w.value===!0?"Text":"HTML"}`;s.value[z]=m,y===!0&&(B.caret.restorePosition(s.value[z].length),I())}}function se(m,y,z=!0){pe(),B.caret.restore(),B.caret.apply(m,y,()=>{pe(),B.caret.save(),z&&I()})}function I(){setTimeout(()=>{p.value=null,r.$forceUpdate()},1)}function pe(){fl(()=>{var m;(m=s.value)==null||m.focus({preventScroll:!0})})}function ie(){return s.value}return kt(()=>{B.caret=r.caret=new Ja(s.value,B),oe(e.modelValue),I(),document.addEventListener("selectionchange",Le)}),Ne(()=>{document.removeEventListener("selectionchange",Le)}),Object.assign(r,{runCmd:se,refreshToolbar:I,focus:pe,getContentEl:ie}),()=>{let m;if(W.value){const y=[D("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+K.value},Xa(B))];p.value!==null&&y.push(D("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+K.value},en(B))),m=D("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},y)}return D("div",{ref:n,class:ge.value,style:{height:c.value===!0?"100%":null},..._e.value,onFocusin:Pe,onFocusout:Ce},[m,D("div",{ref:s,style:ae.value,class:he.value,contenteditable:q.value,placeholder:e.placeholder,...u.listeners.value,onInput:R,onKeydown:de,onClick:qe,onBlur:we,onFocus:ce,onMousedown:Ve,onTouchstartPassive:Ve})])}}}),nn={class:"flex items-center justify-between q-pa-md bg-white"},on={class:"flex q-gutter-sm"},sn={__name:"EngagementCard",props:{data:Object,canCreateEngagementCard:Boolean,canDownloadEngagementCard:Boolean},setup(e){var n,s;const a=e,o=be({html_content:((s=(n=a.data)==null?void 0:n.engagement_card)==null?void 0:s.content)||""}),r=N(!1),i=N(""),f=xe(),c=async()=>{r.value=!0;try{axios.get(route("engagement-card.show",a.data)).then(p=>{i.value=p.data,o.html_content=p.data})}catch{f.notify({type:"negative",message:"Failed to load card data"})}},v=()=>{o.post(route("engagement-card.store",a.data),{preserveScroll:!0,onSuccess:()=>{r.value=!1,f.notify({type:"positive",message:"Card saved successfully!"})}})},u=async()=>{try{const p=await axios.get(route("engagement-card.download",a.data),{responseType:"blob"}),w=window.URL.createObjectURL(new Blob([p.data],{type:"application/pdf"})),q=document.createElement("a");q.href=w,q.setAttribute("download",`EngagementCard_${a.data.id}.pdf`),document.body.appendChild(q),q.click(),q.remove()}catch{f.notify({type:"negative",message:"Failed to download PDF."})}};return(p,w)=>(g(),T(M,{class:"q-mt-md"},{default:l(()=>[d("div",nn,[w[2]||(w[2]=d("div",null,[d("div",{class:"stitle"},"Engagement Card")],-1)),d("div",on,[e.data.engagement_card&&e.canCreateEngagementCard?(g(),T(E,{key:0,color:"primary",icon:"edit",onClick:c})):A("",!0)])]),t(j,null,{default:l(()=>[!e.data.engagement_card&&e.canCreateEngagementCard?(g(),T(E,{key:0,color:"primary",label:"Create",onClick:c})):A("",!0),e.data.engagement_card&&e.canDownloadEngagementCard?(g(),T(E,{key:1,color:"primary",label:"Download",onClick:u})):A("",!0),t(Re,{modelValue:r.value,"onUpdate:modelValue":w[1]||(w[1]=q=>r.value=q),persistent:""},{default:l(()=>[t(M,{style:{width:"1000px","max-width":"100vw"}},{default:l(()=>[t(j,{class:"row items-center justify-between bg-primary text-white"},{default:l(()=>[w[3]||(w[3]=d("div",{class:"text-h6"},"Engagement Card",-1)),me(t(E,{dense:"",flat:"",icon:"close"},null,512),[[De]])]),_:1,__:[3]}),t(j,{style:{"flex-grow":"1",overflow:"auto",padding:"0"}},{default:l(()=>[t(an,{modelValue:x(o).html_content,"onUpdate:modelValue":w[0]||(w[0]=q=>x(o).html_content=q),style:{width:"100%","max-height":"1100px"}},null,8,["modelValue"])]),_:1}),t(ye,{align:"right",style:{"flex-shrink":"0"}},{default:l(()=>[t(E,{color:"primary",label:"Save",onClick:v})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}},rn={class:"flex items-center justify-between q-pa-md bg-white"},un={class:"row q-col-gutter-md"},dn={class:"col-12 col-md-4"},cn={class:"column items-center q-gutter-sm"},fn={class:"stitle"},mn={class:"q-mt-lg full-width"},vn={class:"q-mt-lg flex items-center justify-center"},gn={class:"col-12 col-md-8"},pn={class:"row q-col-gutter-md"},bn={class:"col-12 col-md-7"},yn={class:"col-12 col-md-5"},Vn=Object.assign({layout:_l},{__name:"Show",props:["data","office","documentTypes","canCreate","canEdit","canDelete","canCreateRemuneration","canCreateTransfer","canDeleteTransfer","canCreateEngagementCard","canDownloadEngagementCard","canRequestEdit","canRequestDelete","canRequestTransfer","canApproveEdit","canApproveTransfer","canApproveDelete","canEditDelete"],setup(e){const{formatDate:a}=Ee(),o=e,r=N("document"),i=N(!1),f=P(()=>{var S;return!!((S=vt().props.roles)!=null&&S.find(_=>_==="Admin"))}),c=P(()=>{var S;return!!((S=vt().props.roles)!=null&&S.find(_=>_==="Manager"))}),v=P(()=>{const S=o.data.edit_requests;return S&&S.length?S[S.length-1]:null}),u=P(()=>{const S=o.data.deletion_requests;return S&&S.length?S[S.length-1]:null}),n=P(()=>{const S=o.data.transfer_requests;return S&&S.length?S[S.length-1]:null});function s(S){if(!S)return!0;const _=new Date,H=new Date(S);return(_-H)/(1e3*60*60*24)<=15}const p=P(()=>v.value?f.value?v.value.approval_status==="pending":c.value?v.value.approval_status!=="pending"&&s(v.value.approval_date):!1:!1),w=P(()=>u.value?f.value?u.value.approval_status==="pending":c.value?u.value.approval_status!=="pending"&&s(u.value.approval_date):!1:!1),q=P(()=>n.value?f.value?n.value.approval_status==="pending":c.value?n.value.approval_status!=="pending"&&s(n.value.approval_date):!1:!1);return(S,_)=>(g(),T(Ht,{class:"container",padding:""},{default:l(()=>[d("div",rn,[d("div",null,[_[5]||(_[5]=d("div",{class:"stitle"},"Employee Detail",-1)),t(Ft,{class:"text-dark"},{default:l(()=>[t(dt,{onClick:_[0]||(_[0]=H=>S.$inertia.get(S.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),t(dt,{label:"All Employees",to:S.route("mis.import")},null,8,["to"])]),_:1})])]),_[24]||(_[24]=d("br",null,null,-1)),t(M,{flat:""},{default:l(()=>[t(j,null,{default:l(()=>[d("div",un,[d("div",dn,[t(M,{class:"q-pa-md"},{default:l(()=>{var H,K,ne,O,Y,B;return[d("div",cn,[t(ml,{size:"96px"},{default:l(()=>{var W,X;return[(W=e.data)!=null&&W.avatar?(g(),T(Mt,{key:0,src:`/storage/${(X=e.data)==null?void 0:X.avatar}`},null,8,["src"])):(g(),T(ve,{key:1,name:"person",color:"primary"}))]}),_:1}),d("div",fn,C(e.data.name),1),t(wl,{color:((K=(H=e.data)==null?void 0:H.employment_type)==null?void 0:K.trim())==="Deleted"?"red-6":"grey-6","text-color":"white",class:"stitle",label:((O=(ne=e.data)==null?void 0:ne.employment_type)==null?void 0:O.trim())==="MR"?"Muster Roll":((B=(Y=e.data)==null?void 0:Y.employment_type)==null?void 0:B.trim())==="PE"?"Provisional":"Deleted",style:{padding:"8px"},rounded:""},null,8,["color","label"]),d("div",mn,[t(Me,{class:"rounded-borders"},{default:l(()=>{var W,X,ae,ge,he,_e;return[t(V,null,{default:l(()=>[t(h,{class:"text-label"},{default:l(()=>_[6]||(_[6]=[b("Details")])),_:1,__:[6]})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[7]||(_[7]=[b("Employee Code:")])),_:1,__:[7]}),t(h,{class:"text-label"},{default:l(()=>{var R;return[b(C((R=e.data)==null?void 0:R.employee_code),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[8]||(_[8]=[b("Name:")])),_:1,__:[8]}),t(h,{class:"text-label"},{default:l(()=>{var R;return[b(C((R=e.data)==null?void 0:R.name),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[9]||(_[9]=[b("Email:")])),_:1,__:[9]}),t(h,{class:"text-label"},{default:l(()=>[b(C(e.data.email),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[10]||(_[10]=[b("Contact:")])),_:1,__:[10]}),t(h,{class:"text-label"},{default:l(()=>{var R;return[b(C((R=e.data)==null?void 0:R.mobile),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[11]||(_[11]=[b("Parent Name:")])),_:1,__:[11]}),t(h,{class:"text-label"},{default:l(()=>{var R;return[b(C((R=e.data)==null?void 0:R.parent_name),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[12]||(_[12]=[b("Date of Birth:")])),_:1,__:[12]}),t(h,{class:"text-label"},{default:l(()=>[b(C(x(a)(e.data.date_of_birth)),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[13]||(_[13]=[b("Address:")])),_:1,__:[13]}),t(h,{class:"text-label"},{default:l(()=>{var R;return[b(C(((R=e.data)==null?void 0:R.address)??"N/A"),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[14]||(_[14]=[b("Education Qln.:")])),_:1,__:[14]}),t(h,{class:"text-label"},{default:l(()=>{var R;return[b(C((R=e.data)==null?void 0:R.educational_qln),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[15]||(_[15]=[b("Technical Qln.:")])),_:1,__:[15]}),t(h,{class:"text-label"},{default:l(()=>{var R;return[b(C((R=e.data)==null?void 0:R.technical_qln),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[16]||(_[16]=[b("Designation:")])),_:1,__:[16]}),t(h,{class:"text-label"},{default:l(()=>{var R;return[b(C((R=e.data)==null?void 0:R.designation),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[17]||(_[17]=[b("Office:")])),_:1,__:[17]}),t(h,{class:"text-label"},{default:l(()=>{var R,de;return[b(C((de=(R=e.data)==null?void 0:R.office)==null?void 0:de.name),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[18]||(_[18]=[b("Office Type:")])),_:1,__:[18]}),t(h,{class:"text-label"},{default:l(()=>{var R,de;return[b(C((de=(R=e.data)==null?void 0:R.office)==null?void 0:de.type),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[19]||(_[19]=[b("Workplace:")])),_:1,__:[19]}),t(h,{class:"text-label"},{default:l(()=>{var R;return[b(C((R=e.data)==null?void 0:R.name_of_workplace),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[20]||(_[20]=[b("Date of Engagement:")])),_:1,__:[20]}),t(h,{class:"text-label"},{default:l(()=>{var R;return[b(C(x(a)((R=e.data)==null?void 0:R.date_of_engagement)||"N/A"),1)]}),_:1})]),_:1}),((X=(W=e.data)==null?void 0:W.employment_type)==null?void 0:X.trim())==="MR"?(g(),T(V,{key:0},{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[21]||(_[21]=[b("Post Per Qualification:")])),_:1,__:[21]}),t(h,{class:"text-label"},{default:l(()=>{var R;return[b(C((R=e.data)==null?void 0:R.post_per_qualification),1)]}),_:1})]),_:1})):A("",!0),((ge=(ae=e.data)==null?void 0:ae.employment_type)==null?void 0:ge.trim())==="MR"?(g(),T(V,{key:1},{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[22]||(_[22]=[b("Skill Category:")])),_:1,__:[22]}),t(h,{class:"text-label"},{default:l(()=>{var R;return[b(C((R=e.data)==null?void 0:R.skill_category),1)]}),_:1})]),_:1})):A("",!0),((_e=(he=e.data)==null?void 0:he.employment_type)==null?void 0:_e.trim())==="MR"?(g(),T(V,{key:2},{default:l(()=>[t(h,{side:"",class:"subtitle"},{default:l(()=>_[23]||(_[23]=[b("Skill at Present:")])),_:1,__:[23]}),t(h,{class:"text-label"},{default:l(()=>{var R;return[b(C((R=e.data)==null?void 0:R.skill_at_present),1)]}),_:1})]),_:1})):A("",!0)]}),_:1}),d("div",vn,[e.canEdit?(g(),T(E,{key:0,label:"Edit",onClick:_[1]||(_[1]=W=>S.$inertia.get(S.route("employee.edit",e.data))),class:"q-mr-md",color:"primary"})):A("",!0),e.canDelete&&e.data.employment_type!=="Deleted"?(g(),T(E,{key:1,label:"Delete",color:"negative",unelevated:"",onClick:_[2]||(_[2]=W=>i.value=!0)})):A("",!0)])])])]}),_:1})]),t(Na,{modelValue:i.value,"onUpdate:modelValue":_[3]||(_[3]=H=>i.value=H),employee:e.data},null,8,["modelValue","employee"]),d("div",gn,[t(Ll,{modelValue:r.value,"onUpdate:modelValue":_[4]||(_[4]=H=>r.value=H),class:"text-primary bg-white shadow-1 q-pa-sm",dense:"",align:"center"},{default:l(()=>[t(Oe,{name:"document",label:"Documents",icon:"drive_folder_upload"}),f.value&&e.canApproveEdit?(g(),T(Oe,{key:0,name:"edit",label:"Edit Request",icon:"edit",alert:p.value,"alert-icon":"circle","alert-color":"red",class:Se(p.value?"text-red":"")},null,8,["alert","class"])):A("",!0),f.value&&e.canApproveTransfer?(g(),T(Oe,{key:1,name:"transfer_request",label:"Transfer Request",icon:"input",alert:q.value,"alert-icon":"circle","alert-color":"red",class:Se(q.value?"text-red":"")},null,8,["alert","class"])):A("",!0),f.value&&e.canApproveDelete?(g(),T(Oe,{key:2,name:"deletion",label:"Deletion Request",icon:"delete_sweep",alert:w.value,"alert-icon":"circle","alert-color":"red",class:Se(w.value?"text-red":"")},null,8,["alert","class"])):A("",!0),c.value&&e.canRequestEdit?(g(),T(Oe,{key:3,name:"request_edit",label:"Request Edit",icon:"edit",alert:p.value,"alert-icon":"circle","alert-color":"red",class:Se(p.value?"text-red":"")},null,8,["alert","class"])):A("",!0),c.value&&e.canRequestTransfer?(g(),T(Oe,{key:4,name:"request_transfer",label:"Request Transfer",icon:"input"})):A("",!0),c.value&&e.canRequestDelete?(g(),T(Oe,{key:5,name:"request_deletion",label:"Request Deletion",icon:"delete_sweep"})):A("",!0)]),_:1},8,["modelValue"]),r.value==="document"?(g(),T(Ql,{key:0,data:e.data},null,8,["data"])):A("",!0),r.value==="edit"?(g(),T(Zl,{key:1,data:e.data},null,8,["data"])):A("",!0),r.value==="transfer_request"?(g(),T(Il,{key:2,data:e.data,office:e.office},null,8,["data","office"])):A("",!0),r.value==="deletion"?(g(),T(oa,{key:3,data:e.data},null,8,["data"])):A("",!0),r.value==="request_edit"?(g(),T(Ta,{key:4,data:e.data,documentTypes:e.documentTypes},null,8,["data","documentTypes"])):A("",!0),r.value==="request_transfer"?(g(),T($a,{key:5,data:e.data,office:e.office},null,8,["data","office"])):A("",!0),r.value==="request_deletion"?(g(),T(ca,{key:6,data:e.data},null,8,["data"])):A("",!0),d("div",pn,[d("div",bn,[e.data.remuneration_detail?(g(),T(Ka,{key:0,data:e.data,canCreateRemuneration:e.canCreateRemuneration},null,8,["data","canCreateRemuneration"])):A("",!0),t(ja,{data:e.data,office:e.office,canCreateTransfer:e.canCreateTransfer,canDeleteTransfer:e.canDeleteTransfer},null,8,["data","office","canCreateTransfer","canDeleteTransfer"])]),d("div",yn,[e.data.employment_type==="PE"?(g(),T(sn,{key:0,data:e.data,canCreateEngagementCard:e.canCreateEngagementCard,canDownloadEngagementCard:e.canDownloadEngagementCard},null,8,["data","canCreateEngagementCard","canDownloadEngagementCard"])):A("",!0),e.data.employment_type==="Deleted"?(g(),T(Fa,{key:1,deletion:e.data.deletion_detail,canEditDelete:e.canEditDelete},null,8,["deletion","canEditDelete"])):A("",!0)])])])])]),_:1})]),_:1})]),_:1,__:[24]}))}});export{Vn as default};
