import{Q as q,a as Q}from"./QBreadcrumbs-9BZxaCTg.js";import{r as u,l as I,d as _,o as h,w as a,e as l,i as t,y as M,q as S,h as g,t as i,A,D as k,Q as R}from"./app-y8UrBu7v.js";import{a as T,Q as j}from"./QLayout-e5rF_gRd.js";import{Q as c}from"./QTd-BOKjlgrC.js";import{a as O}from"./QSelect-D2tDqrAc.js";import{Q as U}from"./QTable-DiMxbaGi.js";import{_ as Y}from"./BackendLayout-CNzHYLKP.js";import{u as z}from"./use-quasar-DmURtSoj.js";/* empty css            */import"./QMarkupTable-Bjcs_PHk.js";import"./use-fullscreen-uUFZrff3.js";import"./touch-CL0-rOep.js";import"./QSlideTransition-CoVkLZI6.js";const G={class:"flex items-center justify-between q-pa-md bg-white"},L={class:"flex items-center gap-3"},W={class:"text-body1"},F={class:"text-caption text-grey"},H={class:"text-caption text-grey"},pe=Object.assign({layout:Y},{__name:"MasterEmployees",props:["office"],setup(J){const x=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"office",label:"Office",align:"left",field:"office",sortable:!0},{name:"type",label:"Employment Type",align:"left",field:"type",sortable:!0},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!0},{name:"post_assigned",label:"Post/Work Assigned",align:"left",field:"post_assigned",sortable:!0},{name:"is_scheme",label:"Is Scheme",align:"left",field:"is_scheme",sortable:!0},{name:"is_deleted",label:"Is Deleted",align:"left",field:"is_deleted",sortable:!0},{name:"actions",label:"Actions",align:"center"}],n=u({office:null}),b=u(""),B=z(),w=u([]),y=u(!1),r=u({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),P=()=>{n.value.search=b.value,v({pagination:r.value,filter:n.value,search:n.value.search})};function v(s){const{page:o,rowsPerPage:e,sortBy:m,descending:K}=s.pagination,N=s.filter,D=s.search;y.value=!0,axios.get(route("employees.json-index-master"),{params:{filter:N,page:o,rowsPerPage:e,search:D}}).then(d=>{console.log(d.data);const{list:p}=d.data,{data:f,per_page:E,current_page:V,total:$,to:X,from:Z}=p;w.value=f,r.value.page=V,r.value.rowsNumber=$,r.value.rowsPerPage=E}).catch(d=>{var p,f;B.notify({type:"negative",message:(f=(p=d==null?void 0:d.response)==null?void 0:p.data)==null?void 0:f.message})}).finally(()=>y.value=!1)}I(()=>{v({pagination:r.value,filter:n.value,search:n.value.search})});const C=()=>{window.history.back()};return(s,o)=>(h(),_(j,{class:"container",padding:""},{default:a(()=>[l("div",G,[l("div",null,[o[3]||(o[3]=l("div",{class:"stitle"},"Master Employee List",-1)),t(q,{class:"text-dark"},{default:a(()=>[t(Q,{class:"cursor-pointer",onClick:o[0]||(o[0]=e=>s.$inertia.get(s.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),t(Q,{class:"cursor-pointer",label:"Go Back",onClick:C})]),_:1})])]),o[4]||(o[4]=l("br",null,null,-1)),t(M,{flat:""},{default:a(()=>[t(U,{flat:"",ref:"tableRef",title:"Master Employees",rows:w.value,columns:x,"row-key":"id",pagination:r.value,"onUpdate:pagination":o[2]||(o[2]=e=>r.value=e),loading:y.value,filter:n.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:v},{"top-right":a(()=>[t(R,{dense:"",outlined:"",debounce:"800",modelValue:b.value,"onUpdate:modelValue":[o[1]||(o[1]=e=>b.value=e),P],placeholder:"Search",class:"col-12 col-sm-auto",clearable:""},{append:a(()=>[t(k,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-employee":a(e=>[t(c,{props:e},{default:a(()=>[l("div",L,[t(A,null,{default:a(()=>[e.row.avatar?(h(),_(T,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(h(),_(k,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),l("div",null,[l("div",W,i(e.row.name),1),l("div",F,i(e.row.mobile),1),l("div",H,i(e.row.date_of_birth),1)])])]),_:2},1032,["props"])]),"body-cell-office":a(e=>[t(c,{props:e},{default:a(()=>[t(O,{color:"primary","text-color":"white",dense:""},{default:a(()=>{var m;return[g(i((m=e.row.office)==null?void 0:m.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-type":a(e=>[t(c,{props:e},{default:a(()=>[g(i(e.row.designation?"Provisional":"Muster Roll"),1)]),_:2},1032,["props"])]),"body-cell-is_scheme":a(e=>[t(c,{props:e},{default:a(()=>[g(i(e.row.scheme_id?"Yes":"No"),1)]),_:2},1032,["props"])]),"body-cell-is_deleted":a(e=>[t(c,{props:e},{default:a(()=>[g(i(e.row.employment_type==="Deleted"?"Yes":"No"),1)]),_:2},1032,["props"])]),"body-cell-actions":a(e=>[t(c,{props:e},{default:a(()=>[t(S,{dense:"",flat:"",round:"",color:"primary",icon:"visibility",onClick:m=>s.$inertia.get(s.route("employee.show",e.row.id)),"aria-label":"Show user"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading","filter"])]),_:1})]),_:1,__:[4]}))}});export{pe as default};
