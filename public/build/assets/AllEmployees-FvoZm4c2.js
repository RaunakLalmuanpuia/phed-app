import{a as S,Q as p}from"./QSelect-BCg-zIQf.js";import{Q as O,a as L}from"./QBreadcrumbs-DHDWTxyF.js";import{r as g,i as W,c as r,o as i,w as s,b as t,f as o,B as P,d as B,F as $,n as M,m as _,p as q,q as h,t as f,v as R,y as G,z as C,e as k,l as H,Q as J}from"./app-B6q0O7Hh.js";import{a as K,Q as X}from"./QLayout-DpsVqyfx.js";import{Q as x}from"./QTd-CWx_4Hdm.js";import{Q as Y}from"./QTable-3YZPrs52.js";import{_ as Z}from"./BackendLayout-BLguuOb-.js";import{u as ee}from"./use-quasar-zOYUREcN.js";import"./touch-DkOak6gv.js";const le={class:"flex items-center justify-between q-pa-md bg-white"},oe={class:"stitle"},ae={class:"q-gutter-sm"},te={class:"q-pa-md"},se={class:"q-gutter-md row q-col-gutter-md"},ne={class:"row justify-between items-center"},ie={class:"text-grey-6 text-subtitle1"},re={class:"text-h5 text-weight-bold"},ue={class:"row q-col-gutter-md"},de={class:"row q-gutter-sm col-12 col-sm justify-end"},me={class:"flex items-center gap-3"},ce={class:"text-body1"},pe={class:"text-caption text-grey"},fe={class:"text-caption text-grey"},xe=Object.assign({layout:Z},{__name:"AllEmployees",props:["offices","totalEmployees","peCount","mrCount","designations","educationQlnPe","educationQlnMr","skills"],setup(m){const v=m,U=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"employment_type",label:"Employment Type",align:"left",field:"employment_type",sortable:!1},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!1},{name:"name_of_workplace",label:"Workplace",align:"left",field:"name_of_workplace",sortable:!1},{name:"office",label:"Office",align:"left",field:"office",sortable:!0},{name:"actions",label:"Actions",align:"center"}],j=[{title:"Total",value:v.totalEmployees,icon:"person_search",iconColor:"light-blue-5",bgColor:"#d6f3ff"},{title:"Muster Roll",value:v.mrCount,icon:"how_to_reg",iconColor:"indigo-6",bgColor:"#d7d9ff"},{title:"Provisional",value:v.peCount,icon:"person_add",iconColor:"orange-5",bgColor:"#ffe9d6"}],a=g({office:[],type:null,skill:null,search:null,designation:null,education_qln_pe:null,education_qln_mr:null}),N=[{label:"MR",value:"MR"},{label:"PE",value:"PE"}];g("");const T=ee(),E=g([]),Q=g(!1),u=g({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),d=()=>{V({pagination:u.value,filter:a.value,search:a.value.search})};function V(n){const{page:l,rowsPerPage:e,sortBy:b,descending:ge}=n.pagination,z=n.filter,A=n.search;Q.value=!0,axios.get(route("employees.json-manager-all"),{params:{filter:z,page:l,rowsPerPage:e,search:A}}).then(c=>{console.log(c.data);const{list:y}=c.data,{data:w,per_page:D,current_page:F,total:I,to:ve,from:be}=y;E.value=w,u.value.page=F,u.value.rowsNumber=I,u.value.rowsPerPage=D}).catch(c=>{var y,w;T.notify({type:"negative",message:(w=(y=c==null?void 0:c.response)==null?void 0:y.data)==null?void 0:w.message})}).finally(()=>Q.value=!1)}return W(()=>{V({pagination:u.value,filter:a.value,search:a.value.search})}),(n,l)=>(i(),r(X,{class:"container",padding:""},{default:s(()=>[t("div",le,[t("div",null,[t("div",oe,[l[11]||(l[11]=P("All Employee List : ")),(i(!0),B($,null,M(m.offices,e=>(i(),r(S,{square:"",key:e.value,label:e.label},null,8,["label"]))),128))]),o(O,{class:"text-dark"},{default:s(()=>[o(L,{onClick:l[0]||(l[0]=e=>n.$inertia.get(n.route("dashboard"))),icon:"dashboard",label:"Dashboard"})]),_:1})]),t("div",ae,[o(_,{label:"PE Summary",color:"primary",onClick:l[1]||(l[1]=e=>n.$inertia.get(n.route("summary.pe")))}),o(_,{label:"MR Summary",color:"primary",onClick:l[2]||(l[2]=e=>n.$inertia.get(n.route("summary.mr")))})])]),l[14]||(l[14]=t("br",null,null,-1)),o(q,{flat:""},{default:s(()=>[o(h,null,{default:s(()=>[t("div",te,[t("div",se,[(i(),B($,null,M(j,e=>o(q,{flat:"",bordered:"",class:"col-12 col-sm bg-white q-px-md q-py-lg shadow-1",key:e.title},{default:s(()=>[t("div",ne,[t("div",null,[t("div",ie,f(e.title),1),t("div",re,f(e.value),1),l[12]||(l[12]=t("div",{class:"text-caption text-grey-6 q-mt-xs"}," Employees ",-1))]),o(R,{size:"48px",style:G({backgroundColor:e.bgColor}),"text-color":"white"},{default:s(()=>[o(C,{name:e.icon,color:e.iconColor,size:"20px"},null,8,["name","color"])]),_:2},1032,["style"])])]),_:2},1024)),64))]),o(q,{flat:"",bordered:"",class:"q-mt-md bg-white shadow-1"},{default:s(()=>[o(h,null,{default:s(()=>[l[13]||(l[13]=t("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Search Filter ",-1)),t("div",ue,[o(p,{label:"Select Office",class:"col-12 col-sm-4",modelValue:a.value.office,"onUpdate:modelValue":[l[3]||(l[3]=e=>a.value.office=e),d],options:v.offices,"option-label":"label","option-value":"value","emit-value":"","map-options":"",multiple:"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),o(p,{label:"Select Employment Type",class:"col-12 col-sm-4",modelValue:a.value.type,"onUpdate:modelValue":[l[4]||(l[4]=e=>a.value.type=e),d],options:N,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"]),a.value.type==="PE"?(i(),r(p,{key:0,label:"Select Designation",class:"col-12 col-sm-4",modelValue:a.value.designation,"onUpdate:modelValue":[l[5]||(l[5]=e=>a.value.designation=e),d],options:m.designations,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])):k("",!0),a.value.type==="MR"?(i(),r(p,{key:1,label:"Select Skill",class:"col-12 col-sm-4",modelValue:a.value.skill,"onUpdate:modelValue":[l[6]||(l[6]=e=>a.value.skill=e),d],options:m.skills,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])):k("",!0),a.value.type==="PE"?(i(),r(p,{key:2,label:"Select Education Qln.",class:"col-12 col-sm-4",modelValue:a.value.education_qln_pe,"onUpdate:modelValue":[l[7]||(l[7]=e=>a.value.education_qln_pe=e),d],options:m.educationQlnPe,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])):k("",!0),a.value.type==="MR"?(i(),r(p,{key:3,label:"Select Education Qln.",class:"col-12 col-sm-4",modelValue:a.value.education_qln_mr,"onUpdate:modelValue":[l[8]||(l[8]=e=>a.value.education_qln_mr=e),d],options:m.educationQlnMr,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])):k("",!0)])]),_:1,__:[13]}),o(H),o(h,{class:"row items-center justify-between q-gutter-md"},{default:s(()=>[t("div",de,[o(_,{label:"Export",icon:"desktop_windows",color:"primary",disabled:""}),o(J,{dense:"",outlined:"",debounce:"300",modelValue:a.value.search,"onUpdate:modelValue":[l[9]||(l[9]=e=>a.value.search=e),d],placeholder:"Search",class:"col-12 col-sm-auto",clearable:""},{append:s(()=>[o(C,{name:"search"})]),_:1},8,["modelValue"])])]),_:1})]),_:1})])]),_:1}),o(Y,{flat:"",ref:"tableRef",rows:E.value,columns:U,"row-key":"id",pagination:u.value,"onUpdate:pagination":l[10]||(l[10]=e=>u.value=e),loading:Q.value,filter:a.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:V},{"body-cell-employee":s(e=>[o(x,{props:e},{default:s(()=>[t("div",me,[o(R,null,{default:s(()=>[e.row.avatar?(i(),r(K,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(i(),r(C,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),t("div",null,[t("div",ce,f(e.row.name),1),t("div",pe,f(e.row.mobile),1),t("div",fe,f(e.row.date_of_birth),1)])])]),_:2},1032,["props"])]),"body-cell-office":s(e=>[o(x,{props:e},{default:s(()=>[o(S,{color:"primary","text-color":"white",dense:""},{default:s(()=>{var b;return[P(f((b=e.row.office)==null?void 0:b.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-actions":s(e=>[o(x,{props:e},{default:s(()=>[o(_,{dense:"",flat:"",round:"",color:"primary",icon:"visibility",onClick:b=>n.$inertia.get(n.route("employee.show",e.row.id)),"aria-label":"Show user"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading","filter"])]),_:1})]),_:1,__:[14]}))}});export{xe as default};
