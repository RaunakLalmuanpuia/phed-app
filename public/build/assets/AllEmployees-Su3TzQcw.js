import{Q as N,a as A}from"./QBreadcrumbs-_QA2_IGD.js";import{r as u,i as D,c as h,o as b,w as t,b as o,f as l,t as r,p as k,q as x,d as M,F,n as L,v as S,y as O,z as v,Q as q,l as W,m as G,B as H}from"./app-BpyBzFIp.js";import{Q as V,a as J}from"./QSelect-DfpK_BkB.js";import{a as K,Q as X}from"./QLayout-DL_NyIeY.js";import{Q as Y,a as C}from"./QTable-BXR3-8Vf.js";import{_ as Z}from"./BackendLayout-DNSomVJN.js";import{u as ee}from"./use-quasar-mpcXEfnN.js";import"./use-fullscreen-CAo4_rm2.js";import"./touch-B5nOvKoK.js";const le={class:"flex items-center justify-between q-pa-md bg-white"},ae={class:"stitle"},te={class:"q-pa-md"},oe={class:"q-gutter-md row q-col-gutter-md"},se={class:"row justify-between items-center"},ne={class:"text-grey-6 text-subtitle1"},ie={class:"text-h5 text-weight-bold"},re={class:"row q-col-gutter-md"},de={class:"row q-gutter-sm col-12 col-sm justify-end"},ue={class:"flex items-center gap-3"},ce={class:"text-body1"},me={class:"text-caption text-grey"},fe={class:"text-caption text-grey"},Se=Object.assign({layout:Z},{__name:"AllEmployees",props:["office","canCreate","canEdit","canDelete","totalEmployees","peCount","mrCount","deletedCount"],setup(y){const c=y,E=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"employment_type",label:"Employment Type",align:"left",field:"employment_type",sortable:!1},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!1},{name:"name_of_workplace",label:"Workplace",align:"left",field:"name_of_workplace",sortable:!1},{name:"office",label:"Office",align:"left",field:"office",sortable:!0},{name:"actions",label:"Actions",align:"center"}],B=[{title:"Total",value:c.totalEmployees,icon:"person_search",iconColor:"light-blue-5",bgColor:"#d6f3ff"},{title:"Muster Roll",value:c.mrCount,icon:"how_to_reg",iconColor:"indigo-6",bgColor:"#d7d9ff"},{title:"Provisional",value:c.peCount,icon:"person_add",iconColor:"orange-5",bgColor:"#ffe9d6"}],s=u({type:null,skill:null,search:null}),P=[{label:"MR",value:"MR"},{label:"PE",value:"PE"}],I=[{label:"Skilled-I",value:"skilled-I"},{label:"Unskilled",value:"unskilled"},{label:"Semi-Skilled",value:"semi-skilled"},{label:"Skilled-II",value:"skilled-II"}];u("");const j=ee(),Q=u([]),_=u(!1),i=u({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),m=()=>{w({pagination:i.value,filter:s.value,search:s.value.search})};function w(n){const{page:a,rowsPerPage:e,sortBy:f,descending:pe}=n.pagination,R=n.filter,T=n.search;_.value=!0,axios.get(route("employees.json-index-all",c.office),{params:{filter:R,page:a,rowsPerPage:e,search:T}}).then(d=>{console.log(d.data);const{list:p}=d.data,{data:g,per_page:U,current_page:$,total:z,to:ge,from:be}=p;Q.value=g,i.value.page=$,i.value.rowsNumber=z,i.value.rowsPerPage=U}).catch(d=>{var p,g;j.notify({type:"negative",message:(g=(p=d==null?void 0:d.response)==null?void 0:p.data)==null?void 0:g.message})}).finally(()=>_.value=!1)}return D(()=>{w({pagination:i.value,filter:s.value,search:s.value.search})}),(n,a)=>(b(),h(X,{class:"container",padding:""},{default:t(()=>[o("div",le,[o("div",null,[o("div",ae,"All Employee List : "+r(y.office.name),1),l(N,{class:"text-dark"},{default:t(()=>[l(A,{onClick:a[0]||(a[0]=e=>n.$inertia.get(n.route("dashboard"))),icon:"dashboard",label:"Dashboard"})]),_:1})])]),a[8]||(a[8]=o("br",null,null,-1)),l(k,{flat:""},{default:t(()=>[l(x,null,{default:t(()=>[o("div",te,[o("div",oe,[(b(),M(F,null,L(B,e=>l(k,{flat:"",bordered:"",class:"col-12 col-sm bg-white q-px-md q-py-lg shadow-1",key:e.title},{default:t(()=>[o("div",se,[o("div",null,[o("div",ne,r(e.title),1),o("div",ie,r(e.value),1),a[6]||(a[6]=o("div",{class:"text-caption text-grey-6 q-mt-xs"}," Employees ",-1))]),l(S,{size:"48px",style:O({backgroundColor:e.bgColor}),"text-color":"white"},{default:t(()=>[l(v,{name:e.icon,color:e.iconColor,size:"20px"},null,8,["name","color"])]),_:2},1032,["style"])])]),_:2},1024)),64))]),l(k,{flat:"",bordered:"",class:"q-mt-md bg-white shadow-1"},{default:t(()=>[l(x,null,{default:t(()=>[a[7]||(a[7]=o("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Search Filter ",-1)),o("div",re,[l(q,{dense:"",outlined:"",debounce:"300",modelValue:s.value.search,"onUpdate:modelValue":[a[1]||(a[1]=e=>s.value.search=e),m],placeholder:"Search",class:"col-12 col-sm-4",clearable:""},{append:t(()=>[l(v,{name:"search"})]),_:1},8,["modelValue"]),l(V,{label:"Select Employment Type",class:"col-12 col-sm-4",modelValue:s.value.type,"onUpdate:modelValue":[a[2]||(a[2]=e=>s.value.type=e),m],options:P,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"]),l(V,{label:"Select Skill",class:"col-12 col-sm-4",modelValue:s.value.skill,"onUpdate:modelValue":[a[3]||(a[3]=e=>s.value.skill=e),m],options:I,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"])])]),_:1,__:[7]}),l(W),l(x,{class:"row items-center justify-between q-gutter-md"},{default:t(()=>[o("div",de,[l(q,{dense:"",outlined:"",debounce:"300",modelValue:s.value.search,"onUpdate:modelValue":[a[4]||(a[4]=e=>s.value.search=e),m],placeholder:"Search",class:"col-12 col-sm-auto",clearable:""},{append:t(()=>[l(v,{name:"search"})]),_:1},8,["modelValue"])])]),_:1})]),_:1})])]),_:1}),l(Y,{flat:"",ref:"tableRef",title:y.office.name,rows:Q.value,columns:E,"row-key":"id",pagination:i.value,"onUpdate:pagination":a[5]||(a[5]=e=>i.value=e),loading:_.value,filter:s.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:w},{"body-cell-employee":t(e=>[l(C,{props:e},{default:t(()=>[o("div",ue,[l(S,null,{default:t(()=>[e.row.avatar?(b(),h(K,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(b(),h(v,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),o("div",null,[o("div",ce,r(e.row.name),1),o("div",me,r(e.row.mobile),1),o("div",fe,r(e.row.date_of_birth),1)])])]),_:2},1032,["props"])]),"body-cell-office":t(e=>[l(C,{props:e},{default:t(()=>[l(J,{color:"primary","text-color":"white",dense:""},{default:t(()=>{var f;return[H(r((f=e.row.office)==null?void 0:f.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-actions":t(e=>[l(C,{props:e},{default:t(()=>[l(G,{dense:"",flat:"",round:"",color:"primary",icon:"visibility",onClick:f=>n.$inertia.get(n.route("employee.show",e.row.id)),"aria-label":"Show user"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["title","rows","pagination","loading","filter"])]),_:1})]),_:1,__:[8]}))}});export{Se as default};
