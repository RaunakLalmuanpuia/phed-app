import{a as x}from"./QSelect-BemEfQiN.js";import{Q as y,a as c}from"./QBreadcrumbs-OIoRQndP.js";import{r as s,l as h,d as u,o as m,w as o,e as l,i as n,h as v,f as k,F as Q,v as B,q as F,Q as N,D}from"./app-BkJ7JZO3.js";import{Q as I}from"./QTable-0JidZKtO.js";import{Q as R}from"./QLayout-DEYIHiHq.js";import{_ as V}from"./BackendLayout-D0flmuVt.js";import{u as q}from"./use-quasar-BAv4GtwJ.js";import"./use-fullscreen-BrsTnPwr.js";import"./touch-DTo9c-L_.js";const C={class:"flex items-center justify-between q-pa-md bg-white"},$={class:"stitle"},j={class:"q-gutter-sm"},Y=Object.assign({layout:V},{__name:"Remuneration",props:["offices","canGenerateRemuneration"],setup(f){const r=q(),d=s([]),g=s({}),i=s(""),b=[{name:"sl_no",label:"Sl.No",field:"sl_no",align:"center"},{name:"name",label:"Name",field:"name",align:"left"},{name:"designation",label:"Designation",field:"designation",align:"left"},{name:"remuneration",label:"Remuneration",field:"remuneration",align:"right",format:a=>new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a??0)},{name:"medical_allowance",label:"Medical (4%)",field:"medical_allowance",align:"right",format:a=>new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a??0)},{name:"total",label:"Total",field:"total",align:"right"},{name:"monthly_rem",label:"Monthly Rem.",field:"monthly_rem",align:"right"},{name:"next_increment",label:"Next Increment",field:"next_increment",align:"center"},{name:"pay_matrix",label:"Pay Matrix",field:"pay_matrix",align:"center"}];h(async()=>{const a=await axios.get(route("mis.manager-json-remuneration"));d.value=a.data.data,g.value=a.data.totals});const p=()=>{r.loading.show(),axios.get(route("export.office-remuneration"),{responseType:"blob"}).then(a=>{const e=window.URL.createObjectURL(new Blob([a.data])),t=document.createElement("a"),_=new Date().getFullYear();t.href=e,t.setAttribute("download",`remuneration-summary-${_}.xlsx`),t.click()}).catch(a=>{var e,t;r.notify({type:"negative",message:((t=(e=a.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to download file"})}).finally(()=>{r.loading.hide()})},w=()=>{window.history.back()};return(a,e)=>(m(),u(R,{class:"container",padding:""},{default:o(()=>[l("div",C,[l("div",null,[l("div",$,[e[3]||(e[3]=v("Remuneration Summary :")),(m(!0),k(Q,null,B(f.offices,t=>(m(),u(x,{square:"",key:t.value,label:t.label},null,8,["label"]))),128))]),n(y,{class:"text-dark"},{default:o(()=>[n(c,{onClick:e[0]||(e[0]=t=>a.$inertia.get(a.route("dashboard"))),icon:"dashboard",label:"Dashboard",class:"cursor-pointer"}),n(c,{class:"cursor-pointer",label:"Go Back",onClick:w})]),_:1})]),l("div",j,[n(F,{label:"Export",color:"primary",onClick:e[1]||(e[1]=t=>p()),icon:"download"})])]),e[4]||(e[4]=l("br",null,null,-1)),n(I,{rows:d.value,columns:b,filter:i.value,"row-key":"sl_no"},{"top-right":o(()=>[n(N,{borderless:"",dense:"",debounce:"800",modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value=t),outlined:"",clearable:"",placeholder:"Search Office"},{append:o(()=>[n(D,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","filter"])]),_:1,__:[4]}))}});export{Y as default};
