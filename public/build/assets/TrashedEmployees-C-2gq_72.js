import{Q as A,a as k}from"./QBreadcrumbs-xFstMEAC.js";import{r as p,l as D,d as h,o as w,w as a,e as r,i as o,y as N,q as j,h as v,t as d,A as I,D as x,Q as O}from"./app-BaVsgt8H.js";import{a as S,Q as L}from"./QLayout-Cl5bBm7n.js";import{Q as u}from"./QTd-Bioda94_.js";import{a as M}from"./QSelect-Cvgjxn-b.js";import{Q as U}from"./QTable-CckeZj6I.js";import{_ as Y}from"./BackendLayout-COnxDR-B.js";import{u as z}from"./use-quasar-9qOP1OwN.js";/* empty css            */import"./format-DAOQXuzr.js";import"./QMarkupTable-l4yyvDqL.js";import"./use-fullscreen-CJPVHaO-.js";import"./touch-CCQAwryY.js";import"./QSlideTransition-yUepvG0f.js";const F={class:"flex items-center justify-between q-pa-md bg-white"},G={class:"flex items-center gap-3"},W={class:"text-body1"},H={class:"text-caption text-grey"},J={class:"text-caption text-grey"},ge=Object.assign({layout:Y},{__name:"TrashedEmployees",props:["office","canCreate","canEdit","canDelete"],setup(K){const B=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"type",label:"Employment Type",align:"left",field:"type",sortable:!0},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!0},{name:"post_assigned",label:"Post/Work Assigned",align:"left",field:"post_assigned",sortable:!0},{name:"office",label:"Office",align:"left",field:"office",sortable:!0},{name:"reason",label:"Reason",align:"left",field:"reason",sortable:!1},{name:"year",label:"Year",align:"left",field:"year",sortable:!1},{name:"actions",label:"Actions",align:"center"}],i=p({office:null,reason:null}),f=p(""),m=z(),Q=p([]),_=p(!1),n=p({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),E=()=>{i.value.search=f.value,g({pagination:n.value,filter:i.value,search:i.value.search})};function g(l){const{page:t,rowsPerPage:e,sortBy:s,descending:X}=l.pagination,R=l.filter,T=l.search;_.value=!0,axios.get(route("employees.json-index-trashed"),{params:{filter:R,page:t,rowsPerPage:e,search:T}}).then(c=>{console.log(c.data);const{list:y}=c.data,{data:b,per_page:$,current_page:V,total:q,to:Z,from:ee}=y;Q.value=b,n.value.page=V,n.value.rowsNumber=q,n.value.rowsPerPage=$}).catch(c=>{var y,b;m.notify({type:"negative",message:(b=(y=c==null?void 0:c.response)==null?void 0:y.data)==null?void 0:b.message})}).finally(()=>_.value=!1)}D(()=>{g({pagination:n.value,filter:i.value,search:i.value.search})});const C=l=>{m.dialog({title:"Confirm Restore",message:`Are you sure you want to restore <b>${l.name}</b>?`,html:!0,cancel:!0,persistent:!0,ok:{label:"Yes, Restore",color:"positive"}}).onOk(async()=>{var t,e;try{await axios.put(route("employee.restore",l)),m.notify({type:"positive",message:`Employee ${l.name} restored successfully`}),g({pagination:n.value,filter:i.value,search:f.value})}catch(s){m.notify({type:"negative",message:((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to restore employee"})}})},P=()=>{window.history.back()};return(l,t)=>(w(),h(L,{class:"container",padding:""},{default:a(()=>[r("div",F,[r("div",null,[t[3]||(t[3]=r("div",{class:"stitle"},"Trashed Employee List",-1)),o(A,{class:"text-dark"},{default:a(()=>[o(k,{class:"cursor-pointer",onClick:t[0]||(t[0]=e=>l.$inertia.get(l.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),o(k,{class:"cursor-pointer",label:"Go Back",onClick:P})]),_:1})])]),t[4]||(t[4]=r("br",null,null,-1)),o(N,{flat:""},{default:a(()=>[o(U,{flat:"",ref:"tableRef",title:"List of Trashed Employees",rows:Q.value,columns:B,"row-key":"id",pagination:n.value,"onUpdate:pagination":t[2]||(t[2]=e=>n.value=e),loading:_.value,filter:i.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:g},{"top-right":a(()=>[o(O,{dense:"",outlined:"",debounce:"800",modelValue:f.value,"onUpdate:modelValue":[t[1]||(t[1]=e=>f.value=e),E],placeholder:"Search",class:"col-12 col-sm-auto",clearable:""},{append:a(()=>[o(x,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-employee":a(e=>[o(u,{props:e},{default:a(()=>[r("div",G,[o(I,null,{default:a(()=>[e.row.avatar?(w(),h(S,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(w(),h(x,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),r("div",null,[r("div",W,d(e.row.name),1),r("div",H,d(e.row.mobile),1),r("div",J,d(e.row.date_of_birth),1)])])]),_:2},1032,["props"])]),"body-cell-type":a(e=>[o(u,{props:e},{default:a(()=>[v(d(e.row.designation?"Provisional":"Muster Roll"),1)]),_:2},1032,["props"])]),"body-cell-office":a(e=>[o(u,{props:e},{default:a(()=>[o(M,{color:"primary","text-color":"white",dense:""},{default:a(()=>{var s;return[v(d((s=e.row.office)==null?void 0:s.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-reason":a(e=>[o(u,{props:e},{default:a(()=>{var s;return[v(d((s=e.row.deletion_detail)==null?void 0:s.reason),1)]}),_:2},1032,["props"])]),"body-cell-year":a(e=>[o(u,{props:e},{default:a(()=>{var s;return[v(d((s=e.row.deletion_detail)==null?void 0:s.year),1)]}),_:2},1032,["props"])]),"body-cell-actions":a(e=>[o(u,{props:e},{default:a(()=>[o(j,{dense:"",flat:"",round:"",color:"green",icon:"restore",onClick:s=>C(e.row),"aria-label":"Restore Employee"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading","filter"])]),_:1})]),_:1,__:[4]}))}});export{ge as default};
