import{Q as A,a as Q}from"./QBreadcrumbs-utQhg22X.js";import{Q as k,a as R}from"./QSelect-BjGScurK.js";import{r as c,a as j,f as y,o as w,g as a,i as t,k as l,q as x,v as V,Q as I,A as S,p as O,m as _,t as u,y as T}from"./app-CEt5iMel.js";import{a as L,Q as z}from"./QLayout-B-Smbf5A.js";import{Q as F,a as m}from"./QTable-CaO-wLSa.js";import{_ as M}from"./BackendLayout-C9wZt_la.js";import{u as Y}from"./use-quasar-Y1cCwcKz.js";/* empty css            */import"./QMarkupTable-iGwCQJ3h.js";import"./touch-Br3vYChC.js";const G={class:"flex items-center justify-between q-pa-md bg-white"},H={class:"q-pa-md"},J={class:"row q-col-gutter-md"},K={class:"flex items-center gap-3"},W={class:"text-body1"},X={class:"text-caption text-grey"},Z={class:"text-caption text-grey"},fe=Object.assign({layout:M},{__name:"DeletedEmployees",props:["office","canCreate","canEdit","canDelete"],setup(q){const B=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"office",label:"Office",align:"left",field:"office",sortable:!0},{name:"reason",label:"Reason",align:"left",field:"reason",sortable:!1},{name:"year",label:"Year",align:"left",field:"year",sortable:!1},{name:"actions",label:"Actions",align:"center"}],s=c({office:null,skill:null,search:null}),C=[{label:"Skilled",value:"skilled"},{label:"Unskilled",value:"unskilled"}];c("");const E=Y(),h=c([]),g=c(!1),r=c({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),b=()=>{v({pagination:r.value,filter:s.value,search:s.value.search})};function v(n){const{page:o,rowsPerPage:e,sortBy:i,descending:ee}=n.pagination,P=n.filter,D=n.search;g.value=!0,axios.get(route("employees.json-index-deleted"),{params:{filter:P,page:o,rowsPerPage:e,search:D}}).then(d=>{console.log(d.data);const{list:f}=d.data,{data:p,per_page:$,current_page:N,total:U,to:le,from:ae}=f;h.value=p,r.value.page=N,r.value.rowsNumber=U,r.value.rowsPerPage=$}).catch(d=>{var f,p;E.notify({type:"negative",message:(p=(f=d==null?void 0:d.response)==null?void 0:f.data)==null?void 0:p.message})}).finally(()=>g.value=!1)}return j(()=>{v({pagination:r.value,filter:s.value,search:s.value.search})}),(n,o)=>(w(),y(z,{class:"container",padding:""},{default:a(()=>[t("div",G,[t("div",null,[o[5]||(o[5]=t("div",{class:"stitle"},"Deleted Employee List",-1)),l(A,{class:"text-dark"},{default:a(()=>[l(Q,{onClick:o[0]||(o[0]=e=>n.$inertia.get(n.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),l(Q,{label:"All Employees",to:n.route("mis.import")},null,8,["to"])]),_:1})])]),o[7]||(o[7]=t("br",null,null,-1)),l(x,{flat:""},{default:a(()=>[l(V,null,{default:a(()=>[t("div",H,[l(x,{flat:"",bordered:"",class:"q-mt-md bg-white shadow-1"},{default:a(()=>[l(V,null,{default:a(()=>[o[6]||(o[6]=t("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Search Filter ",-1)),t("div",J,[l(k,{label:"Select Office",class:"col-12 col-sm-4",modelValue:s.value.office,"onUpdate:modelValue":[o[1]||(o[1]=e=>s.value.office=e),b],options:q.office,"option-label":"name","option-value":"id","emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),l(k,{label:"Select Skill",class:"col-12 col-sm-4",modelValue:s.value.skill,"onUpdate:modelValue":[o[2]||(o[2]=e=>s.value.skill=e),b],options:C,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"]),l(I,{dense:"",outlined:"",debounce:"300",modelValue:s.value.search,"onUpdate:modelValue":[o[3]||(o[3]=e=>s.value.search=e),b],placeholder:"Search",class:"col-12 col-sm-4"},{append:a(()=>[l(S,{name:"search"})]),_:1},8,["modelValue"])])]),_:1,__:[6]})]),_:1})])]),_:1}),l(F,{flat:"",ref:"tableRef",title:"List of Deleted Employees",rows:h.value,columns:B,"row-key":"id",pagination:r.value,"onUpdate:pagination":o[4]||(o[4]=e=>r.value=e),loading:g.value,filter:s.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:v},{"body-cell-employee":a(e=>[l(m,{props:e},{default:a(()=>[t("div",K,[l(T,null,{default:a(()=>[e.row.avatar?(w(),y(L,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(w(),y(S,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),t("div",null,[t("div",W,u(e.row.name),1),t("div",X,u(e.row.mobile),1),t("div",Z,u(e.row.date_of_birth),1)])])]),_:2},1032,["props"])]),"body-cell-office":a(e=>[l(m,{props:e},{default:a(()=>[l(R,{color:"primary","text-color":"white",dense:""},{default:a(()=>{var i;return[_(u((i=e.row.office)==null?void 0:i.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-reason":a(e=>[l(m,{props:e},{default:a(()=>{var i;return[_(u((i=e.row.deletion_detail)==null?void 0:i.reason),1)]}),_:2},1032,["props"])]),"body-cell-year":a(e=>[l(m,{props:e},{default:a(()=>{var i;return[_(u((i=e.row.deletion_detail)==null?void 0:i.year),1)]}),_:2},1032,["props"])]),"body-cell-actions":a(e=>[l(m,{props:e},{default:a(()=>[l(O,{dense:"",flat:"",round:"",color:"primary",icon:"visibility",onClick:i=>n.$inertia.get(n.route("employee.show",e.row.id)),"aria-label":"Show user"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading","filter"])]),_:1})]),_:1,__:[7]}))}});export{fe as default};
