import{Q as A,a as h}from"./QBreadcrumbs-P5zsoP74.js";import{Q as k,a as D}from"./QSelect-DXKfjEK2.js";import{r as d,a as j,f as b,o as y,g as o,i as t,k as l,q as Q,v as x,Q as I,A as V,p as O,m as R,t as f,y as T}from"./app-CoCq3EAc.js";import{a as L,Q as z}from"./QLayout-BiF61EvA.js";import{Q as F,a as w}from"./QTable-Dyx3PxH3.js";import{_ as M}from"./BackendLayout-DYx2X2lj.js";import{u as W}from"./use-quasar-B0jnBUML.js";/* empty css            */import"./QMarkupTable-BDZojQsz.js";import"./touch-CPpqwrxO.js";const G={class:"flex items-center justify-between q-pa-md bg-white"},H={class:"q-pa-md"},J={class:"row q-col-gutter-md"},K={class:"flex items-center gap-3"},X={class:"text-body1"},Y={class:"text-caption text-grey"},Z={class:"text-caption text-grey"},fe=Object.assign({layout:M},{__name:"PeEmployees",props:["office","canCreate","canEdit","canDelete"],setup(S){const P=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!1},{name:"name_of_workplace",label:"Workplace",align:"left",field:"name_of_workplace",sortable:!1},{name:"office",label:"Office",align:"left",field:"office",sortable:!0},{name:"actions",label:"Actions",align:"center"}],s=d({office:null,skill:null,search:null}),q=[{label:"Skilled",value:"skilled"},{label:"Unskilled",value:"unskilled"}];d("");const B=W(),_=d([]),p=d(!1),n=d({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),g=()=>{v({pagination:n.value,filter:s.value,search:s.value.search})};function v(i){const{page:a,rowsPerPage:e,sortBy:u,descending:ee}=i.pagination,C=i.filter,E=i.search;p.value=!0,axios.get(route("employees.json-index-pe"),{params:{filter:C,page:a,rowsPerPage:e,search:E}}).then(r=>{console.log(r.data);const{list:c}=r.data,{data:m,per_page:$,current_page:N,total:U,to:ae,from:le}=c;_.value=m,n.value.page=N,n.value.rowsNumber=U,n.value.rowsPerPage=$}).catch(r=>{var c,m;B.notify({type:"negative",message:(m=(c=r==null?void 0:r.response)==null?void 0:c.data)==null?void 0:m.message})}).finally(()=>p.value=!1)}return j(()=>{v({pagination:n.value,filter:s.value,search:s.value.search})}),(i,a)=>(y(),b(z,{class:"container",padding:""},{default:o(()=>[t("div",G,[t("div",null,[a[5]||(a[5]=t("div",{class:"stitle"},"Provisional Employee List",-1)),l(A,{class:"text-dark"},{default:o(()=>[l(h,{onClick:a[0]||(a[0]=e=>i.$inertia.get(i.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),l(h,{label:"All Employees",to:i.route("mis.import")},null,8,["to"])]),_:1})])]),a[7]||(a[7]=t("br",null,null,-1)),l(Q,{flat:"",bordered:""},{default:o(()=>[l(x,null,{default:o(()=>[t("div",H,[l(Q,{flat:"",bordered:"",class:"q-mt-md bg-white shadow-1"},{default:o(()=>[l(x,null,{default:o(()=>[a[6]||(a[6]=t("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Search Filter ",-1)),t("div",J,[l(k,{label:"Select Office",class:"col-12 col-sm-4",modelValue:s.value.office,"onUpdate:modelValue":[a[1]||(a[1]=e=>s.value.office=e),g],options:S.office,"option-label":"name","option-value":"id","emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),l(k,{label:"Select Skill",class:"col-12 col-sm-4",modelValue:s.value.skill,"onUpdate:modelValue":[a[2]||(a[2]=e=>s.value.skill=e),g],options:q,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"]),l(I,{dense:"",outlined:"",debounce:"300",modelValue:s.value.search,"onUpdate:modelValue":[a[3]||(a[3]=e=>s.value.search=e),g],placeholder:"Search",class:"col-12 col-sm-4"},{append:o(()=>[l(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1,__:[6]})]),_:1})])]),_:1}),l(F,{flat:"",ref:"tableRef",title:"List of Provisional Employees",rows:_.value,columns:P,"row-key":"id",pagination:n.value,"onUpdate:pagination":a[4]||(a[4]=e=>n.value=e),loading:p.value,filter:s.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:v},{"body-cell-employee":o(e=>[l(w,{props:e},{default:o(()=>[t("div",K,[l(T,null,{default:o(()=>[e.row.avatar?(y(),b(L,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(y(),b(V,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),t("div",null,[t("div",X,f(e.row.name),1),t("div",Y,f(e.row.mobile),1),t("div",Z,f(e.row.date_of_birth),1)])])]),_:2},1032,["props"])]),"body-cell-office":o(e=>[l(w,{props:e},{default:o(()=>[l(D,{color:"primary","text-color":"white",dense:""},{default:o(()=>{var u;return[R(f((u=e.row.office)==null?void 0:u.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-actions":o(e=>[l(w,{props:e},{default:o(()=>[l(O,{dense:"",flat:"",round:"",color:"primary",icon:"visibility",onClick:u=>i.$inertia.get(i.route("employee.show",e.row.id)),"aria-label":"Show user"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading","filter"])]),_:1})]),_:1,__:[7]}))}});export{fe as default};
