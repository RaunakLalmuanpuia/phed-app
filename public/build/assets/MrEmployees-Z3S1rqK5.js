import{a as V,Q as _}from"./QSelect-C7qlWUwL.js";import{Q as A,a as q}from"./QBreadcrumbs-B01kuZk7.js";import{r as d,i as I,c as b,o as u,w as t,b as s,f as a,B as S,d as M,F as D,n as F,m as k,p as O,q as x,l as T,Q as z,z as B,t as v,v as L}from"./app-C0Prpwuj.js";import{a as W,Q as G}from"./QLayout-CCFN6Yoj.js";import{Q}from"./QTd-CGzKhJnO.js";import{Q as H}from"./QTable-D-GKtUWN.js";import{_ as J}from"./BackendLayout-C_gidwE2.js";import{u as K}from"./use-quasar-DiainN62.js";/* empty css            */import"./touch-CQT328lm.js";const X={class:"flex items-center justify-between q-pa-md bg-white"},Y={class:"stitle"},Z={class:"q-gutter-sm"},ee={class:"row q-col-gutter-md"},le={class:"row q-gutter-sm col-12 col-sm justify-end"},ae={class:"flex items-center gap-3"},te={class:"text-body1"},oe={class:"text-caption text-grey"},se={class:"text-caption text-grey"},we=Object.assign({layout:J},{__name:"MrEmployees",props:["offices","skills","educationQln"],setup(m){const E=m,P=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!1},{name:"name_of_workplace",label:"Workplace",align:"left",field:"name_of_workplace",sortable:!1},{name:"office",label:"Office",align:"left",field:"office",sortable:!1},{name:"skill_at_present",label:"Skill At Present",align:"left",field:"skill_at_present",sortable:!0},{name:"date_of_engagement",label:"Initial Engagement",align:"left",field:"date_of_engagement",sortable:!0},{name:"actions",label:"Actions",align:"center"}],o=d({office:[],search:null,skill:null,education_qln:null});d("");const C=K(),h=d([]),y=d(!1),i=d({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),c=()=>{w({pagination:i.value,filter:o.value,search:o.value.search})};function w(n){const{page:l,rowsPerPage:e,sortBy:f,descending:ne}=n.pagination,$=n.filter,j=n.search;y.value=!0,axios.get(route("employees.json-manager-mr"),{params:{filter:$,page:l,rowsPerPage:e,search:j}}).then(r=>{console.log(r.data);const{list:p}=r.data,{data:g,per_page:N,current_page:R,total:U,to:ie,from:re}=p;h.value=g,i.value.page=R,i.value.rowsNumber=U,i.value.rowsPerPage=N}).catch(r=>{var p,g;C.notify({type:"negative",message:(g=(p=r==null?void 0:r.response)==null?void 0:p.data)==null?void 0:g.message})}).finally(()=>y.value=!1)}return I(()=>{w({pagination:i.value,filter:o.value,search:o.value.search})}),(n,l)=>(u(),b(G,{class:"container",padding:""},{default:t(()=>[s("div",X,[s("div",null,[s("div",Y,[l[7]||(l[7]=S("Muster Roll Employee List: ")),(u(!0),M(D,null,F(m.offices,e=>(u(),b(V,{square:"",key:e.value,label:e.label},null,8,["label"]))),128))]),a(A,{class:"text-dark"},{default:t(()=>[a(q,{onClick:l[0]||(l[0]=e=>n.$inertia.get(n.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),a(q,{label:"All Employees",to:n.route("mis.import")},null,8,["to"])]),_:1})]),s("div",Z,[a(k,{label:"MR Summary",color:"primary",onClick:l[1]||(l[1]=e=>n.$inertia.get(n.route("summary.mr")))})])]),l[9]||(l[9]=s("br",null,null,-1)),a(O,{flat:""},{default:t(()=>[a(x,null,{default:t(()=>[l[8]||(l[8]=s("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Search Filter ",-1)),s("div",ee,[a(_,{label:"Select Office",class:"col-12 col-sm-4",modelValue:o.value.office,"onUpdate:modelValue":[l[2]||(l[2]=e=>o.value.office=e),c],options:E.offices,"option-label":"label","option-value":"value","emit-value":"","map-options":"",multiple:"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),a(_,{label:"Select Present Skill",class:"col-12 col-sm-4",modelValue:o.value.skill,"onUpdate:modelValue":[l[3]||(l[3]=e=>o.value.skill=e),c],options:m.skills,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),a(_,{label:"Select Education Qln.",class:"col-12 col-sm-4",modelValue:o.value.education_qln,"onUpdate:modelValue":[l[4]||(l[4]=e=>o.value.education_qln=e),c],options:m.educationQln,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])])]),_:1,__:[8]}),a(T),a(x,{class:"row items-center justify-between q-gutter-md"},{default:t(()=>[s("div",le,[a(k,{label:"Export",icon:"desktop_windows",color:"primary",disabled:""}),a(z,{dense:"",outlined:"",debounce:"300",modelValue:o.value.search,"onUpdate:modelValue":[l[5]||(l[5]=e=>o.value.search=e),c],placeholder:"Search",class:"col-12 col-sm-auto",clearable:""},{append:t(()=>[a(B,{name:"search"})]),_:1},8,["modelValue"])])]),_:1}),a(H,{flat:"",ref:"tableRef",rows:h.value,columns:P,"row-key":"id",pagination:i.value,"onUpdate:pagination":l[6]||(l[6]=e=>i.value=e),loading:y.value,filter:o.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:w},{"body-cell-employee":t(e=>[a(Q,{props:e},{default:t(()=>[s("div",ae,[a(L,null,{default:t(()=>[e.row.avatar?(u(),b(W,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(u(),b(B,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),s("div",null,[s("div",te,v(e.row.name),1),s("div",oe,v(e.row.mobile),1),s("div",se,v(e.row.date_of_birth),1)])])]),_:2},1032,["props"])]),"body-cell-office":t(e=>[a(Q,{props:e},{default:t(()=>[a(V,{color:"primary","text-color":"white",dense:""},{default:t(()=>{var f;return[S(v((f=e.row.office)==null?void 0:f.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-actions":t(e=>[a(Q,{props:e},{default:t(()=>[a(k,{dense:"",flat:"",round:"",color:"primary",icon:"visibility",onClick:f=>n.$inertia.get(n.route("employee.show",e.row.id)),"aria-label":"Show user"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading","filter"])]),_:1})]),_:1,__:[9]}))}});export{we as default};
