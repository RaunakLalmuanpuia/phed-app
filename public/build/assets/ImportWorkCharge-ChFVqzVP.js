import{Q as v,a as u}from"./QBreadcrumbs-DAsfmFFA.js";import{Q as w}from"./QSelect-BKe12W5w.js";import{Q as k}from"./QFile-hUMPiila.js";import{r as Q,d as p,o as f,w as s,e as o,i as t,y as g,z as n,p as h,g as _,q as C}from"./app-2dNRWNI7.js";import{Q as q}from"./QLayout-DpkKOakt.js";import{_ as x}from"./BackendLayout-jNWs8K56.js";import{u as I}from"./use-quasar-6vixxITa.js";import"./format-D6IW5YOk.js";import"./touch-Brtkly4s.js";import"./QSlideTransition-B01RVl1y.js";const V={class:"flex items-center justify-between q-pa-md bg-white"},B={class:"q-pa-md"},D={class:"row q-col-gutter-md"},S={class:"row q-gutter-sm col-12 col-sm justify-end"},A=Object.assign({layout:x},{__name:"ImportWorkCharge",props:["office","canImport"],setup(m){const i=I(),l=Q({office:null,document:null}),y=()=>{i.dialog({title:"Confirm Import",message:"Are you sure you want to import the data?",cancel:!0,persistent:!0}).onOk(()=>{const r=new FormData;r.append("office",l.value.office),r.append("document",l.value.document),axios.post(route("mis.import-work-charge-employee"),r,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{i.notify({type:"positive",message:"Data Successfully Imported"})}).catch(e=>{if(e.response){const a=e.response.data.errors,d=[];if(a){for(const c in a)a[c]&&d.push(...a[c]);i.notify({type:"negative",message:d})}else e.response.data.message&&i.notify({type:"negative",message:e.response.data.message})}else i.notify({type:"negative",message:"System Error. Please try again later."})})})},b=()=>{window.history.back()};return(r,e)=>(f(),p(q,{class:"container",padding:""},{default:s(()=>[o("div",V,[o("div",null,[e[3]||(e[3]=o("div",{class:"stitle"},"Import Work Charge Data",-1)),t(v,{class:"text-dark"},{default:s(()=>[t(u,{class:"cursor-pointer",onClick:e[0]||(e[0]=a=>r.$inertia.get(r.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),t(u,{class:"cursor-pointer",label:"Go Back",onClick:b})]),_:1})])]),e[5]||(e[5]=o("br",null,null,-1)),t(g,{flat:""},{default:s(()=>[t(n,null,{default:s(()=>[o("div",B,[t(g,{flat:"",class:"q-mt-md bg-white shadow-1"},{default:s(()=>[t(n,null,{default:s(()=>[e[4]||(e[4]=o("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Import Filter ",-1)),o("div",D,[t(w,{label:"Select Office",class:"col-12 col-sm-4",modelValue:l.value.office,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.office=a),options:m.office,"option-label":"name","option-value":"id","emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),t(k,{label:"Upload Document",class:"col-12 col-sm-4",modelValue:l.value.document,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.document=a),accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",outlined:"",dense:"",clearable:"","use-chips":"",counter:!1},null,8,["modelValue"])])]),_:1,__:[4]}),t(h),t(n,{class:"row items-center justify-between q-gutter-md"},{default:s(()=>[o("div",S,[m.canImport?(f(),p(C,{key:0,label:"Import Data",icon:"add",color:"primary",onClick:y})):_("",!0)])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1,__:[5]}))}});export{A as default};
