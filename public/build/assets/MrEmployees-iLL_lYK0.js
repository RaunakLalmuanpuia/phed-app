import{a as S,Q as k}from"./QSelect-BZa9mMoO.js";import{Q as I,a as x}from"./QBreadcrumbs-BqovQUvq.js";import{r as u,i as M,c as v,o as d,w as t,b as s,f as a,B as Q,d as F,F as O,n as T,m as h,p as z,q as B,l as L,Q as W,z as E,t as m,u as P,v as G}from"./app-C2dex-nA.js";import{a as H,Q as J}from"./QLayout-DfDNxEFp.js";import{Q as y}from"./QTd-BDG46jDw.js";import{Q as K}from"./QTable-CKa4PAwo.js";import{_ as X}from"./BackendLayout-61FwaHAo.js";import{u as Y}from"./use-quasar-25QNHLYa.js";import{u as Z}from"./useUtils-CCSkXXzh.js";import"./touch-C2QLkE3y.js";import"./date-BYqxjEjy.js";const ee={class:"flex items-center justify-between q-pa-md bg-white"},le={class:"stitle"},ae={class:"q-gutter-sm"},te={class:"row q-col-gutter-md"},oe={class:"row q-gutter-sm col-12 col-sm justify-end"},se={class:"flex items-center gap-3"},ne={class:"text-body1"},ie={class:"text-caption text-grey"},re={class:"text-caption text-grey"},he=Object.assign({layout:X},{__name:"MrEmployees",props:["offices","skills","educationQln"],setup(c){const{formatDate:V}=Z(),C=c,$=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!1},{name:"name_of_workplace",label:"Workplace",align:"left",field:"name_of_workplace",sortable:!1},{name:"office",label:"Office",align:"left",field:"office",sortable:!1},{name:"skill_at_present",label:"Skill At Present",align:"left",field:"skill_at_present",sortable:!0},{name:"date_of_engagement",label:"Initial Engagement",align:"left",field:"date_of_engagement",sortable:!0},{name:"actions",label:"Actions",align:"center"}],o=u({office:[],search:null,skill:null,education_qln:null});u("");const U=Y(),q=u([]),_=u(!1),i=u({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),f=()=>{w({pagination:i.value,filter:o.value,search:o.value.search})};function w(n){const{page:l,rowsPerPage:e,sortBy:p,descending:ue}=n.pagination,j=n.filter,N=n.search;_.value=!0,axios.get(route("employees.json-manager-mr"),{params:{filter:j,page:l,rowsPerPage:e,search:N}}).then(r=>{console.log(r.data);const{list:g}=r.data,{data:b,per_page:R,current_page:A,total:D,to:de,from:me}=g;q.value=b,i.value.page=A,i.value.rowsNumber=D,i.value.rowsPerPage=R}).catch(r=>{var g,b;U.notify({type:"negative",message:(b=(g=r==null?void 0:r.response)==null?void 0:g.data)==null?void 0:b.message})}).finally(()=>_.value=!1)}return M(()=>{w({pagination:i.value,filter:o.value,search:o.value.search})}),(n,l)=>(d(),v(J,{class:"container",padding:""},{default:t(()=>[s("div",ee,[s("div",null,[s("div",le,[l[7]||(l[7]=Q("Muster Roll Employee List: ")),(d(!0),F(O,null,T(c.offices,e=>(d(),v(S,{square:"",key:e.value,label:e.label},null,8,["label"]))),128))]),a(I,{class:"text-dark"},{default:t(()=>[a(x,{onClick:l[0]||(l[0]=e=>n.$inertia.get(n.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),a(x,{label:"All Employees",to:n.route("mis.import")},null,8,["to"])]),_:1})]),s("div",ae,[a(h,{label:"MR Summary",color:"primary",onClick:l[1]||(l[1]=e=>n.$inertia.get(n.route("summary.mr")))})])]),l[9]||(l[9]=s("br",null,null,-1)),a(z,{flat:""},{default:t(()=>[a(B,null,{default:t(()=>[l[8]||(l[8]=s("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Search Filter ",-1)),s("div",te,[a(k,{label:"Select Office",class:"col-12 col-sm-4",modelValue:o.value.office,"onUpdate:modelValue":[l[2]||(l[2]=e=>o.value.office=e),f],options:C.offices,"option-label":"label","option-value":"value","emit-value":"","map-options":"",multiple:"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),a(k,{label:"Select Present Skill",class:"col-12 col-sm-4",modelValue:o.value.skill,"onUpdate:modelValue":[l[3]||(l[3]=e=>o.value.skill=e),f],options:c.skills,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),a(k,{label:"Select Education Qln.",class:"col-12 col-sm-4",modelValue:o.value.education_qln,"onUpdate:modelValue":[l[4]||(l[4]=e=>o.value.education_qln=e),f],options:c.educationQln,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"])])]),_:1,__:[8]}),a(L),a(B,{class:"row items-center justify-between q-gutter-md"},{default:t(()=>[s("div",oe,[a(h,{label:"Export",icon:"desktop_windows",color:"primary",disabled:""}),a(W,{dense:"",outlined:"",debounce:"300",modelValue:o.value.search,"onUpdate:modelValue":[l[5]||(l[5]=e=>o.value.search=e),f],placeholder:"Search",class:"col-12 col-sm-auto",clearable:""},{append:t(()=>[a(E,{name:"search"})]),_:1},8,["modelValue"])])]),_:1}),a(K,{flat:"",ref:"tableRef",rows:q.value,columns:$,"row-key":"id",pagination:i.value,"onUpdate:pagination":l[6]||(l[6]=e=>i.value=e),loading:_.value,filter:o.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:w},{"body-cell-employee":t(e=>[a(y,{props:e},{default:t(()=>[s("div",se,[a(G,null,{default:t(()=>[e.row.avatar?(d(),v(H,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(d(),v(E,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),s("div",null,[s("div",ne,m(e.row.name),1),s("div",ie,m(e.row.mobile),1),s("div",re,m(P(V)(e.row.date_of_birth)),1)])])]),_:2},1032,["props"])]),"body-cell-office":t(e=>[a(y,{props:e},{default:t(()=>[a(S,{color:"primary","text-color":"white",dense:""},{default:t(()=>{var p;return[Q(m((p=e.row.office)==null?void 0:p.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-date_of_engagement":t(e=>[a(y,{props:e},{default:t(()=>[Q(m(P(V)(e.row.date_of_engagement)),1)]),_:2},1032,["props"])]),"body-cell-actions":t(e=>[a(y,{props:e},{default:t(()=>[a(h,{dense:"",flat:"",round:"",color:"primary",icon:"visibility",onClick:p=>n.$inertia.get(n.route("employee.show",e.row.id)),"aria-label":"Show user"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading","filter"])]),_:1})]),_:1,__:[9]}))}});export{he as default};
