import{Q as S,a as C}from"./QBreadcrumbs-_QA2_IGD.js";import{r as g,i as h,c as _,o as p,w as t,b as r,f as a,m as B,B as v,d as R,F as j,n as A,Q as F,z as M,W as T}from"./app-BpyBzFIp.js";import{a as x}from"./QSelect-DfpK_BkB.js";import{Q as L,a as $}from"./QTable-BXR3-8Vf.js";import{_ as O,i as W,a as w,b as k}from"./BackendLayout-DNSomVJN.js";import{Q as z}from"./QLayout-DL_NyIeY.js";import{u as Y}from"./use-quasar-mpcXEfnN.js";import"./use-fullscreen-CAo4_rm2.js";import"./touch-B5nOvKoK.js";const G={class:"flex items-center justify-between q-pa-md bg-white"},H={class:"flex q-gutter-sm"},ie=Object.assign({layout:O},{__name:"Index",props:["canCreate","canEdit","canDelete"],setup(D){const N=[{name:"name",align:"left",label:"Name",field:"name",sortable:!1},{name:"designation",align:"left",label:"Designation",field:"designation",sortable:!1},{name:"mobile",align:"left",label:"Mobile",field:"mobile",sortable:!0},{name:"email",align:"left",label:"Email",field:"email",sortable:!0},{name:"role",align:"left",label:"Role",field:"role",sortable:!0},{name:"action",align:"left",label:"Action",field:"action",sortable:!0}],u=Y(),Q=g([]),d=g(""),b=g(!1),n=g({sortBy:"desc",descending:!1,page:1,rowsPerPage:15,rowsNumber:0}),P=l=>{u.dialog({title:"Confirmation",message:"Do you want to delete?",ok:"Yes",cancel:"No"}).onOk(()=>{T.delete(route("user.destroy",l.id),{onStart:e=>u.loading.show(),onFinish:e=>u.loading.hide(),preserveState:!1})})},V=l=>{c({pagination:n.value,filter:l})};function c(l){const{page:e,rowsPerPage:o,sortBy:s,descending:y}=l.pagination,q=l.filter;b.value=!0,axios.get(route("user.json-index"),{params:{filter:q,page:e,rowsPerPage:o}}).then(i=>{console.log(i.data);const{list:m}=i.data,{data:f,per_page:U,current_page:E,total:I,to:J,from:K}=m;Q.value=f,n.value.page=E,n.value.rowsNumber=I,n.value.rowsPerPage=U}).catch(i=>{var m,f;u.notify({type:"negative",message:(f=(m=i==null?void 0:i.response)==null?void 0:m.data)==null?void 0:f.message})}).finally(()=>b.value=!1)}return h(()=>{c({pagination:n.value,filter:d.value})}),(l,e)=>(p(),_(z,{class:"container",padding:""},{default:t(()=>[r("div",G,[r("div",null,[e[4]||(e[4]=r("div",{class:"stitle"},"User Accounts",-1)),a(S,{class:"text-dark"},{default:t(()=>[a(C,{onClick:e[0]||(e[0]=o=>l.$inertia.get(l.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),a(C,{label:"User Accounts",to:l.route("user.index")},null,8,["to"])]),_:1})]),r("div",H,[a(B,{onClick:e[1]||(e[1]=o=>l.$inertia.get(l.route("user.create"))),color:"btn-primary",label:"New User"})])]),e[8]||(e[8]=r("br",null,null,-1)),a(L,{flat:"",ref:"tableRef",title:"List of User",rows:Q.value,columns:N,"row-key":"id",pagination:n.value,"onUpdate:pagination":e[3]||(e[3]=o=>n.value=o),loading:b.value,filter:d.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:c},{"top-right":t(()=>[a(F,{borderless:"",dense:"",debounce:"800","onUpdate:modelValue":[V,e[2]||(e[2]=o=>d.value=o)],"bg-color":"grey-2",outlined:"",modelValue:d.value,placeholder:"Search"},{append:t(()=>[a(M,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-role":t(o=>[a($,null,{default:t(()=>{var s;return[(p(!0),R(j,null,A((s=o.row)==null?void 0:s.roles,y=>(p(),_(x,{label:y.name,square:""},null,8,["label"]))),256))]}),_:2},1024)]),"body-cell-action":t(o=>[a($,null,{default:t(()=>[a(B,{round:"",icon:"more_vert"},{default:t(()=>[a(W,null,{default:t(()=>[a(w,{clickable:"",onClick:s=>l.$inertia.get(l.route("user.show",o.row.id))},{default:t(()=>[a(k,null,{default:t(()=>e[5]||(e[5]=[v("View Detail")])),_:1,__:[5]})]),_:2},1032,["onClick"]),a(w,{clickable:"",onClick:s=>l.$inertia.get(l.route("user.edit",o.row.id))},{default:t(()=>[a(k,null,{default:t(()=>e[6]||(e[6]=[v("Edit")])),_:1,__:[6]})]),_:2},1032,["onClick"]),a(w,{onClick:s=>P(o.row),disable:!D.canDelete},{default:t(()=>[a(k,null,{default:t(()=>e[7]||(e[7]=[v("Delete")])),_:1,__:[7]})]),_:2},1032,["onClick","disable"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","pagination","loading","filter"])]),_:1,__:[8]}))}});export{ie as default};
