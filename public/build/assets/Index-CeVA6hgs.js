import{Q as O,a as k}from"./QBreadcrumbs-C-SfAYRs.js";import{r as m,a as q,i as I,o as S,j as o,f as s,g as t,m as Q,B as b,Q as j,z as T,W as h}from"./app-DFzdqFeF.js";import{_ as E,i as R,a as v,c as w}from"./BackendLayout-iW6Wx3_Y.js";import{Q as x,a as L}from"./QTable-DyyvSLcV.js";import{Q as M}from"./QLayout-BPY5-vY_.js";import{u as U}from"./use-quasar-DcXurzQr.js";import"./touch-yuHTg2TQ.js";import"./use-fullscreen-C9ydLhW8.js";import"./QSelect-ioEONwWt.js";const W={class:"flex items-center justify-between q-pa-md bg-white"},z={class:"flex q-gutter-sm"},oe=Object.assign({layout:E},{__name:"Index",props:["canCreate","canEdit","canDelete"],setup(C){const _=[{name:"name",align:"left",label:"Name",field:"name",sortable:!1},{name:"type",align:"left",label:"Type",field:"type",sortable:!1},{name:"location",align:"left",label:"Location",field:"location",sortable:!1},{name:"action",align:"left",label:"Action",field:"action",sortable:!1}],r=U(),y=m([]),d=m(""),c=m(!1),n=m({sortBy:"desc",descending:!1,page:1,rowsPerPage:15,rowsNumber:0}),$=a=>{r.dialog({title:"Confirmation",message:"Do you want to delete?",ok:"Yes",cancel:"No"}).onOk(()=>{h.delete(route("office.destroy",a.id),{onStart:e=>r.loading.show(),onFinish:e=>r.loading.hide(),preserveState:!1})})},B=a=>{g({pagination:n.value,filter:a})};function g(a){const{page:e,rowsPerPage:l,sortBy:p,descending:A}=a.pagination,N=a.filter;c.value=!0,axios.get(route("office.json-index"),{params:{filter:N,page:e,rowsPerPage:l}}).then(i=>{console.log(i.data);const{list:f}=i.data,{data:u,per_page:D,current_page:P,total:V,to:F,from:Y}=f;y.value=u,n.value.page=P,n.value.rowsNumber=V,n.value.rowsPerPage=D}).catch(i=>{var f,u;r.notify({type:"negative",message:(u=(f=i==null?void 0:i.response)==null?void 0:f.data)==null?void 0:u.message})}).finally(()=>c.value=!1)}return q(()=>{g({pagination:n.value,filter:d.value})}),(a,e)=>(S(),I(M,{class:"container",padding:""},{default:o(()=>[s("div",W,[s("div",null,[e[4]||(e[4]=s("div",{class:"stitle"},"Offices",-1)),t(O,{class:"text-dark"},{default:o(()=>[t(k,{onClick:e[0]||(e[0]=l=>a.$inertia.get(a.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),t(k,{label:"Offices",to:a.route("office.index")},null,8,["to"])]),_:1})]),s("div",z,[t(Q,{onClick:e[1]||(e[1]=l=>a.$inertia.get(a.route("office.create"))),color:"btn-primary",label:"New Office"})])]),e[8]||(e[8]=s("br",null,null,-1)),t(x,{flat:"",ref:"tableRef",title:"List of Offices",rows:y.value,columns:_,"row-key":"id",pagination:n.value,"onUpdate:pagination":e[3]||(e[3]=l=>n.value=l),loading:c.value,filter:d.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:g},{"top-right":o(()=>[t(j,{borderless:"",dense:"",debounce:"800","onUpdate:modelValue":[B,e[2]||(e[2]=l=>d.value=l)],"bg-color":"grey-2",outlined:"",modelValue:d.value,placeholder:"Search"},{append:o(()=>[t(T,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-action":o(l=>[t(L,null,{default:o(()=>[t(Q,{round:"",icon:"more_vert"},{default:o(()=>[t(R,null,{default:o(()=>[t(v,{clickable:"",onClick:p=>a.$inertia.get(a.route("office.show",l.row.id))},{default:o(()=>[t(w,null,{default:o(()=>e[5]||(e[5]=[b("View Detail")])),_:1,__:[5]})]),_:2},1032,["onClick"]),t(v,{clickable:"",onClick:p=>a.$inertia.get(a.route("office.edit",l.row.id))},{default:o(()=>[t(w,null,{default:o(()=>e[6]||(e[6]=[b("Edit")])),_:1,__:[6]})]),_:2},1032,["onClick"]),t(v,{onClick:p=>$(l.row),disable:!C.canDelete},{default:o(()=>[t(w,null,{default:o(()=>e[7]||(e[7]=[b("Delete")])),_:1,__:[7]})]),_:2},1032,["onClick","disable"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","pagination","loading","filter"])]),_:1,__:[8]}))}});export{oe as default};
