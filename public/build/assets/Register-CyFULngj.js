import{a as $,x as N,d as T,o as b,w as v,e as a,f as V,g as I,i as t,q as _,Q as p,u as r,D as R}from"./app-CxIGlgoN.js";import{Q as U}from"./QForm-BpBEaAXE.js";import{a as h,Q as j}from"./QLayout-BJpBftJ5.js";import{F as z}from"./FrontendLayout-Ccpi6vKm.js";import{u as M}from"./use-quasar-d0OyBYEt.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"bg-white q-mt-xl"},L={class:"row"},Y={class:"col-xs-12 col-sm-6"},A={key:0,class:"column q-gutter-sm"},H={key:1,class:"column q-gutter-xs register-card justify-center items-center"},J={key:0},K={class:"flex"},W={class:"flex q-mt-sm"},X={key:0,class:"col-xs-12 col-sm-6"},Z=Object.assign({layout:z},{__name:"Register",setup(ee){const f=M(),i=$({sentOtp:!1,visiblePassword:!1}),o=N({name:"",mobile:"",email:"",password:"",password_confirmation:""}),n=N({mobile_otp:"",email_otp:""}),B=g=>{n.transform(e=>({...e,...o.data()})).post(route("register.confirm-otp"),{onStart:e=>f.loading.show({boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary",message:" Confirming..."}),onSuccess:e=>{i.sentOtp=!1},onFinish:e=>f.loading.hide()})},F=g=>{f.loading.show({boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary",message:" Sending OTP..."}),axios.post(route("register.send-otp"),o.data()).then(e=>{e.data.status&&(i.sentOtp=!0),o.setError({})}).catch(e=>{var w,m,d,u;i.sentOtp=!1,(m=(w=e==null?void 0:e.response)==null?void 0:w.data)!=null&&m.errors&&o.setError(e.response.data.errors),f.notify({type:"negative",message:((u=(d=e==null?void 0:e.response)==null?void 0:d.data)==null?void 0:u.message)||e.toString()})}).finally(()=>f.loading.hide())};return(g,e)=>(b(),T(j,{class:"container"},{default:v(()=>{var w;return[a("div",G,[a("div",L,[a("div",Y,[(w=g.$page.props.auth)!=null&&w.user?(b(),V("div",A,[e[9]||(e[9]=a("p",{class:"text-dark"},"You are logged in",-1)),t(_,{onClick:e[0]||(e[0]=m=>g.$inertia.get(g.route("dashboard"))),flat:"",label:"Go to dashboard"})])):(b(),V("div",H,[i.sentOtp?(b(),V("div",J,[t(U,{onSubmit:B,class:"column"},{default:v(()=>{var m,d,u,c,y,x;return[e[10]||(e[10]=a("p",{class:"login-title text-left"},"OTP",-1)),t(p,{label:"Mobile OTP",modelValue:r(n).mobile_otp,"onUpdate:modelValue":e[1]||(e[1]=l=>r(n).mobile_otp=l),outlined:"",dense:"",mask:"####","no-error-icon":"",error:!!((m=r(n).errors)!=null&&m.mobile_otp),"error-message":(u=(d=r(n).errors)==null?void 0:d.mobile_otp)==null?void 0:u.toString(),rules:[l=>!!l||"Mobile OTP is required"]},null,8,["modelValue","error","error-message","rules"]),e[11]||(e[11]=a("div",{class:"text-primary text-bold cursor-pointer q-mb-lg text-left"},"Resend OTP",-1)),t(p,{label:"Email OTP",modelValue:r(n).email_otp,"onUpdate:modelValue":e[2]||(e[2]=l=>r(n).email_otp=l),outlined:"",dense:"",mask:"####","no-error-icon":"",error:!!((c=r(n).errors)!=null&&c.email_otp),"error-message":(x=(y=r(n).errors)==null?void 0:y.email_otp)==null?void 0:x.toString(),rules:[l=>!!l||"Email OTP is required"]},null,8,["modelValue","error","error-message","rules"]),e[12]||(e[12]=a("div",{class:"text-primary text-bold cursor-pointer q-mb-lg text-left"},"Resend Email OTP",-1)),a("div",K,[t(_,{class:"sized-btn",color:"btn-primary",type:"submit",rounded:"",label:"Confirm","no-caps":""})])]}),_:1,__:[10,11,12]})])):(b(),T(U,{key:1,style:{"max-width":"420px"},onSubmit:F},{default:v(()=>{var m,d,u,c,y,x,l,P,q,O,S,k,C,Q,E;return[e[13]||(e[13]=a("div",{class:"text-left"},[a("p",{class:"login-title"},"Sign up")],-1)),t(p,{label:"Name",modelValue:r(o).name,"onUpdate:modelValue":e[3]||(e[3]=s=>r(o).name=s),outlined:"","no-error-icon":"",error:!!((m=r(o).errors)!=null&&m.name),"error-message":(u=(d=r(o).errors)==null?void 0:d.name)==null?void 0:u.toString(),rules:[s=>!!s||"Name is required"]},null,8,["modelValue","error","error-message","rules"]),t(p,{label:"Phone Number",modelValue:r(o).mobile,"onUpdate:modelValue":e[4]||(e[4]=s=>r(o).mobile=s),mask:"##########",outlined:"","no-error-icon":"",error:!!((c=r(o).errors)!=null&&c.mobile),"error-message":(x=(y=r(o).errors)==null?void 0:y.mobile)==null?void 0:x.toString(),rules:[s=>!!s||"Phone Number is required"]},null,8,["modelValue","error","error-message","rules"]),t(p,{label:"Email",modelValue:r(o).email,"onUpdate:modelValue":e[5]||(e[5]=s=>r(o).email=s),outlined:"","no-error-icon":"",error:!!((l=r(o).errors)!=null&&l.email),"error-message":(q=(P=r(o).errors)==null?void 0:P.email)==null?void 0:q.toString(),rules:[s=>!!s||"Email is required"]},null,8,["modelValue","error","error-message","rules"]),t(p,{label:"Password",modelValue:r(o).password,"onUpdate:modelValue":e[7]||(e[7]=s=>r(o).password=s),type:i.visiblePassword?"text":"password",outlined:"","no-error-icon":"",error:!!((O=r(o).errors)!=null&&O.password),"error-message":(k=(S=r(o).errors)==null?void 0:S.password)==null?void 0:k.toString(),rules:[s=>!!s||"Password is required"]},{append:v(()=>[t(R,{onClick:e[6]||(e[6]=s=>i.visiblePassword=!i.visiblePassword),name:i.visiblePassword?"visibility":"visibility_off"},null,8,["name"])]),_:1},8,["modelValue","type","error","error-message","rules"]),t(p,{label:"Confirm Password",type:i.visiblePassword?"text":"password",modelValue:r(o).password_confirmation,"onUpdate:modelValue":e[8]||(e[8]=s=>r(o).password_confirmation=s),outlined:"","no-error-icon":"",error:!!((C=r(o).errors)!=null&&C.password_confirmation),"error-message":(E=(Q=r(o).errors)==null?void 0:Q.password_confirmation)==null?void 0:E.toString(),rules:[s=>!!s||"Confirm Password is required",s=>s===r(o).password||"Confirm password does not match password"]},null,8,["type","modelValue","error","error-message","rules"]),a("div",W,[t(_,{class:"sized-btn",color:"btn-primary",type:"submit",rounded:"",label:"Next","no-caps":""})])]}),_:1,__:[13]}))]))]),g.$q.screen.gt.sm?(b(),V("div",X,[t(h,{height:"480",width:"580",src:"images/register.jpg"})])):I("",!0)])])]}),_:1}))}}),ie=D(Z,[["__scopeId","data-v-ad812474"]]);export{ie as default};
