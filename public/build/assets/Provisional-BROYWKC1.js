import{Q as k,a as p}from"./QBreadcrumbs-DkqASnvn.js";import{r as v,d as b,o as m,w as a,e as s,i as o,q as h,y as x,z as B,f as T,F as C,v as E,t as n,Q as P,D as V,h as g}from"./app-DUznSOmc.js";import{Q as i}from"./QTd-CRzo49di.js";import{Q as q,a as D}from"./QTable-CcvU9gtX.js";import{Q as N}from"./QTr-COIaMWyQ.js";import{Q as O}from"./QLayout-Du6LMI_4.js";import{_ as S}from"./BackendLayout-C3ya82A2.js";import{u as U}from"./use-quasar-Cr4Mn5yW.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QMarkupTable-DNRRxzx5.js";import"./QSelect-BBUPTZu7.js";import"./use-fullscreen-C1mYzMDG.js";import"./touch-6qXbwtcZ.js";import"./QSlideTransition-DzeEXPqm.js";const j={class:"flex items-center justify-between q-pa-md bg-white"},z={class:"q-gutter-sm"},A=Object.assign({layout:S},{__name:"Provisional",props:{offices:Array,designations:Array},setup(w){const r=w,d=U(),c=v(""),u=[{name:"name",label:"Office Name",field:"name",align:"left",sortable:!0}];r.designations.forEach(l=>{u.push({name:l,label:l,field:l,align:"center",sortable:!0})}),u.push({name:"total",label:"Total",field:"total",align:"center",sortable:!0});const f=l=>r.offices.reduce((t,e)=>{const Q=Number(e[l])||0;return t+Q},0),y=()=>{d.loading.show(),axios.get(route("export.summary-pe"),{responseType:"blob"}).then(l=>{const t=window.URL.createObjectURL(new Blob([l.data])),e=document.createElement("a");e.href=t,e.setAttribute("download",Date.now()+".xlsx"),e.click()}).catch(l=>{var t,e;d.notify({type:"negative",message:((e=(t=l.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to download file"})}).finally(()=>{d.loading.hide()})},_=l=>{window.history.back()};return(l,t)=>(m(),b(O,{class:"container",padding:""},{default:a(()=>[s("div",j,[s("div",null,[t[3]||(t[3]=s("div",{class:"stitle"},"Provisional Employees Summary",-1)),o(k,{class:"text-dark"},{default:a(()=>[o(p,{class:"cursor-pointer",onClick:t[0]||(t[0]=e=>l.$inertia.get(l.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),o(p,{class:"cursor-pointer",label:"Go Back",onClick:_})]),_:1})]),s("div",z,[o(h,{label:"Export",color:"primary",onClick:t[1]||(t[1]=e=>y()),icon:"download"})])]),t[5]||(t[5]=s("br",null,null,-1)),o(x,{flat:""},{default:a(()=>[o(B,null,{default:a(()=>[o(q,{rows:r.offices,columns:u,"row-key":"id",flat:"",filter:c.value,pagination:{rowsPerPage:0}},{"body-cell-name":a(e=>[o(i,{props:e,class:"sticky-col bg-white z-10"},{default:a(()=>[g(n(e.row.name),1)]),_:2},1032,["props"])]),"header-cell-name":a(e=>[o(D,{props:e,class:"sticky-col bg-white z-20"},{default:a(()=>[g(n(e.col.label),1)]),_:2},1032,["props"])]),"top-right":a(()=>[o(P,{borderless:"",dense:"",debounce:"800",modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=e=>c.value=e),outlined:"",clearable:"",placeholder:"Search Office"},{append:a(()=>[o(V,{name:"search"})]),_:1},8,["modelValue"])]),"bottom-row":a(()=>[o(N,{class:"bg-grey-3 text-bold q-border-t"},{default:a(()=>[o(i,{class:"text-left font-bold"},{default:a(()=>t[4]||(t[4]=[s("strong",null,"Total",-1)])),_:1,__:[4]}),(m(!0),T(C,null,E(r.designations,e=>(m(),b(i,{key:e,class:"text-center font-bold"},{default:a(()=>[s("strong",null,n(f(e)),1)]),_:2},1024))),128)),o(i,{class:"text-center font-bold"},{default:a(()=>[s("strong",null,n(f("total")),1)]),_:1})]),_:1})]),_:1},8,["rows","filter"])]),_:1})]),_:1})]),_:1,__:[5]}))}}),te=$(A,[["__scopeId","data-v-84e3ff2a"]]);export{te as default};
