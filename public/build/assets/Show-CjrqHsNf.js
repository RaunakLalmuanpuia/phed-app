import{Q as Ft,a as dt}from"./QBreadcrumbs-DwKRIHoy.js";import{b as It,a as Mt,Q as Ht}from"./QLayout-JX5mO03v.js";import{K as _t,L as Be,M as wt,N as Qe,r as z,E as P,j as ze,i as kt,O as me,R as Ze,k as D,z as ve,P as Wt,S as Kt,T as at,U as nt,I as Ae,V as Ie,X as et,h as de,Y as xt,Z as Yt,_ as Jt,J as je,c as S,o as g,w as l,f as t,q as j,b as d,Q as ee,d as L,e as A,F as le,n as ue,t as T,m as E,p as M,x as be,l as $e,u as q,B as b,$ as Gt,a0 as Xt,a1 as Je,a2 as Zt,a3 as el,a4 as tl,a5 as ll,a6 as ct,a7 as ft,a8 as al,a9 as nl,aa as Se,ab as ye,W as tt,ac as Re,ad as qt,ae as ol,af as Ct,ag as Tt,ah as sl,A as St,H as il,ai as rl,aj as mt,ak as ul,al as dl,am as cl,an as fl,G as vt,v as ml}from"./app-CWeOV7mW.js";import{b as $t,Q as Me,a as V,c as w,v as vl,d as gt,u as gl,p as pt,e as pl,f as bl,g as yl,r as bt,s as hl,C as De,_ as _l,h as wl}from"./BackendLayout-_LH758oD.js";import{r as kl,Q as lt}from"./QSelect-2Bq-iwOT.js";import{a as xl,Q as Dt,u as ql,b as Cl,c as Tl}from"./QTable-BgPZ23AO.js";import{Q as Sl}from"./QTd-WK8Ad-Ql.js";import{u as xe}from"./use-quasar-DSTf7FHt.js";import{u as Ee}from"./useUtils-DxxjrGZG.js";import{_ as Rt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as yt}from"./touch-Dkm2Lbqu.js";import{Q as He}from"./QFile-CaznZzIo.js";import{Q as Et}from"./QForm-CBcfZOyQ.js";import"./date-DeP6EFEO.js";let $l=0;const Dl=["click","keydown"],Rl={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${$l++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function El(e,a,o,r){const s=_t(wt,Be);if(s===Be)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Be;const{proxy:c}=Qe(),f=z(null),v=z(null),u=z(null),n=P(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),i=P(()=>s.currentModel.value===e.name),p=P(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(i.value===!0?" q-tab--active"+(s.tabProps.value.activeClass?" "+s.tabProps.value.activeClass:"")+(s.tabProps.value.activeColor?` text-${s.tabProps.value.activeColor}`:"")+(s.tabProps.value.activeBgColor?` bg-${s.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&s.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||s.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),h=P(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(s.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),k=P(()=>e.disable===!0||s.hasFocus.value===!0||i.value===!1&&s.hasActiveTab.value===!0?-1:e.tabindex||0);function C(O,Y){var B;if(Y!==!0&&(O==null?void 0:O.qAvoidFocus)!==!0&&((B=f.value)==null||B.focus()),e.disable!==!0){s.updateModel({name:e.name}),o("click",O);return}}function y(O){Kt(O,[13,32])?C(O,!0):at(O)!==!0&&O.keyCode>=35&&O.keyCode<=40&&O.altKey!==!0&&O.metaKey!==!0&&s.onKbdNavigate(O.keyCode,c.$el)===!0&&nt(O),o("keydown",O)}function H(){const O=s.tabProps.value.narrowIndicator,Y=[],B=D("div",{ref:u,class:["q-tab__indicator",s.tabProps.value.indicatorClass]});e.icon!==void 0&&Y.push(D(ve,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&Y.push(D("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&Y.push(e.alertIcon!==void 0?D(ve,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):D("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),O===!0&&Y.push(B);const W=[D("div",{class:"q-focus-helper",tabindex:-1,ref:f}),D("div",{class:h.value},Wt(a.default,Y))];return O===!1&&W.push(B),W}const K={name:P(()=>e.name),rootRef:v,tabIndicatorRef:u,routeData:r};ze(()=>{s.unregisterTab(K)}),kt(()=>{s.registerTab(K)});function ne(O,Y){const B={ref:v,class:p.value,tabindex:k.value,role:"tab","aria-selected":i.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:C,onKeydown:y,...Y};return me(D(O,B,H()),[[Ze,n.value]])}return{renderTab:ne,$tabs:s}}const Oe=Ae({name:"QTab",props:Rl,emits:Dl,setup(e,{slots:a,emit:o}){const{renderTab:r}=El(e,a,o);return()=>r("div")}});function Pl(e,a,o){const r=o===!0?["left","right"]:["top","bottom"];return`absolute-${a===!0?r[0]:r[1]}${e?` text-${e}`:""}`}const Vl=["left","center","right","justify"],Ll=Ae({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Vl.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:a,emit:o}){const{proxy:r}=Qe(),{$q:s}=r,{registerTick:c}=Ie(),{registerTick:f}=Ie(),{registerTick:v}=Ie(),{registerTimeout:u,removeTimeout:n}=et(),{registerTimeout:i,removeTimeout:p}=et(),h=z(null),k=z(null),C=z(e.modelValue),y=z(!1),H=z(!0),K=z(!1),ne=z(!1),O=[],Y=z(0),B=z(!1);let W=null,X=null,ae;const ge=P(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Pl(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),he=P(()=>{const x=Y.value,$=C.value;for(let U=0;U<x;U++)if(O[U].name.value===$)return!0;return!1}),_e=P(()=>`q-tabs__content--align-${y.value===!0?"left":ne.value===!0?"justify":e.align}`),R=P(()=>`q-tabs row no-wrap items-center q-tabs--${y.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),ce=P(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+_e.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),qe=P(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),we=P(()=>e.vertical!==!0&&s.lang.rtl===!0),fe=P(()=>kl===!1&&we.value===!0);de(we,se),de(()=>e.modelValue,x=>{Pe({name:x,setCurrent:!0,skipEmit:!0})}),de(()=>e.outsideArrows,Ce);function Pe({name:x,setCurrent:$,skipEmit:U}){C.value!==x&&(U!==!0&&e["onUpdate:modelValue"]!==void 0&&o("update:modelValue",x),($===!0||e["onUpdate:modelValue"]===void 0)&&(Le(C.value,x),C.value=x))}function Ce(){c(()=>{h.value&&Ve({width:h.value.offsetWidth,height:h.value.offsetHeight})})}function Ve(x){if(qe.value===void 0||k.value===null)return;const $=x[qe.value.container],U=Math.min(k.value[qe.value.scroll],Array.prototype.reduce.call(k.value.children,(G,F)=>G+(F[qe.value.content]||0),0)),J=$>0&&U>$;y.value=J,J===!0&&f(se),ne.value=$<parseInt(e.breakpoint,10)}function Le(x,$){const U=x!=null&&x!==""?O.find(G=>G.name.value===x):null,J=$!=null&&$!==""?O.find(G=>G.name.value===$):null;if(Fe===!0)Fe=!1;else if(U&&J){const G=U.tabIndicatorRef.value,F=J.tabIndicatorRef.value;W!==null&&(clearTimeout(W),W=null),G.style.transition="none",G.style.transform="none",F.style.transition="none",F.style.transform="none";const Q=G.getBoundingClientRect(),te=F.getBoundingClientRect();F.style.transform=e.vertical===!0?`translate3d(0,${Q.top-te.top}px,0) scale3d(1,${te.height?Q.height/te.height:1},1)`:`translate3d(${Q.left-te.left}px,0,0) scale3d(${te.width?Q.width/te.width:1},1,1)`,v(()=>{W=setTimeout(()=>{W=null,F.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",F.style.transform="none"},70)})}J&&y.value===!0&&oe(J.rootRef.value)}function oe(x){const{left:$,width:U,top:J,height:G}=k.value.getBoundingClientRect(),F=x.getBoundingClientRect();let Q=e.vertical===!0?F.top-J:F.left-$;if(Q<0){k.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Q),se();return}Q+=e.vertical===!0?F.height-G:F.width-U,Q>0&&(k.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Q),se())}function se(){const x=k.value;if(x===null)return;const $=x.getBoundingClientRect(),U=e.vertical===!0?x.scrollTop:Math.abs(x.scrollLeft);we.value===!0?(H.value=Math.ceil(U+$.width)<x.scrollWidth-1,K.value=U>0):(H.value=U>0,K.value=e.vertical===!0?Math.ceil(U+$.height)<x.scrollHeight:Math.ceil(U+$.width)<x.scrollWidth)}function I(x){X!==null&&clearInterval(X),X=setInterval(()=>{Z(x)===!0&&m()},5)}function pe(){I(fe.value===!0?Number.MAX_SAFE_INTEGER:0)}function ie(){I(fe.value===!0?0:Number.MAX_SAFE_INTEGER)}function m(){X!==null&&(clearInterval(X),X=null)}function _(x,$){const U=Array.prototype.filter.call(k.value.children,te=>te===$||te.matches&&te.matches(".q-tab.q-focusable")===!0),J=U.length;if(J===0)return;if(x===36)return oe(U[0]),U[0].focus(),!0;if(x===35)return oe(U[J-1]),U[J-1].focus(),!0;const G=x===(e.vertical===!0?38:37),F=x===(e.vertical===!0?40:39),Q=G===!0?-1:F===!0?1:void 0;if(Q!==void 0){const te=we.value===!0?-1:1,ke=U.indexOf($)+Q*te;return ke>=0&&ke<J&&(oe(U[ke]),U[ke].focus({preventScroll:!0})),!0}}const N=P(()=>fe.value===!0?{get:x=>Math.abs(x.scrollLeft),set:(x,$)=>{x.scrollLeft=-$}}:e.vertical===!0?{get:x=>x.scrollTop,set:(x,$)=>{x.scrollTop=$}}:{get:x=>x.scrollLeft,set:(x,$)=>{x.scrollLeft=$}});function Z(x){const $=k.value,{get:U,set:J}=N.value;let G=!1,F=U($);const Q=x<F?-1:1;return F+=Q*5,F<0?(G=!0,F=0):(Q===-1&&F<=x||Q===1&&F>=x)&&(G=!0,F=x),J($,F),se(),G}function re(x,$){for(const U in x)if(x[U]!==$[U])return!1;return!0}function We(){let x=null,$={matchedLen:0,queryDiff:9999,hrefLen:0};const U=O.filter(Q=>{var te;return((te=Q.routeData)==null?void 0:te.hasRouterLink.value)===!0}),{hash:J,query:G}=r.$route,F=Object.keys(G).length;for(const Q of U){const te=Q.routeData.exact.value===!0;if(Q.routeData[te===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:ke,query:Ke,matched:Nt,href:Qt}=Q.routeData.resolvedLink.value,Ye=Object.keys(Ke).length;if(te===!0){if(ke!==J||Ye!==F||re(G,Ke)===!1)continue;x=Q.name.value;break}if(ke!==""&&ke!==J||Ye!==0&&re(Ke,G)===!1)continue;const Te={matchedLen:Nt.length,queryDiff:F-Ye,hrefLen:Qt.length-ke.length};if(Te.matchedLen>$.matchedLen){x=Q.name.value,$=Te;continue}else if(Te.matchedLen!==$.matchedLen)continue;if(Te.queryDiff<$.queryDiff)x=Q.name.value,$=Te;else if(Te.queryDiff!==$.queryDiff)continue;Te.hrefLen>$.hrefLen&&(x=Q.name.value,$=Te)}if(x===null&&O.some(Q=>Q.routeData===void 0&&Q.name.value===C.value)===!0){Fe=!1;return}Pe({name:x,setCurrent:!0})}function Bt(x){if(n(),B.value!==!0&&h.value!==null&&x.target&&typeof x.target.closest=="function"){const $=x.target.closest(".q-tab");$&&h.value.contains($)===!0&&(B.value=!0,y.value===!0&&oe($))}}function jt(){u(()=>{B.value=!1},30)}function Ue(){it.avoidRouteWatcher===!1?i(We):p()}function st(){if(ae===void 0){const x=de(()=>r.$route.fullPath,Ue);ae=()=>{x(),ae=void 0}}}function Ut(x){O.push(x),Y.value++,Ce(),x.routeData===void 0||r.$route===void 0?i(()=>{if(y.value===!0){const $=C.value,U=$!=null&&$!==""?O.find(J=>J.name.value===$):null;U&&oe(U.rootRef.value)}}):(st(),x.routeData.hasRouterLink.value===!0&&Ue())}function zt(x){O.splice(O.indexOf(x),1),Y.value--,Ce(),ae!==void 0&&x.routeData!==void 0&&(O.every($=>$.routeData===void 0)===!0&&ae(),Ue())}const it={currentModel:C,tabProps:ge,hasFocus:B,hasActiveTab:he,registerTab:Ut,unregisterTab:zt,verifyRouteModel:Ue,updateModel:Pe,onKbdNavigate:_,avoidRouteWatcher:!1};xt(wt,it);function rt(){W!==null&&clearTimeout(W),m(),ae==null||ae()}let ut,Fe;return ze(rt),Yt(()=>{ut=ae!==void 0,rt()}),Jt(()=>{ut===!0&&(st(),Fe=!0,Ue()),Ce()}),()=>D("div",{ref:h,class:R.value,role:"tablist",onFocusin:Bt,onFocusout:jt},[D(It,{onResize:Ve}),D("div",{ref:k,class:ce.value,onScroll:se},je(a.default)),D(ve,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(H.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||s.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:pe,onTouchstartPassive:pe,onMouseupPassive:m,onMouseleavePassive:m,onTouchendPassive:m}),D(ve,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(K.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||s.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:ie,onTouchstartPassive:ie,onMouseupPassive:m,onMouseleavePassive:m,onTouchendPassive:m})])}}),Ol={class:"row q-col-gutter-md q-mt-sm"},Al={class:"q-pa-sm"},Bl={class:"q-pa-sm"},jl={class:"q-pa-sm"},Ul={class:"q-pa-sm"},zl={key:0},Nl={__name:"Document",props:["data","office"],setup(e){const a=e,o=z(""),r=P(()=>{var c;return(c=a.data)!=null&&c.documents?a.data.documents.filter(f=>{var u,n,i;const v=o.value.toLowerCase();return((u=f.name)==null?void 0:u.toLowerCase().includes(v))||((i=(n=f.type)==null?void 0:n.name)==null?void 0:i.toLowerCase().includes(v))}):[]});function s(c){return new Date(c).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})}return(c,f)=>(g(),S(M,{class:"q-mt-md"},{default:l(()=>[t(j,null,{default:l(()=>[f[1]||(f[1]=d("div",{class:"stitle"},"Uploaded Documents",-1)),d("div",Ol,[t(ee,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=v=>o.value=v),dense:"",outlined:"",label:"Search by document name or type...",class:"col-12 col-sm-6"},null,8,["modelValue"])])]),_:1,__:[1]}),t(xl,{flat:"",dense:"",class:"q-ma-sm"},{default:l(()=>[f[3]||(f[3]=d("thead",null,[d("tr",{class:"text-left"},[d("th",null,"Type"),d("th",null,"Mime Type"),d("th",null,"Upload Date"),d("th",null,"Actions")])],-1)),d("tbody",null,[(g(!0),L(le,null,ue(r.value,v=>{var u;return g(),L("tr",{key:v.id,class:"text-left"},[d("td",Al,T(((u=v.type)==null?void 0:u.name)||"—"),1),d("td",Bl,T(v.mime),1),d("td",jl,T(s(v.upload_date)),1),d("td",Ul,[t(E,{icon:"visibility",flat:"",dense:"",color:"primary",round:"",href:`/storage/${v.path}`,target:"_blank",title:"View Document"},null,8,["href"]),t(E,{icon:"download",flat:"",dense:"",round:"",color:"primary",href:`/storage/${v.path}`,download:"",title:"Download Document"},null,8,["href"])])])}),128)),r.value.length===0?(g(),L("tr",zl,f[2]||(f[2]=[d("td",{colspan:"5",class:"text-center text-grey"},"No documents found",-1)]))):A("",!0)])]),_:1,__:[3]})]),_:1}))}},Ql={__name:"TransferRequest",props:["data","office"],setup(e){const{formatDate:a}=Ee(),o=xe(),r=z(!1),s=be({}),c=v=>{s.post(route("transfer.approve",v),{onStart:()=>{o.loading.show()},onFinish:()=>{o.loading.hide(),r.value=!1,s.reset(),o.notify({type:"success",message:"Transfer Approved",position:"bottom"})},onError:u=>{Object.values(u).forEach(n=>{o.notify({type:"negative",message:n,position:"bottom"})})}})},f=v=>{s.post(route("transfer.reject",v),{onStart:()=>{o.loading.show()},onFinish:()=>{o.loading.hide(),r.value=!1,s.reset(),o.notify({type:"negative",message:"Transfer Rejected",position:"bottom"})},onError:u=>{Object.values(u).forEach(n=>{o.notify({type:"negative",message:n,position:"bottom"})})}})};return(v,u)=>(g(),S(M,{class:"q-mt-md"},{default:l(()=>[t(j,{class:"flex items-center justify-between"},{default:l(()=>u[0]||(u[0]=[d("div",{class:"stitle text-lg font-bold"},"Transfer Request",-1)])),_:1,__:[0]}),t($e),t(j,null,{default:l(()=>[u[3]||(u[3]=d("div",{class:"stitle text-md font-semibold q-mb-sm"},"Tranfer Requests",-1)),t(Dt,{rows:e.data.transfer_requests,columns:[{name:"current_office",label:"Current Office",field:n=>{var i;return(i=n.current_office)==null?void 0:i.name}},{name:"requested_office",label:"Requested Office",field:n=>{var i;return(i=n.requested_office)==null?void 0:i.name}},{name:"status",label:"Status",field:"approval_status"},{name:"date",label:"Request Date",field:n=>q(a)(n.request_date)},{name:"actions",label:"Actions",field:"id",align:"center"}],"row-key":"id",flat:"",bordered:""},{"body-cell-actions":l(n=>[t(Sl,{props:n},{default:l(()=>[n.row.approval_status==="pending"?(g(),S($t,{key:0,flat:"",dense:"",color:"primary",label:"Actions",size:"sm"},{default:l(()=>[t(Me,null,{default:l(()=>[me((g(),S(V,{clickable:"",onClick:i=>c(n.row.id)},{default:l(()=>[t(w,{avatar:""},{default:l(()=>[t(ve,{name:"check",color:"positive"})]),_:1}),t(w,null,{default:l(()=>u[1]||(u[1]=[b("Approve")])),_:1,__:[1]})]),_:2},1032,["onClick"])),[[Ze]]),me((g(),S(V,{clickable:"",onClick:i=>f(n.row.id)},{default:l(()=>[t(w,{avatar:""},{default:l(()=>[t(ve,{name:"close",color:"negative"})]),_:1}),t(w,null,{default:l(()=>u[2]||(u[2]=[b("Reject")])),_:1,__:[2]})]),_:2},1032,["onClick"])),[[Ze]])]),_:2},1024)]),_:2},1024)):A("",!0)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1,__:[3]})]),_:1}))}},Fl=Rt(Ql,[["__scopeId","data-v-41900c29"]]),Ne=Ae({name:"QTooltip",inheritAttrs:!1,props:{...gl,...Zt,...Je,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Je.transitionShow,default:"jump-down"},transitionHide:{...Je.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:gt},self:{type:String,default:"top middle",validator:gt},offset:{type:Array,default:()=>[14,14],validator:vl},scrollTarget:Xt,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Gt],setup(e,{slots:a,emit:o,attrs:r}){let s,c;const f=Qe(),{proxy:{$q:v}}=f,u=z(null),n=z(!1),i=P(()=>pt(e.anchor,v.lang.rtl)),p=P(()=>pt(e.self,v.lang.rtl)),h=P(()=>e.persistent!==!0),{registerTick:k,removeTick:C}=Ie(),{registerTimeout:y}=et(),{transitionProps:H,transitionStyle:K}=el(e),{localScrollTarget:ne,changeScrollEvent:O,unconfigureScrollTarget:Y}=pl(e,Le),{anchorEl:B,canShow:W,anchorEvents:X}=bl({showing:n,configureAnchorEl:Ve}),{show:ae,hide:ge}=tl({showing:n,canShow:W,handleShow:ce,handleHide:qe,hideOnRouteChange:h,processOnMount:!0});Object.assign(X,{delayShow:Pe,delayHide:Ce});const{showPortal:he,hidePortal:_e,renderPortal:R}=ll(f,u,se,"tooltip");if(v.platform.is.mobile===!0){const I={anchorEl:B,innerRef:u,onClickOutside(ie){return ge(ie),ie.target.classList.contains("q-dialog__backdrop")&&nt(ie),!0}},pe=P(()=>e.modelValue===null&&e.persistent!==!0&&n.value===!0);de(pe,ie=>{(ie===!0?yl:bt)(I)}),ze(()=>{bt(I)})}function ce(I){he(),k(()=>{c=new MutationObserver(()=>fe()),c.observe(u.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),fe(),Le()}),s===void 0&&(s=de(()=>v.screen.width+"|"+v.screen.height+"|"+e.self+"|"+e.anchor+"|"+v.lang.rtl,fe)),y(()=>{he(!0),o("show",I)},e.transitionDuration)}function qe(I){C(),_e(),we(),y(()=>{_e(!0),o("hide",I)},e.transitionDuration)}function we(){c!==void 0&&(c.disconnect(),c=void 0),s!==void 0&&(s(),s=void 0),Y(),ct(X,"tooltipTemp")}function fe(){hl({targetEl:u.value,offset:e.offset,anchorEl:B.value,anchorOrigin:i.value,selfOrigin:p.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Pe(I){if(v.platform.is.mobile===!0){yt(),document.body.classList.add("non-selectable");const pe=B.value,ie=["touchmove","touchcancel","touchend","click"].map(m=>[pe,m,"delayHide","passiveCapture"]);ft(X,"tooltipTemp",ie)}y(()=>{ae(I)},e.delay)}function Ce(I){v.platform.is.mobile===!0&&(ct(X,"tooltipTemp"),yt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),y(()=>{ge(I)},e.hideDelay)}function Ve(){if(e.noParentEvent===!0||B.value===null)return;const I=v.platform.is.mobile===!0?[[B.value,"touchstart","delayShow","passive"]]:[[B.value,"mouseenter","delayShow","passive"],[B.value,"mouseleave","delayHide","passive"]];ft(X,"anchor",I)}function Le(){if(B.value!==null||e.scrollTarget!==void 0){ne.value=al(B.value,e.scrollTarget);const I=e.noParentEvent===!0?fe:ge;O(ne.value,I)}}function oe(){return n.value===!0?D("div",{...r,ref:u,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",r.class],style:[r.style,K.value],role:"tooltip"},je(a.default)):null}function se(){return D(nl,H.value,oe)}return ze(we),Object.assign(f.proxy,{updatePosition:fe}),R}}),Il={key:0,class:"text-gray-500 text-center py-6"},Ml={key:1,class:"flex flex-col gap-4"},Hl={class:"flex flex-wrap justify-between items-center mb-3"},Wl={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 p-3 rounded-md"},Kl={key:0,class:"mt-4"},Yl={class:"space-y-2"},Jl={class:"flex items-center space-x-2"},Gl={class:"flex space-x-2"},Xl={__name:"EditRequest",props:["data"],setup(e){const{formatDate:a}=Ee(),o=f=>{tt.post(route("edit.approve",f))},r=f=>{tt.post(route("edit.reject",f))},s=f=>{try{return JSON.parse(f)}catch{return{}}},c={name:"Name",date_of_birth:"Date of Birth",parent_name:"Parent's Name",employment_type:"Employment Type",designation:"Designation",educational_qln:"Educational Qualification",name_of_workplace:"Workplace Name",post_per_qualification:"Post per Qualification",date_of_engagement:"Date of Engagement",skill_category:"Skill Category",skill_at_present:"Skill at Present"};return(f,v)=>(g(),S(M,{class:"q-mt-md"},{default:l(()=>[t(j,null,{default:l(()=>v[0]||(v[0]=[d("div",{class:"stitle text-lg font-bold"},"Edit Requests",-1)])),_:1,__:[0]}),t($e),t(j,null,{default:l(()=>[e.data.edit_requests.length===0?(g(),L("div",Il," No edit requests found. ")):(g(),L("div",Ml,[(g(!0),L(le,null,ue(e.data.edit_requests,u=>(g(),S(M,{key:u.id,class:"shadow-md rounded-xl border border-gray-200 hover:shadow-lg transition"},{default:l(()=>[t(j,null,{default:l(()=>[d("div",Hl,[d("div",null,[v[1]||(v[1]=d("b",{class:"text-label"},"Status:",-1)),d("span",{class:Se({"text-yellow-600":u.approval_status==="pending","text-green-600":u.approval_status==="approved","text-red-600":u.approval_status==="rejected"})},T(u.approval_status),3)]),d("div",null,[v[2]||(v[2]=d("b",{class:"text-label"},"Requested On:",-1)),b(" "+T(q(a)(u.request_date)),1)])]),d("div",null,[v[3]||(v[3]=d("b",{class:"block mb-2 text-label"},"Requested Changes:",-1)),d("div",Wl,[(g(!0),L(le,null,ue(s(u.requested_changes),(n,i)=>(g(),L("div",{key:i,class:"flex justify-between items-center"},[t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>[b(T(c[i]??i)+": ",1)]),_:2},1024),t(w,{class:"text-label"},{default:l(()=>[b(T(i==="date_of_birth"||i==="date_of_engagement"?q(a)(n):n),1)]),_:2},1024)]),_:2},1024)]))),128))])]),u.attachments&&u.attachments.length>0?(g(),L("div",Kl,[v[6]||(v[6]=d("b",{class:"block mb-2"},"Attached Documents:",-1)),d("div",Yl,[(g(!0),L(le,null,ue(u.attachments,n=>{var i;return g(),L("div",{key:n.id,class:"flex items-center justify-between p-2 border rounded-md"},[d("div",Jl,[t(ve,{name:"attach_file",size:"sm"}),d("span",null,[d("b",null,T(((i=n.type)==null?void 0:i.name)||"Unknown Type"),1)])]),d("div",Gl,[t(E,{flat:"",dense:"",round:"",color:"primary",icon:"download",href:`/storage/${n.path}`,target:"_blank"},{default:l(()=>[t(Ne,null,{default:l(()=>v[4]||(v[4]=[b("Download")])),_:1,__:[4]})]),_:2},1032,["href"]),t(E,{flat:"",dense:"",round:"",color:"primary",icon:"visibility",href:`/storage/${n.path}`,target:"_blank"},{default:l(()=>[t(Ne,null,{default:l(()=>v[5]||(v[5]=[b("View")])),_:1,__:[5]})]),_:2},1032,["href"])])])}),128))])])):A("",!0)]),_:2},1024),u.approval_status==="pending"?(g(),S(ye,{key:0,align:"right"},{default:l(()=>[t(E,{label:"Approve",color:"positive",onClick:n=>o(u.id)},null,8,["onClick"]),t(E,{label:"Reject",color:"negative",onClick:n=>r(u.id)},null,8,["onClick"])]),_:2},1024)):A("",!0)]),_:2},1024))),128))]))]),_:1})]),_:1}))}},Zl={key:0,class:"text-gray-500 text-center py-6"},ea={key:1,class:"flex flex-col gap-4"},ta={class:"flex flex-wrap justify-between items-center mb-3"},la={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 p-3 rounded-md"},aa={key:0,class:"mt-3"},na={__name:"DeletionRequest",props:["data"],setup(e){const{formatDate:a}=Ee(),o=xe(),r=be({});function s(v){try{return JSON.parse(v.reason)}catch{return{}}}const c=v=>{r.post(route("deletion.approve",v),{onStart:()=>{o.loading.show()},onFinish:()=>{o.loading.hide(),r.reset(),o.notify({type:"success",message:"Deletion Approved",position:"bottom"})},onError:u=>{Object.values(u).forEach(n=>{o.notify({type:"negative",message:n,position:"bottom"})})}})},f=v=>{r.post(route("deletion.reject",v),{onStart:()=>{o.loading.show()},onFinish:()=>{o.loading.hide(),r.reset(),o.notify({type:"negative",message:"Deletion Rejected",position:"bottom"})},onError:u=>{Object.values(u).forEach(n=>{o.notify({type:"negative",message:n,position:"bottom"})})}})};return(v,u)=>(g(),S(M,{class:"q-mt-md"},{default:l(()=>[t(j,null,{default:l(()=>u[0]||(u[0]=[d("div",{class:"stitle text-lg font-bold"},"Deletion Requests",-1)])),_:1,__:[0]}),t($e),t(j,null,{default:l(()=>[e.data.deletion_requests.length===0?(g(),L("div",Zl," No deletion requests. ")):(g(),L("div",ea,[(g(!0),L(le,null,ue(e.data.deletion_requests,n=>(g(),S(M,{key:n.id,class:"shadow-md rounded-xl border border-gray-200 hover:shadow-lg transition"},{default:l(()=>[t(j,null,{default:l(()=>[d("div",ta,[d("div",null,[u[1]||(u[1]=d("b",{class:"text-label"},"Status:",-1)),d("span",{class:Se({"text-yellow-600":n.approval_status==="pending","text-green-600":n.approval_status==="approved","text-red-600":n.approval_status==="rejected"})},T(n.approval_status),3)]),d("div",null,[u[2]||(u[2]=d("b",{class:"text-label"},"Requested On:",-1)),b(" "+T(q(a)(n.request_date)),1)])]),d("div",null,[u[7]||(u[7]=d("b",{class:"block mb-2 text-label"},"Reason Details:",-1)),d("div",la,[t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[3]||(u[3]=[b("Reason:")])),_:1,__:[3]}),t(w,{class:"text-label"},{default:l(()=>[b(T(s(n).reason),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[4]||(u[4]=[b("Year:")])),_:1,__:[4]}),t(w,{class:"text-label"},{default:l(()=>[b(T(s(n).year),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[5]||(u[5]=[b("Remark:")])),_:1,__:[5]}),t(w,{class:"text-label"},{default:l(()=>[b(T(s(n).remark),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[6]||(u[6]=[b("Seniority List:")])),_:1,__:[6]}),t(w,{class:"text-label"},{default:l(()=>[b(T(s(n).seniority_list),1)]),_:2},1024)]),_:2},1024)]),s(n).supporting_document?(g(),L("div",aa,[t(E,{dense:"",flat:"",color:"primary",icon:"attach_file",href:`/${s(n).supporting_document}`,target:"_blank",label:"View Document"},null,8,["href"])])):A("",!0)])]),_:2},1024),n.approval_status==="pending"?(g(),S(ye,{key:0,align:"right"},{default:l(()=>[t(E,{label:"Approve",color:"positive",onClick:i=>c(n.id)},null,8,["onClick"]),t(E,{label:"Reject",color:"negative",onClick:i=>f(n.id)},null,8,["onClick"])]),_:2},1024)):A("",!0)]),_:2},1024))),128))]))]),_:1})]),_:1}))}},oa={key:0,class:"text-gray-500 text-center py-6"},sa={key:1,class:"flex flex-col gap-4"},ia={class:"flex flex-wrap justify-between items-center mb-3"},ra={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 p-3 rounded-md"},ua={key:0,class:"mt-3"},da={__name:"RequestDeletion",props:["data"],setup(e){const{formatDate:a}=Ee(),o=e,r=xe(),s=be({reason:"",seniority_list:"",year:"",remark:"",supporting_document:null}),c=z(!1);function f(u){try{return JSON.parse(u.reason)}catch{return{}}}function v(){s.post(route("deletion.request",o.data),{preserveScroll:!0,onSuccess:()=>{r.notify({type:"positive",message:"Deletion request submitted successfully"}),c.value=!1,s.reset()},onError:u=>{Object.values(u).forEach(n=>{r.notify({type:"negative",message:n,position:"bottom"})})}})}return(u,n)=>(g(),S(M,{class:"q-mt-md"},{default:l(()=>[t(j,{class:"flex items-center justify-between"},{default:l(()=>[n[8]||(n[8]=d("div",{class:"stitle text-lg font-bold"},"Request Deletion",-1)),d("div",null,[e.data.employment_type!=="Deleted"?(g(),S(E,{key:0,label:"Request Deletion",color:"negative",onClick:n[0]||(n[0]=i=>c.value=!0)})):A("",!0)])]),_:1,__:[8]}),t($e),t(Re,{modelValue:c.value,"onUpdate:modelValue":n[7]||(n[7]=i=>c.value=i)},{default:l(()=>[t(M,{style:{"min-width":"400px"}},{default:l(()=>[t(j,null,{default:l(()=>n[9]||(n[9]=[d("div",{class:"text-h6"},"Submit Deletion Request",-1)])),_:1,__:[9]}),t(j,null,{default:l(()=>[t(ee,{modelValue:q(s).reason,"onUpdate:modelValue":n[1]||(n[1]=i=>q(s).reason=i),label:"Reason",type:"textarea",outlined:"",error:!!q(s).errors.reason,"error-message":q(s).errors.reason},null,8,["modelValue","error","error-message"]),t(ee,{modelValue:q(s).seniority_list,"onUpdate:modelValue":n[2]||(n[2]=i=>q(s).seniority_list=i),label:"Seniority List",outlined:"",class:"q-mt-sm"},null,8,["modelValue"]),t(ee,{modelValue:q(s).year,"onUpdate:modelValue":n[3]||(n[3]=i=>q(s).year=i),label:"Year",type:"number",outlined:"",class:"q-mt-sm"},null,8,["modelValue"]),t(ee,{modelValue:q(s).remark,"onUpdate:modelValue":n[4]||(n[4]=i=>q(s).remark=i),label:"Remark",type:"textarea",outlined:"",class:"q-mt-sm"},null,8,["modelValue"]),t(He,{modelValue:q(s).supporting_document,"onUpdate:modelValue":n[5]||(n[5]=i=>q(s).supporting_document=i),label:"Supporting Document",outlined:"",class:"q-mt-sm",error:!!q(s).errors.supporting_document,"error-message":q(s).errors.supporting_document},null,8,["modelValue","error","error-message"])]),_:1}),t(ye,{align:"right"},{default:l(()=>[t(E,{flat:"",label:"Cancel",color:"grey",onClick:n[6]||(n[6]=i=>c.value=!1)}),t(E,{label:"Submit",color:"negative",onClick:v,loading:q(s).processing},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(j,null,{default:l(()=>[e.data.deletion_requests.length===0?(g(),L("div",oa," No deletion requests. ")):(g(),L("div",sa,[(g(!0),L(le,null,ue(e.data.deletion_requests,i=>(g(),S(M,{key:i.id,class:"shadow-md rounded-xl border border-gray-200 hover:shadow-lg transition"},{default:l(()=>[t(j,null,{default:l(()=>[d("div",ia,[d("div",null,[n[10]||(n[10]=d("b",{class:"text-label"},"Status:",-1)),d("span",{class:Se({"text-yellow-600":i.approval_status==="pending","text-green-600":i.approval_status==="approved","text-red-600":i.approval_status==="rejected"})},T(i.approval_status),3)]),d("div",null,[n[11]||(n[11]=d("b",{class:"text-label"},"Requested On:",-1)),b(" "+T(q(a)(i.request_date)),1)])]),d("div",null,[n[16]||(n[16]=d("b",{class:"block mb-2 text-label"},"Reason Details:",-1)),d("div",ra,[t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[12]||(n[12]=[b("Reason:")])),_:1,__:[12]}),t(w,{class:"text-label"},{default:l(()=>[b(T(f(i).reason),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[13]||(n[13]=[b("Year:")])),_:1,__:[13]}),t(w,{class:"text-label"},{default:l(()=>[b(T(f(i).year),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[14]||(n[14]=[b("Remark:")])),_:1,__:[14]}),t(w,{class:"text-label"},{default:l(()=>[b(T(f(i).remark),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[15]||(n[15]=[b("Seniority List:")])),_:1,__:[15]}),t(w,{class:"text-label"},{default:l(()=>[b(T(f(i).seniority_list),1)]),_:2},1024)]),_:2},1024)]),f(i).supporting_document?(g(),L("div",ua,[t(E,{dense:"",flat:"",color:"primary",icon:"attach_file",href:`/${f(i).supporting_document}`,target:"_blank",label:"View Document"},null,8,["href"])])):A("",!0)])]),_:2},1024)]),_:2},1024))),128))]))]),_:1})]),_:1}))}},ca={key:0,class:"text-gray-500 text-center py-6"},fa={key:1,class:"flex flex-col gap-4"},ma={class:"flex flex-wrap justify-between items-center mb-3"},va={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 p-3 rounded-md"},ga={key:0,class:"mt-4"},pa={class:"space-y-2"},ba={class:"flex items-center space-x-2"},ya={class:"flex space-x-2"},ha={class:"grid grid-cols-2 gap-4 items-start relative"},_a={class:"text-sm font-bold mb-1"},wa={class:"q-mt-md"},ka={class:"text-sm font-bold mb-1"},xa={key:2,class:"border rounded p-4 bg-gray-50 q-mt-md"},qa={class:"text-sm font-bold mb-2"},Ca={__name:"RequestEdit",props:["data","documentTypes"],setup(e){const{formatDate:a}=Ee(),o=e,r=xe(),s=z(!1),c=be({requested_changes:{name:"",date_of_birth:"",parent_name:"",educational_qln:"",technical_qln:""},documents:{}});de(s,i=>{i||(c.reset(),c.clearErrors())});const f={date_of_birth:["Birth Certificate","Aadhar","EPIC","Educational Certificate"],name:["Birth Certificate","Aadhar","EPIC","Educational Certificate"],parent_name:["Birth Certificate"],educational_qln:["Educational Certificate"],technical_qln:["Technical Certificate"]},v={name:"Name",date_of_birth:"Date of Birth",parent_name:"Parent's Name",educational_qln:"Educational Qualification",technical_qln:"Technical Qualification"},u=()=>{c.reset(),c.clearErrors(),c.documents={}},n=()=>{const i=new FormData;Object.entries(c.requested_changes).forEach(([p,h])=>{h&&i.append(`requested_changes[${p}]`,h)}),Object.entries(c.documents).forEach(([p,h])=>{h&&[].concat(h).forEach(k=>{i.append(`documents[${p}][]`,k)})}),c.post(route("edit.request",o.data),{data:i,forceFormData:!0,onSuccess:()=>{s.value=!1,c.reset()},onError:p=>{Object.values(p).forEach(h=>{Array.isArray(h)?h.forEach(k=>{r.notify({type:"negative",message:k})}):r.notify({type:"negative",message:h})})}})};return(i,p)=>(g(),L(le,null,[t(M,{class:"q-mt-md"},{default:l(()=>[t(j,{class:"flex items-center justify-between"},{default:l(()=>[p[2]||(p[2]=d("div",{class:"stitle text-lg font-bold"},"Request Edit",-1)),t(E,{label:"Request Edit",color:"primary",onClick:p[0]||(p[0]=h=>s.value=!0)})]),_:1,__:[2]}),t($e),t(j,null,{default:l(()=>[e.data.edit_requests.length===0?(g(),L("div",ca," No edit requests found. ")):(g(),L("div",fa,[(g(!0),L(le,null,ue(e.data.edit_requests,h=>(g(),S(M,{key:h.id,class:"shadow-md rounded-xl border border-gray-200 hover:shadow-lg transition"},{default:l(()=>[t(j,null,{default:l(()=>[d("div",ma,[d("div",null,[p[3]||(p[3]=d("b",null,"Status:",-1)),d("span",{class:Se({"text-yellow-600":h.approval_status==="pending","text-green-600":h.approval_status==="approved","text-red-600":h.approval_status==="rejected"})},T(h.approval_status),3)]),d("div",null,[p[4]||(p[4]=d("b",null,"Requested On:",-1)),b(" "+T(q(a)(h.request_date)),1)])]),d("div",null,[p[5]||(p[5]=d("b",{class:"block mb-2"},"Requested Changes:",-1)),d("div",va,[(g(!0),L(le,null,ue(JSON.parse(h.requested_changes),(k,C)=>(g(),L("div",{key:C,class:"flex justify-between items-center"},[t(V,null,{default:l(()=>[t(w,{side:""},{default:l(()=>[b(T(v[C]??C)+": ",1)]),_:2},1024),t(w,null,{default:l(()=>[b(T(C==="date_of_birth"?q(a)(k):k),1)]),_:2},1024)]),_:2},1024)]))),128))])]),h.attachments&&h.attachments.length>0?(g(),L("div",ga,[p[8]||(p[8]=d("b",{class:"block mb-2"},"Attached Documents:",-1)),d("div",pa,[(g(!0),L(le,null,ue(h.attachments,k=>{var C;return g(),L("div",{key:k.id,class:"flex items-center justify-between p-2 border rounded-md"},[d("div",ba,[t(ve,{name:"attach_file",size:"sm"}),d("span",null,[d("b",null,T(((C=k.type)==null?void 0:C.name)||"Unknown Type"),1)])]),d("div",ya,[t(E,{flat:"",dense:"",round:"",color:"primary",icon:"download",href:`/storage/${k.path}`,target:"_blank"},{default:l(()=>[t(Ne,null,{default:l(()=>p[6]||(p[6]=[b("Download")])),_:1,__:[6]})]),_:2},1032,["href"]),t(E,{flat:"",dense:"",round:"",color:"primary",icon:"visibility",href:`/storage/${k.path}`,target:"_blank"},{default:l(()=>[t(Ne,null,{default:l(()=>p[7]||(p[7]=[b("View")])),_:1,__:[7]})]),_:2},1032,["href"])])])}),128))])])):A("",!0)]),_:2},1024)]),_:2},1024))),128))]))]),_:1})]),_:1}),t(Re,{modelValue:s.value,"onUpdate:modelValue":p[1]||(p[1]=h=>s.value=h),persistent:""},{default:l(()=>[t(M,{style:{"min-width":"700px"}},{default:l(()=>[t(j,null,{default:l(()=>p[9]||(p[9]=[d("div",{class:"text-lg font-bold"},"Request Edit",-1)])),_:1,__:[9]}),t(j,null,{default:l(()=>[(g(),L(le,null,ue(v,(h,k)=>d("div",{key:k,class:"mb-6"},[d("div",ha,[d("div",null,[d("div",_a,"Existing "+T(h)+":",1),d("div",wa,T(k==="date_of_birth"?q(a)(o.data[k]):o.data[k]||"—"),1)]),p[10]||(p[10]=d("div",{class:"absolute top-0 bottom-0 left-1/2 w-px bg-gray-300"},null,-1)),d("div",null,[d("div",ka,"New "+T(h)+":",1),k!=="date_of_birth"?(g(),S(ee,{key:0,modelValue:q(c).requested_changes[k],"onUpdate:modelValue":C=>q(c).requested_changes[k]=C,outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])):(g(),S(ee,{key:1,modelValue:q(c).requested_changes[k],"onUpdate:modelValue":C=>q(c).requested_changes[k]=C,type:"date",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])),q(c).requested_changes[k]?(g(),L("div",xa,[d("div",qa," Required Documents for "+T(h)+": ",1),(g(!0),L(le,null,ue(f[k],C=>(g(),L("div",{key:C,class:"mb-3"},[t(He,{filled:"",modelValue:q(c).documents[C],"onUpdate:modelValue":y=>q(c).documents[C]=y,label:C,accept:".pdf,.jpg,.jpeg,.png",clearable:"",class:"q-mt-md"},null,8,["modelValue","onUpdate:modelValue","label"])]))),128))])):A("",!0)])]),t($e,{spaced:"",class:"q-my-md"})])),64))]),_:1}),t(ye,{align:"right"},{default:l(()=>[t(E,{flat:"",label:"Clear",color:"red",onClick:u}),me(t(E,{flat:"",label:"Cancel"},null,512),[[De]]),t(E,{label:"Submit",color:"primary",loading:q(c).processing,onClick:n},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Ta={__name:"RequestTransfer",props:["data","office"],setup(e){const{formatDate:a}=Ee(),o=e,r=xe(),s=z(!1),c=be({requested_office_id:""}),f=P(()=>{var u,n;return((n=(u=o.data.transfer_requests)==null?void 0:u.slice(-1)[0])==null?void 0:n.approval_status)==="pending"}),v=()=>{c.post(route("transfer.request",o.data),{onStart:()=>{r.loading.show()},onFinish:()=>{r.loading.hide(),s.value=!1,c.reset(),r.notify({type:"positive",message:"Transfer Requested",position:"bottom"})},onError:u=>{Object.values(u).forEach(n=>{r.notify({type:"negative",message:n,position:"bottom"})})}})};return(u,n)=>(g(),L(le,null,[t(M,{class:"q-mt-md"},{default:l(()=>[t(j,{class:"flex items-center justify-between"},{default:l(()=>[n[3]||(n[3]=d("div",{class:"stitle text-lg font-bold"},"Request Transfer",-1)),d("div",null,[t(E,{label:"Request Transfer",color:"primary",disable:f.value,onClick:n[0]||(n[0]=i=>s.value=!0)},null,8,["disable"])])]),_:1,__:[3]}),t($e),t(j,null,{default:l(()=>[n[4]||(n[4]=d("div",{class:"stitle text-md font-semibold q-mb-sm"},"Previous Requests",-1)),t(Dt,{rows:e.data.transfer_requests,columns:[{name:"id",label:"ID",field:"id",align:"left"},{name:"current_office",label:"Current Office",field:i=>{var p;return(p=i.current_office)==null?void 0:p.name}},{name:"requested_office",label:"Requested Office",field:i=>{var p;return(p=i.requested_office)==null?void 0:p.name}},{name:"status",label:"Status",field:"approval_status"},{name:"date",label:"Request Date",field:i=>q(a)(i.request_date)}],"row-key":"id",flat:"",bordered:""},null,8,["rows","columns"])]),_:1,__:[4]})]),_:1}),t(Re,{modelValue:s.value,"onUpdate:modelValue":n[2]||(n[2]=i=>s.value=i),persistent:""},{default:l(()=>[t(M,{style:{"min-width":"400px"}},{default:l(()=>[t(j,null,{default:l(()=>n[5]||(n[5]=[d("div",{class:"text-h6"},"Select Requested Office",-1)])),_:1,__:[5]}),t(j,null,{default:l(()=>[t(lt,{modelValue:q(c).requested_office_id,"onUpdate:modelValue":n[1]||(n[1]=i=>q(c).requested_office_id=i),options:e.office,"option-value":"id","option-label":"name",label:"Office",dense:"",outlined:""},null,8,["modelValue","options"])]),_:1}),t(ye,{align:"right"},{default:l(()=>[me(t(E,{flat:"",label:"Cancel",color:"negative"},null,512),[[De]]),t(E,{flat:"",label:"Submit",color:"primary",onClick:v})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Sa=Rt(Ta,[["__scopeId","data-v-f7de171d"]]),$a=Ae({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:a}){const o=_t(qt,Be);if(o===Be)return console.error("QTimelineEntry needs to be child of QTimeline"),Be;const r=P(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),s=P(()=>`q-timeline__dot text-${e.color||o.color}`),c=P(()=>o.layout==="comfortable"&&o.side==="left");return()=>{const f=ol(a.default,[]);if(e.body!==void 0&&f.unshift(e.body),e.heading===!0){const n=[D("div"),D("div"),D(e.tag,{class:"q-timeline__heading-title"},f)];return D("div",{class:"q-timeline__heading"},c.value===!0?n.reverse():n)}let v;e.icon!==void 0?v=[D(ve,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(v=[D("img",{class:"q-timeline__dot-img",src:e.avatar})]);const u=[D("div",{class:"q-timeline__subtitle"},[D("span",{},je(a.subtitle,[e.subtitle]))]),D("div",{class:s.value},v),D("div",{class:"q-timeline__content"},[D("h6",{class:"q-timeline__title"},je(a.title,[e.title]))].concat(f))];return D("li",{class:r.value},c.value===!0?u.reverse():u)}}}),Da=Ae({name:"QTimeline",props:{...Ct,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:a}){const o=Qe(),r=Tt(e,o.proxy.$q);xt(qt,e);const s=P(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(r.value===!0?" q-timeline--dark":""));return()=>D("ul",{class:s.value},je(a.default))}}),Ra={class:"flex items-center justify-between q-pa-md bg-white"},Ea={class:"flex q-gutter-sm"},Pa={key:0},Va={class:"flex items-center justify-between"},La={key:1,class:"text-subtitle2 text-grey-7 q-pa-md"},Oa={key:0},Aa={key:1},Ba={__name:"Transfer",props:["data","office","canCreateTransfer","canDeleteTransfer"],setup(e){const a=e,o=xe(),r=z(!1),s=z(!1),c=be({old_office_id:null,new_office_id:null,transfer_date:"",is_present_transfer:!1}),f=P(()=>{var i;return[...((i=a.data)==null?void 0:i.transfers)||[]].sort((p,h)=>new Date(p.transfer_date)-new Date(h.transfer_date))});function v(i){return new Date(i).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})}const u=i=>{c.is_present_transfer=s.value,c.post(route("transfer.store",a.data),{onStart:()=>{o.loading.show(),c.reset()},onFinish:()=>{o.loading.hide(),r.value=!1,c.reset()},onError:p=>{Object.values(p).forEach(h=>{o.notify({type:"negative",message:h,position:"bottom"})})}})},n=i=>{o.dialog({title:"Confirmation",message:"Do you want to delete?",ok:"Yes",cancel:"No"}).onOk(()=>{tt.delete(route("transfer.destroy",i),{onStart:p=>o.loading.show(),onFinish:p=>o.loading.hide(),preserveState:!1})})};return de(s,i=>{i?(c.old_office_id=a.data.office,c.transfer_date=new Date().toISOString().split("T")[0]):(c.old_office_id=null,c.transfer_date="")}),(i,p)=>(g(),L(le,null,[t(M,{class:"q-mt-md"},{default:l(()=>[d("div",Ra,[p[7]||(p[7]=d("div",null,[d("div",{class:"stitle"},"Transfer History")],-1)),d("div",Ea,[e.canCreateTransfer?(g(),S(E,{key:0,onClick:p[0]||(p[0]=h=>r.value=!0),color:"btn-primary",icon:"add"})):A("",!0)])]),t(j,null,{default:l(()=>[f.value.length>0?(g(),L("div",Pa,[t(Da,{color:"primary",class:"q-pa-md"},{default:l(()=>[(g(!0),L(le,null,ue(f.value,(h,k)=>(g(),S($a,{key:h.id,title:v(h.transfer_date),icon:k===f.value.length-1?"flag":"swap_horiz"},{subtitle:l(()=>[d("div",Va,[d("span",null,"Transfer #"+T(k+1),1),e.canDeleteTransfer?(g(),S(E,{key:0,icon:"delete",color:"red",flat:"",dense:"",size:"m",onClick:C=>n(h.id),title:"Delete Transfer"},null,8,["onClick"])):A("",!0)])]),default:l(()=>{var C,y;return[d("div",null,[p[8]||(p[8]=b(" From ")),d("strong",null,T(((C=h.old_office)==null?void 0:C.name)||"Unknown Office"),1),p[9]||(p[9]=b(" to ")),d("strong",null,T(((y=h.new_office)==null?void 0:y.name)||"Unknown Office"),1)])]}),_:2},1032,["title","icon"]))),128))]),_:1})])):(g(),L("div",La," No transfer history found "))]),_:1})]),_:1}),t(Re,{modelValue:r.value,"onUpdate:modelValue":p[6]||(p[6]=h=>r.value=h)},{default:l(()=>[t(M,{style:{"min-width":"400px"}},{default:l(()=>[t(j,null,{default:l(()=>p[10]||(p[10]=[d("div",{class:"stitle"},"Add Transfer",-1)])),_:1,__:[10]}),t(j,{class:"q-gutter-md"},{default:l(()=>[t(sl,{modelValue:s.value,"onUpdate:modelValue":p[1]||(p[1]=h=>s.value=h),label:"Is Present Transfer?",color:"primary"},null,8,["modelValue"]),s.value?(g(),L("div",Oa,[t(ee,{modelValue:e.data.office.name,"onUpdate:modelValue":p[2]||(p[2]=h=>e.data.office.name=h),label:"Old Office",dense:"",outlined:"",readonly:""},null,8,["modelValue"])])):(g(),L("div",Aa,[t(lt,{modelValue:q(c).old_office_id,"onUpdate:modelValue":p[3]||(p[3]=h=>q(c).old_office_id=h),options:e.office,"option-value":"id","option-label":"name",label:"Old Office",dense:"",outlined:""},null,8,["modelValue","options"])])),t(lt,{modelValue:q(c).new_office_id,"onUpdate:modelValue":p[4]||(p[4]=h=>q(c).new_office_id=h),options:e.office,"option-value":"id","option-label":"name",label:"New Office",dense:"",outlined:""},null,8,["modelValue","options"]),t(ee,{modelValue:q(c).transfer_date,"onUpdate:modelValue":p[5]||(p[5]=h=>q(c).transfer_date=h),type:"date",label:"Transfer Date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(ye,{align:"right"},{default:l(()=>[me(t(E,{flat:"",label:"Cancel"},null,512),[[De]]),t(E,{flat:"",label:"Submit",color:"primary",onClick:u})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},ja=Ae({name:"QSpace",setup(){const e=D("div",{class:"q-space"});return()=>e}}),Ua={__name:"DeletionDialog",props:{modelValue:Boolean,employee:Object},emits:["update:modelValue"],setup(e,{emit:a}){const o=xe(),r=e,s=a,c=z(r.modelValue);de(()=>r.modelValue,u=>c.value=u),de(c,u=>s("update:modelValue",u));const f=be({seniority_list:"",reason:"",year:new Date().getFullYear(),remark:"",supporting_document:null});function v(){f.post(route("deletion.store",r.employee),{preserveScroll:!0,onSuccess:()=>{c.value=!1,f.reset(),o.notify({type:"positive",message:"Employee Deleted successfully."})}})}return(u,n)=>(g(),S(Re,{modelValue:c.value,"onUpdate:modelValue":n[5]||(n[5]=i=>c.value=i)},{default:l(()=>[t(M,{style:{"min-width":"400px"}},{default:l(()=>[t(j,{class:"row items-center q-pa-sm bg-negative text-white"},{default:l(()=>[n[6]||(n[6]=d("div",{class:"text-h6"},"Employee Deletion Details",-1)),t(ja),me(t(E,{icon:"close",flat:"",round:"",dense:""},null,512),[[De]])]),_:1,__:[6]}),t(Et,{onSubmit:St(v,["prevent"])},{default:l(()=>[t(j,{class:"q-gutter-md"},{default:l(()=>[t(ee,{modelValue:q(f).seniority_list,"onUpdate:modelValue":n[0]||(n[0]=i=>q(f).seniority_list=i),label:"Seniority List",dense:"",outlined:"",type:"number"},null,8,["modelValue"]),t(ee,{modelValue:q(f).reason,"onUpdate:modelValue":n[1]||(n[1]=i=>q(f).reason=i),label:"Reason",dense:"",outlined:"",required:""},null,8,["modelValue"]),t(ee,{modelValue:q(f).year,"onUpdate:modelValue":n[2]||(n[2]=i=>q(f).year=i),label:"Year",dense:"",outlined:"",type:"number"},null,8,["modelValue"]),t(ee,{modelValue:q(f).remark,"onUpdate:modelValue":n[3]||(n[3]=i=>q(f).remark=i),label:"Remark",type:"textarea",dense:"",outlined:""},null,8,["modelValue"]),t(He,{modelValue:q(f).supporting_document,"onUpdate:modelValue":n[4]||(n[4]=i=>q(f).supporting_document=i),label:"Supporting Document",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(ye,{align:"right",class:"q-pa-sm"},{default:l(()=>[me(t(E,{flat:"",label:"Cancel"},null,512),[[De]]),t(E,{color:"negative",label:"Submit Deletion",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},za={class:"flex items-center justify-between q-pa-md bg-white"},Na={class:"flex q-gutter-sm"},Qa={__name:"Deletion",props:["deletion","canEditDelete"],setup(e){const a=xe(),o=e,r=z(!1),s=be({reason:o.deletion.reason||"",seniority_list:o.deletion.seniority_list||"",year:o.deletion.year||"",remark:o.deletion.remark||"",supporting_document:null}),c=()=>{s.post(route("deletion.update",o.deletion),{preserveScroll:!0,onSuccess:()=>{r.value=!1,a.notify({type:"positive",message:"Deleted details updated successfully."})}})},f=v=>{window.open(v,"_blank")};return(v,u)=>(g(),L(le,null,[t(M,{class:"q-mt-md"},{default:l(()=>[d("div",za,[u[8]||(u[8]=d("div",null,[d("div",{class:"stitle text-red"},"Deletion Detail")],-1)),d("div",Na,[e.canEditDelete?(g(),S(E,{key:0,onClick:u[0]||(u[0]=n=>r.value=!0),color:"btn-primary",icon:"edit"})):A("",!0)])]),t(j,null,{default:l(()=>[t(Me,{class:"q-mt-sm"},{default:l(()=>[t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[9]||(u[9]=[b("Reason:")])),_:1,__:[9]}),t(w,{class:"text-label"},{default:l(()=>[b(T(e.deletion.reason),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[10]||(u[10]=[b("Seniority List:")])),_:1,__:[10]}),t(w,{class:"text-label"},{default:l(()=>[b(T(e.deletion.seniority_list),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[11]||(u[11]=[b("Year:")])),_:1,__:[11]}),t(w,{class:"text-label"},{default:l(()=>[b(T(e.deletion.year),1)]),_:1})]),_:1}),e.deletion.remark?(g(),S(V,{key:0},{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[12]||(u[12]=[b("Remark:")])),_:1,__:[12]}),t(w,{class:"text-label"},{default:l(()=>[b(T(e.deletion.remark),1)]),_:1})]),_:1})):A("",!0),e.deletion.supporting_document?(g(),S(V,{key:1},{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[13]||(u[13]=[b("Supporting Document:")])),_:1,__:[13]}),t(w,{class:"text-label"},{default:l(()=>[t(E,{dense:"",flat:"",icon:"visibility",href:`/storage/${e.deletion.supporting_document}`,target:"_blank"},null,8,["href"])]),_:1})]),_:1})):A("",!0)]),_:1})]),_:1})]),_:1}),t(Re,{modelValue:r.value,"onUpdate:modelValue":u[7]||(u[7]=n=>r.value=n)},{default:l(()=>[t(M,{style:{"min-width":"500px","max-width":"90vw"}},{default:l(()=>[t(j,{class:"bg-negative text-white"},{default:l(()=>u[14]||(u[14]=[d("div",{class:"text-h6"},"Edit Deletion Detail",-1)])),_:1,__:[14]}),t(Et,{onSubmit:St(c,["prevent"])},{default:l(()=>[t(j,{class:"q-gutter-md"},{default:l(()=>[t(ee,{modelValue:q(s).reason,"onUpdate:modelValue":u[1]||(u[1]=n=>q(s).reason=n),label:"Reason",outlined:"",dense:"",required:""},null,8,["modelValue"]),t(ee,{modelValue:q(s).seniority_list,"onUpdate:modelValue":u[2]||(u[2]=n=>q(s).seniority_list=n),label:"Seniority List",outlined:"",dense:""},null,8,["modelValue"]),t(ee,{modelValue:q(s).year,"onUpdate:modelValue":u[3]||(u[3]=n=>q(s).year=n),label:"Year",outlined:"",dense:"",type:"number"},null,8,["modelValue"]),t(ee,{modelValue:q(s).remark,"onUpdate:modelValue":u[4]||(u[4]=n=>q(s).remark=n),label:"Remark",outlined:"",dense:"",type:"textarea"},null,8,["modelValue"]),t(He,{modelValue:q(s).supporting_document,"onUpdate:modelValue":u[6]||(u[6]=n=>q(s).supporting_document=n),label:"Supporting Document",outlined:"",dense:"",accept:".pdf,.png,.jpg,.jpeg"},il({_:2},[e.deletion.supporting_document?{name:"append",fn:l(()=>[t(E,{round:"",dense:"",flat:"",icon:"visibility",href:`/storage/${e.deletion.supporting_document}`,onClick:u[5]||(u[5]=n=>f(`/storage/${e.deletion.supporting_document}`)),class:"q-ml-sm"},null,8,["href"])]),key:"0"}:void 0]),1032,["modelValue"])]),_:1}),t(ye,{align:"right"},{default:l(()=>[me(t(E,{flat:"",label:"Cancel"},null,512),[[De]]),t(E,{color:"primary",label:"Update",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Fa={class:"flex items-center justify-between q-pa-md bg-white"},Ia={class:"flex q-gutter-sm"},Ma={key:0,class:"text-grey-7 text-center q-pa-md"},Ha={class:"text-h6"},Wa={__name:"Remuneration",props:{data:Object,canCreateRemuneration:Boolean},setup(e){const{formatDate:a}=Ee(),o=e,r=z(!1),s=z(!1),c=be({remuneration:"",next_increment_date:""}),f=(u=!1)=>{s.value=u,u&&o.data.remuneration_detail?(c.remuneration=o.data.remuneration_detail.remuneration,c.next_increment_date=o.data.remuneration_detail.next_increment_date):c.reset(),r.value=!0},v=()=>{s.value?c.put(route("remuneration.update",o.data.id),{onSuccess:()=>{r.value=!1}}):c.post(route("remuneration.store",o.data.id),{onSuccess:()=>{r.value=!1,c.reset()}})};return(u,n)=>(g(),L(le,null,[t(M,{class:"q-mt-md"},{default:l(()=>[d("div",Fa,[n[4]||(n[4]=d("div",null,[d("div",{class:"stitle"},"Remuneration Detail")],-1)),d("div",Ia,[e.canCreateRemuneration?(g(),S(E,{key:0,onClick:n[0]||(n[0]=i=>f(!!e.data.remuneration_detail)),color:"btn-primary",icon:e.data.remuneration_detail?"edit":"add"},null,8,["icon"])):A("",!0)])]),t(j,null,{default:l(()=>[e.data.remuneration_detail?(g(),S(Me,{key:1,class:"q-mt-sm"},{default:l(()=>[t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[5]||(n[5]=[b("Remuneration:")])),_:1,__:[5]}),t(w,{class:"text-label"},{default:l(()=>[b(" ₹ "+T(e.data.remuneration_detail.remuneration.toLocaleString()),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[6]||(n[6]=[b("Medical Allowance (%):")])),_:1,__:[6]}),t(w,{class:"text-label"},{default:l(()=>[b(T(e.data.remuneration_detail.medical_percentage),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[7]||(n[7]=[b("Medical Allowance:")])),_:1,__:[7]}),t(w,{class:"text-label"},{default:l(()=>[b(" ₹ "+T(e.data.remuneration_detail.medical_amount.toLocaleString()),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[8]||(n[8]=[b("Total:")])),_:1,__:[8]}),t(w,{class:"text-label"},{default:l(()=>[b(" ₹ "+T(e.data.remuneration_detail.total.toLocaleString()),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[9]||(n[9]=[b("Monthly Remuneration:")])),_:1,__:[9]}),t(w,{class:"text-label"},{default:l(()=>[b(" ₹ "+T(e.data.remuneration_detail.round_total.toLocaleString()),1)]),_:1})]),_:1}),t($e,{spaced:""}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[10]||(n[10]=[b("Date of next Increment:")])),_:1,__:[10]}),t(w,{class:"text-label"},{default:l(()=>[b(T(q(a)(e.data.remuneration_detail.next_increment_date)),1)]),_:1})]),_:1})]),_:1})):(g(),L("div",Ma," No remuneration data available. "))]),_:1})]),_:1}),t(Re,{modelValue:r.value,"onUpdate:modelValue":n[3]||(n[3]=i=>r.value=i)},{default:l(()=>[t(M,{style:{"min-width":"400px"}},{default:l(()=>[t(j,null,{default:l(()=>[d("div",Ha,T(s.value?"Edit":"Add")+" Remuneration",1)]),_:1}),t(j,{class:"q-gutter-md"},{default:l(()=>[t(ee,{label:"Remuneration",type:"number",modelValue:q(c).remuneration,"onUpdate:modelValue":n[1]||(n[1]=i=>q(c).remuneration=i),outlined:"",dense:""},null,8,["modelValue"]),t(ee,{label:"Next Increment Date",type:"date",modelValue:q(c).next_increment_date,"onUpdate:modelValue":n[2]||(n[2]=i=>q(c).next_increment_date=i),outlined:"",dense:""},null,8,["modelValue"])]),_:1}),t(ye,{align:"right"},{default:l(()=>[me(t(E,{flat:"",label:"Cancel"},null,512),[[De]]),t(E,{color:"primary",label:s.value?"Update":"Save",onClick:v},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};function Pt(e,a){if(a&&e===a)return null;const o=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(o)===!0)return e;const r=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,s=r.display;return s==="block"||s==="table"?e:Pt(e.parentNode)}function Ge(e,a,o){return!e||e===document.body?!1:o===!0&&e===a||(a===document?document.body:a).contains(e.parentNode)}function Vt(e,a,o){if(o||(o=document.createRange(),o.selectNode(e),o.setStart(e,0)),a.count===0)o.setEnd(e,a.count);else if(a.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<a.count?a.count-=e.textContent.length:(o.setEnd(e,a.count),a.count=0);else for(let r=0;a.count!==0&&r<e.childNodes.length;r++)o=Vt(e.childNodes[r],a,o);return o}const Ka=/^https?:\/\//;class Ya{constructor(a,o){this.el=a,this.eVm=o,this._range=null}get selection(){if(this.el){const a=document.getSelection();if(Ge(a.anchorNode,this.el,!0)&&Ge(a.focusNode,this.el,!0))return a}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const a=this.selection;return a!=null&&a.rangeCount?a.getRangeAt(0):this._range}get parent(){const a=this.range;if(a!==null){const o=a.startContainer;return o.nodeType===document.ELEMENT_NODE?o:o.parentNode}return null}get blockParent(){const a=this.parent;return a!==null?Pt(a,this.el):null}save(a=this.range){a!==null&&(this._range=a)}restore(a=this._range){const o=document.createRange(),r=document.getSelection();a!==null?(o.setStart(a.startContainer,a.startOffset),o.setEnd(a.endContainer,a.endOffset),r.removeAllRanges(),r.addRange(o)):(r.selectAllChildren(this.el),r.collapseToEnd())}savePosition(){let a=-1,o;const r=document.getSelection(),s=this.el.parentNode;if(r.focusNode&&Ge(r.focusNode,s))for(o=r.focusNode,a=r.focusOffset;o&&o!==s;)o!==this.el&&o.previousSibling?(o=o.previousSibling,a+=o.textContent.length):o=o.parentNode;this.savedPos=a}restorePosition(a=0){if(this.savedPos>0&&this.savedPos<a){const o=window.getSelection(),r=Vt(this.el,{count:this.savedPos});r&&(r.collapse(!1),o.removeAllRanges(),o.addRange(r))}}hasParent(a,o){const r=o?this.parent:this.blockParent;return r!==null?r.nodeName.toLowerCase()===a.toLowerCase():!1}hasParents(a,o,r=this.parent){return r===null?!1:a.includes(r.nodeName.toLowerCase())===!0?!0:o===!0?this.hasParents(a,o,r.parentNode):!1}is(a,o){if(this.selection===null)return!1;switch(a){case"formatBlock":return o==="DIV"&&this.parent===this.el||this.hasParent(o,o==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(a)===o;case"fontName":const r=document.queryCommandValue(a);return r===`"${o}"`||r===o;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const s=document.queryCommandState(a);return o!==void 0?s===o:s}}getParentAttribute(a){return this.parent!==null?this.parent.getAttribute(a):null}can(a){if(a==="outdent")return this.hasParents(["blockquote","li"],!0);if(a==="indent")return this.hasParents(["li"],!0);if(a==="link")return this.selection!==null||this.is("link")}apply(a,o,r=rl){if(a==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(o)&&this.is(a,o)&&(a="outdent",o=null),o==="PRE"&&this.is(a,"PRE")&&(o="P");else if(a==="print"){r();const s=window.open();s.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),s.print(),s.close();return}else if(a==="link"){const s=this.getParentAttribute("href");if(s===null){const c=this.selectWord(this.selection),f=c?c.toString():"";if(!f.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=Ka.test(f)?f:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(c.getRangeAt(0))}else this.eVm.editLinkUrl.value=s,this.range.selectNodeContents(this.parent),this.save();return}else if(a==="fullscreen"){this.eVm.toggleFullscreen(),r();return}else if(a==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),r();return}document.execCommand(a,!1,o),r()}selectWord(a){if(a===null||a.isCollapsed!==!0||a.modify===void 0)return a;const o=document.createRange();o.setStart(a.anchorNode,a.anchorOffset),o.setEnd(a.focusNode,a.focusOffset);const r=o.collapsed?["backward","forward"]:["forward","backward"];o.detach();const s=a.focusNode,c=a.focusOffset;return a.collapse(a.anchorNode,a.anchorOffset),a.modify("move",r[0],"character"),a.modify("move",r[1],"word"),a.extend(s,c),a.modify("extend",r[1],"character"),a.modify("extend",r[0],"word"),a}}function Lt(e,a,o){a.handler?a.handler(e,o,o.caret):o.runCmd(a.cmd,a.param)}function ot(e){return D("div",{class:"q-editor__toolbar-group"},e)}function Ot(e,a,o,r=!1){const s=r||(a.type==="toggle"?a.toggled?a.toggled(e):a.cmd&&e.caret.is(a.cmd,a.param):!1),c=[];if(a.tip&&e.$q.platform.is.desktop){const f=a.key?D("div",[D("small",`(CTRL + ${String.fromCharCode(a.key)})`)]):null;c.push(D(Ne,{delay:1e3},()=>[D("div",{innerHTML:a.tip}),f]))}return D(E,{...e.buttonProps.value,icon:a.icon!==null?a.icon:void 0,color:s?a.toggleColor||e.props.toolbarToggleColor:a.color||e.props.toolbarColor,textColor:s&&!e.props.toolbarPush?null:a.textColor||e.props.toolbarTextColor,label:a.label,disable:a.disable?typeof a.disable=="function"?a.disable(e):!0:!1,size:"sm",onClick(f){o==null||o(),Lt(f,a,e)}},()=>c)}function Ja(e,a){const o=a.list==="only-icons";let r=a.label,s=a.icon!==null?a.icon:void 0,c,f;function v(){n.component.proxy.hide()}if(o)f=a.options.map(i=>{const p=i.type===void 0?e.caret.is(i.cmd,i.param):!1;return p&&(r=i.tip,s=i.icon!==null?i.icon:void 0),Ot(e,i,v,p)}),c=e.toolbarBackgroundClass.value,f=[ot(f)];else{const i=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,p=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,h=a.list==="no-icons";f=a.options.map(k=>{const C=k.disable?k.disable(e):!1,y=k.type===void 0?e.caret.is(k.cmd,k.param):!1;y&&(r=k.tip,s=k.icon!==null?k.icon:void 0);const H=k.htmlTip;return D(V,{active:y,activeClass:i,clickable:!0,disable:C,dense:!0,onClick(K){var ne;v(),(K==null?void 0:K.qAvoidFocus)!==!0&&((ne=e.contentRef.value)==null||ne.focus()),e.caret.restore(),Lt(K,k,e)}},()=>[h===!0?null:D(w,{class:y?i:p,side:!0},()=>D(ve,{name:k.icon!==null?k.icon:void 0})),D(w,H?()=>D("div",{class:"text-no-wrap",innerHTML:k.htmlTip}):k.tip?()=>D("div",{class:"text-no-wrap"},k.tip):void 0)])}),c=[e.toolbarBackgroundClass.value,p]}const u=a.highlight&&r!==a.label,n=D($t,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:u?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:u&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:a.fixedLabel?a.label:r,icon:a.fixedIcon?a.icon!==null?a.icon:void 0:s,contentClass:c,onShow:i=>e.emit("dropdownShow",i),onHide:i=>e.emit("dropdownHide",i),onBeforeShow:i=>e.emit("dropdownBeforeShow",i),onBeforeHide:i=>e.emit("dropdownBeforeHide",i)},()=>f);return n}function Ga(e){if(e.caret)return e.buttons.value.filter(a=>!e.isViewingSource.value||a.find(o=>o.cmd==="viewsource")).map(a=>ot(a.map(o=>e.isViewingSource.value&&o.cmd!=="viewsource"?!1:o.type==="slot"?je(e.slots[o.slot]):o.type==="dropdown"?Ja(e,o):Ot(e,o))))}function Xa(e,a,o,r={}){const s=Object.keys(r);if(s.length===0)return{};const c={default_font:{cmd:"fontName",param:e,icon:o,tip:a}};return s.forEach(f=>{const v=r[f];c[f]={cmd:"fontName",param:v,icon:o,tip:v,htmlTip:`<font face="${v}">${v}</font>`}}),c}function Za(e){if(e.caret){const a=e.props.toolbarColor||e.props.toolbarTextColor;let o=e.editLinkUrl.value;const r=()=>{e.caret.restore(),o!==e.editLinkUrl.value&&document.execCommand("createLink",!1,o===""?" ":o),e.editLinkUrl.value=null};return[D("div",{class:`q-mx-xs text-${a}`},`${e.$q.lang.editor.url}: `),D("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:o,onInput:s=>{ul(s),o=s.target.value},onKeydown:s=>{if(at(s)!==!0)switch(s.keyCode){case 13:return mt(s),r();case 27:mt(s),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),ot([D(E,{key:"qedt_btm_rem",tabindex:-1,...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),D(E,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:r})])]}}const en=Object.prototype.toString,Xe=Object.prototype.hasOwnProperty,tn=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function ht(e){if(e!==Object(e)||tn.has(en.call(e))===!0||e.constructor&&Xe.call(e,"constructor")===!1&&Xe.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let a;for(a in e);return a===void 0||Xe.call(e,a)}function At(){let e,a,o,r,s,c,f=arguments[0]||{},v=1,u=!1;const n=arguments.length;for(typeof f=="boolean"&&(u=f,f=arguments[1]||{},v=2),Object(f)!==f&&typeof f!="function"&&(f={}),n===v&&(f=this,v--);v<n;v++)if((e=arguments[v])!==null)for(a in e)o=f[a],r=e[a],f!==r&&(u===!0&&r&&((s=Array.isArray(r))||ht(r)===!0)?(s===!0?c=Array.isArray(o)===!0?o:[]:c=ht(o)===!0?o:{},f[a]=At(u,c,r)):r!==void 0&&(f[a]=r));return f}const ln=Ae({name:"QEditor",props:{...Ct,...Cl,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(a=>a.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...ql,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:a,emit:o}){const{proxy:r}=Qe(),{$q:s}=r,c=Tt(e,s),{inFullscreen:f,toggleFullscreen:v}=Tl(),u=dl(),n=z(null),i=z(null),p=z(null),h=z(!1),k=P(()=>!e.readonly&&!e.disable);let C,y,H=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),C=window.getComputedStyle(document.body).fontFamily;const K=P(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),ne=P(()=>({type:"a",flat:e.toolbarOutline!==!0&&e.toolbarPush!==!0,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!k.value,size:"sm"})),O=P(()=>{const m=s.lang.editor,_=s.iconSet.editor;return{bold:{cmd:"bold",icon:_.bold,tip:m.bold,key:66},italic:{cmd:"italic",icon:_.italic,tip:m.italic,key:73},strike:{cmd:"strikeThrough",icon:_.strikethrough,tip:m.strikethrough,key:83},underline:{cmd:"underline",icon:_.underline,tip:m.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:_.unorderedList,tip:m.unorderedList},ordered:{cmd:"insertOrderedList",icon:_.orderedList,tip:m.orderedList},subscript:{cmd:"subscript",icon:_.subscript,tip:m.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:_.superscript,tip:m.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:N=>N.caret&&!N.caret.can("link"),icon:_.hyperlink,tip:m.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:_.toggleFullscreen,tip:m.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:_.viewSource,tip:m.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:_.quote,tip:m.quote,key:81},left:{cmd:"justifyLeft",icon:_.left,tip:m.left},center:{cmd:"justifyCenter",icon:_.center,tip:m.center},right:{cmd:"justifyRight",icon:_.right,tip:m.right},justify:{cmd:"justifyFull",icon:_.justify,tip:m.justify},print:{type:"no-state",cmd:"print",icon:_.print,tip:m.print,key:80},outdent:{type:"no-state",disable:N=>N.caret&&!N.caret.can("outdent"),cmd:"outdent",icon:_.outdent,tip:m.outdent},indent:{type:"no-state",disable:N=>N.caret&&!N.caret.can("indent"),cmd:"indent",icon:_.indent,tip:m.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:_.removeFormat,tip:m.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:_.hr,tip:m.hr},undo:{type:"no-state",cmd:"undo",icon:_.undo,tip:m.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:_.redo,tip:m.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:_.heading1||_.heading,tip:m.heading1,htmlTip:`<h1 class="q-ma-none">${m.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:_.heading2||_.heading,tip:m.heading2,htmlTip:`<h2 class="q-ma-none">${m.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:_.heading3||_.heading,tip:m.heading3,htmlTip:`<h3 class="q-ma-none">${m.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:_.heading4||_.heading,tip:m.heading4,htmlTip:`<h4 class="q-ma-none">${m.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:_.heading5||_.heading,tip:m.heading5,htmlTip:`<h5 class="q-ma-none">${m.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:_.heading6||_.heading,tip:m.heading6,htmlTip:`<h6 class="q-ma-none">${m.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:_.heading,tip:m.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:_.code,htmlTip:`<code>${m.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:_.size1||_.size,tip:m.size1,htmlTip:`<font size="1">${m.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:_.size2||_.size,tip:m.size2,htmlTip:`<font size="2">${m.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:_.size3||_.size,tip:m.size3,htmlTip:`<font size="3">${m.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:_.size4||_.size,tip:m.size4,htmlTip:`<font size="4">${m.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:_.size5||_.size,tip:m.size5,htmlTip:`<font size="5">${m.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:_.size6||_.size,tip:m.size6,htmlTip:`<font size="6">${m.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:_.size7||_.size,tip:m.size7,htmlTip:`<font size="7">${m.size7}</font>`}}}),Y=P(()=>{const m=e.definitions||{},_=e.definitions||e.fonts?At(!0,{},O.value,m,Xa(C,s.lang.editor.defaultFont,s.iconSet.editor.font,e.fonts)):O.value;return e.toolbar.map(N=>N.map(Z=>{if(Z.options)return{type:"dropdown",icon:Z.icon,label:Z.label,size:"sm",dense:!0,fixedLabel:Z.fixedLabel,fixedIcon:Z.fixedIcon,highlight:Z.highlight,list:Z.list,options:Z.options.map(We=>_[We])};const re=_[Z];return re?re.type==="no-state"||m[Z]&&(re.cmd===void 0||O.value[re.cmd]&&O.value[re.cmd].type==="no-state")?re:Object.assign({type:"toggle"},re):{type:"slot",slot:Z}}))}),B={$q:s,props:e,slots:a,emit:o,inFullscreen:f,toggleFullscreen:v,runCmd:se,isViewingSource:h,editLinkUrl:p,toolbarBackgroundClass:K,buttonProps:ne,contentRef:i,buttons:Y,setContent:oe};de(()=>e.modelValue,m=>{H!==m&&(H=m,oe(m,!0))}),de(p,m=>{o(`link${m?"Show":"Hide"}`)});const W=P(()=>e.toolbar&&e.toolbar.length!==0),X=P(()=>{const m={},_=N=>{N.key&&(m[N.key]={cmd:N.cmd,param:N.param})};return Y.value.forEach(N=>{N.forEach(Z=>{Z.options?Z.options.forEach(_):_(Z)})}),m}),ae=P(()=>f.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),ge=P(()=>`q-editor q-editor--${h.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(f.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(c.value===!0?" q-editor--dark q-dark":"")),he=P(()=>[e.contentClass,"q-editor__content",{col:f.value,"overflow-auto":f.value||e.maxHeight}]),_e=P(()=>e.disable===!0?{"aria-disabled":"true"}:{});function R(){if(i.value!==null){const m=`inner${h.value===!0?"Text":"HTML"}`,_=i.value[m];_!==e.modelValue&&(H=_,o("update:modelValue",_))}}function ce(m){if(o("keydown",m),m.ctrlKey!==!0||at(m)===!0){I();return}const _=m.keyCode,N=X.value[_];if(N!==void 0){const{cmd:Z,param:re}=N;nt(m),se(Z,re,!1)}}function qe(m){I(),o("click",m)}function we(m){if(i.value!==null){const{scrollTop:_,scrollHeight:N}=i.value;y=N-_}B.caret.save(),o("blur",m)}function fe(m){cl(()=>{i.value!==null&&y!==void 0&&(i.value.scrollTop=i.value.scrollHeight-y)}),o("focus",m)}function Pe(m){const _=n.value;if(_!==null&&_.contains(m.target)===!0&&(m.relatedTarget===null||_.contains(m.relatedTarget)!==!0)){const N=`inner${h.value===!0?"Text":"HTML"}`;B.caret.restorePosition(i.value[N].length),I()}}function Ce(m){const _=n.value;_!==null&&_.contains(m.target)===!0&&(m.relatedTarget===null||_.contains(m.relatedTarget)!==!0)&&(B.caret.savePosition(),I())}function Ve(){y=void 0}function Le(m){B.caret.save()}function oe(m,_){if(i.value!==null){_===!0&&B.caret.savePosition();const N=`inner${h.value===!0?"Text":"HTML"}`;i.value[N]=m,_===!0&&(B.caret.restorePosition(i.value[N].length),I())}}function se(m,_,N=!0){pe(),B.caret.restore(),B.caret.apply(m,_,()=>{pe(),B.caret.save(),N&&I()})}function I(){setTimeout(()=>{p.value=null,r.$forceUpdate()},1)}function pe(){fl(()=>{var m;(m=i.value)==null||m.focus({preventScroll:!0})})}function ie(){return i.value}return kt(()=>{B.caret=r.caret=new Ya(i.value,B),oe(e.modelValue),I(),document.addEventListener("selectionchange",Le)}),ze(()=>{document.removeEventListener("selectionchange",Le)}),Object.assign(r,{runCmd:se,refreshToolbar:I,focus:pe,getContentEl:ie}),()=>{let m;if(W.value){const _=[D("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+K.value},Ga(B))];p.value!==null&&_.push(D("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+K.value},Za(B))),m=D("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},_)}return D("div",{ref:n,class:ge.value,style:{height:f.value===!0?"100%":null},..._e.value,onFocusin:Pe,onFocusout:Ce},[m,D("div",{ref:i,style:ae.value,class:he.value,contenteditable:k.value,placeholder:e.placeholder,...u.listeners.value,onInput:R,onKeydown:ce,onClick:qe,onBlur:we,onFocus:fe,onMousedown:Ve,onTouchstartPassive:Ve})])}}}),an={class:"flex items-center justify-between q-pa-md bg-white"},nn={class:"flex q-gutter-sm"},on={__name:"EngagementCard",props:{data:Object,canCreateEngagementCard:Boolean,canDownloadEngagementCard:Boolean},setup(e){var n,i;const a=e,o=be({html_content:((i=(n=a.data)==null?void 0:n.engagement_card)==null?void 0:i.content)||""}),r=z(!1),s=z(""),c=xe(),f=async()=>{r.value=!0;try{axios.get(route("engagement-card.show",a.data)).then(p=>{s.value=p.data,o.html_content=p.data})}catch{c.notify({type:"negative",message:"Failed to load card data"})}},v=()=>{o.post(route("engagement-card.store",a.data),{preserveScroll:!0,onSuccess:()=>{r.value=!1,c.notify({type:"positive",message:"Card saved successfully!"})}})},u=async()=>{try{const p=await axios.get(route("engagement-card.download",a.data),{responseType:"blob"}),h=window.URL.createObjectURL(new Blob([p.data],{type:"application/pdf"})),k=document.createElement("a");k.href=h,k.setAttribute("download",`EngagementCard_${a.data.id}.pdf`),document.body.appendChild(k),k.click(),k.remove()}catch{c.notify({type:"negative",message:"Failed to download PDF."})}};return(p,h)=>(g(),S(M,{class:"q-mt-md"},{default:l(()=>[d("div",an,[h[2]||(h[2]=d("div",null,[d("div",{class:"stitle"},"Engagement Card")],-1)),d("div",nn,[e.data.engagement_card&&e.canCreateEngagementCard?(g(),S(E,{key:0,color:"primary",icon:"edit",onClick:f})):A("",!0)])]),t(j,null,{default:l(()=>[!e.data.engagement_card&&e.canCreateEngagementCard?(g(),S(E,{key:0,color:"primary",label:"Create",onClick:f})):A("",!0),e.data.engagement_card&&e.canDownloadEngagementCard?(g(),S(E,{key:1,color:"primary",label:"Download",onClick:u})):A("",!0),t(Re,{modelValue:r.value,"onUpdate:modelValue":h[1]||(h[1]=k=>r.value=k),persistent:""},{default:l(()=>[t(M,{style:{width:"1000px","max-width":"100vw"}},{default:l(()=>[t(j,{class:"row items-center justify-between bg-primary text-white"},{default:l(()=>[h[3]||(h[3]=d("div",{class:"text-h6"},"Engagement Card",-1)),me(t(E,{dense:"",flat:"",icon:"close"},null,512),[[De]])]),_:1,__:[3]}),t(j,{style:{"flex-grow":"1",overflow:"auto",padding:"0"}},{default:l(()=>[t(ln,{modelValue:q(o).html_content,"onUpdate:modelValue":h[0]||(h[0]=k=>q(o).html_content=k),style:{width:"100%","max-height":"1100px"}},null,8,["modelValue"])]),_:1}),t(ye,{align:"right",style:{"flex-shrink":"0"}},{default:l(()=>[t(E,{color:"primary",label:"Save",onClick:v})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}},sn={class:"flex items-center justify-between q-pa-md bg-white"},rn={class:"row q-col-gutter-md"},un={class:"col-12 col-md-4"},dn={class:"column items-center q-gutter-sm"},cn={class:"stitle"},fn={class:"q-mt-lg full-width"},mn={class:"q-mt-lg flex items-center justify-center"},vn={class:"col-12 col-md-8"},gn={class:"row q-col-gutter-md"},pn={class:"col-12 col-md-7"},bn={class:"col-12 col-md-5"},Pn=Object.assign({layout:_l},{__name:"Show",props:["data","office","documentTypes","canCreate","canEdit","canDelete","canCreateRemuneration","canCreateTransfer","canDeleteTransfer","canCreateEngagementCard","canDownloadEngagementCard","canRequestEdit","canRequestDelete","canRequestTransfer","canApproveEdit","canApproveTransfer","canApproveDelete","canEditDelete"],setup(e){const{formatDate:a}=Ee(),o=e,r=z("document"),s=z(!1),c=P(()=>{var C;return!!((C=vt().props.roles)!=null&&C.find(y=>y==="Admin"))}),f=P(()=>{var C;return!!((C=vt().props.roles)!=null&&C.find(y=>y==="Manager"))}),v=P(()=>{const C=o.data.edit_requests;return C&&C.length?C[C.length-1]:null}),u=P(()=>{const C=o.data.deletion_requests;return C&&C.length?C[C.length-1]:null}),n=P(()=>{const C=o.data.transfer_requests;return C&&C.length?C[C.length-1]:null});function i(C){if(!C)return!0;const y=new Date,H=new Date(C);return(y-H)/(1e3*60*60*24)<=15}const p=P(()=>v.value?c.value?v.value.approval_status==="pending":f.value?v.value.approval_status!=="pending"&&i(v.value.approval_date):!1:!1),h=P(()=>u.value?c.value?u.value.approval_status==="pending":f.value?u.value.approval_status!=="pending"&&i(u.value.approval_date):!1:!1),k=P(()=>n.value?c.value?n.value.approval_status==="pending":f.value?n.value.approval_status!=="pending"&&i(n.value.approval_date):!1:!1);return(C,y)=>(g(),S(Ht,{class:"container",padding:""},{default:l(()=>[d("div",sn,[d("div",null,[y[5]||(y[5]=d("div",{class:"stitle"},"Employee Detail",-1)),t(Ft,{class:"text-dark"},{default:l(()=>[t(dt,{onClick:y[0]||(y[0]=H=>C.$inertia.get(C.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),t(dt,{label:"All Employees",to:C.route("mis.import")},null,8,["to"])]),_:1})])]),y[24]||(y[24]=d("br",null,null,-1)),t(M,{flat:""},{default:l(()=>[t(j,null,{default:l(()=>[d("div",rn,[d("div",un,[t(M,{class:"q-pa-md"},{default:l(()=>{var H,K,ne,O,Y,B;return[d("div",dn,[t(ml,{size:"96px"},{default:l(()=>{var W,X;return[(W=e.data)!=null&&W.avatar?(g(),S(Mt,{key:0,src:`/storage/${(X=e.data)==null?void 0:X.avatar}`},null,8,["src"])):(g(),S(ve,{key:1,name:"person",color:"primary"}))]}),_:1}),d("div",cn,T(e.data.name),1),t(wl,{color:((K=(H=e.data)==null?void 0:H.employment_type)==null?void 0:K.trim())==="Deleted"?"red-6":"grey-6","text-color":"white",class:"stitle",label:((O=(ne=e.data)==null?void 0:ne.employment_type)==null?void 0:O.trim())==="MR"?"Muster Roll":((B=(Y=e.data)==null?void 0:Y.employment_type)==null?void 0:B.trim())==="PE"?"Provisional":"Deleted",style:{padding:"8px"},rounded:""},null,8,["color","label"]),d("div",fn,[t(Me,{class:"rounded-borders"},{default:l(()=>{var W,X,ae,ge,he,_e;return[t(V,null,{default:l(()=>[t(w,{class:"text-label"},{default:l(()=>y[6]||(y[6]=[b("Details")])),_:1,__:[6]})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[7]||(y[7]=[b("Employee Code:")])),_:1,__:[7]}),t(w,{class:"text-label"},{default:l(()=>{var R;return[b(T((R=e.data)==null?void 0:R.employee_code),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[8]||(y[8]=[b("Name:")])),_:1,__:[8]}),t(w,{class:"text-label"},{default:l(()=>{var R;return[b(T((R=e.data)==null?void 0:R.name),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[9]||(y[9]=[b("Email:")])),_:1,__:[9]}),t(w,{class:"text-label"},{default:l(()=>[b(T(e.data.email),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[10]||(y[10]=[b("Contact:")])),_:1,__:[10]}),t(w,{class:"text-label"},{default:l(()=>{var R;return[b(T((R=e.data)==null?void 0:R.mobile),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[11]||(y[11]=[b("Parent Name:")])),_:1,__:[11]}),t(w,{class:"text-label"},{default:l(()=>{var R;return[b(T((R=e.data)==null?void 0:R.parent_name),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[12]||(y[12]=[b("Date of Birth:")])),_:1,__:[12]}),t(w,{class:"text-label"},{default:l(()=>[b(T(q(a)(e.data.date_of_birth)),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[13]||(y[13]=[b("Address:")])),_:1,__:[13]}),t(w,{class:"text-label"},{default:l(()=>{var R;return[b(T(((R=e.data)==null?void 0:R.address)??"N/A"),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[14]||(y[14]=[b("Education Qln.:")])),_:1,__:[14]}),t(w,{class:"text-label"},{default:l(()=>{var R;return[b(T((R=e.data)==null?void 0:R.educational_qln),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[15]||(y[15]=[b("Technical Qln.:")])),_:1,__:[15]}),t(w,{class:"text-label"},{default:l(()=>{var R;return[b(T((R=e.data)==null?void 0:R.technical_qln),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[16]||(y[16]=[b("Designation:")])),_:1,__:[16]}),t(w,{class:"text-label"},{default:l(()=>{var R;return[b(T((R=e.data)==null?void 0:R.designation),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[17]||(y[17]=[b("Office:")])),_:1,__:[17]}),t(w,{class:"text-label"},{default:l(()=>{var R,ce;return[b(T((ce=(R=e.data)==null?void 0:R.office)==null?void 0:ce.name),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[18]||(y[18]=[b("Office Type:")])),_:1,__:[18]}),t(w,{class:"text-label"},{default:l(()=>{var R,ce;return[b(T((ce=(R=e.data)==null?void 0:R.office)==null?void 0:ce.type),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[19]||(y[19]=[b("Workplace:")])),_:1,__:[19]}),t(w,{class:"text-label"},{default:l(()=>{var R;return[b(T((R=e.data)==null?void 0:R.name_of_workplace),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[20]||(y[20]=[b("Date of Engagement:")])),_:1,__:[20]}),t(w,{class:"text-label"},{default:l(()=>{var R;return[b(T(q(a)((R=e.data)==null?void 0:R.date_of_engagement)||"N/A"),1)]}),_:1})]),_:1}),((X=(W=e.data)==null?void 0:W.employment_type)==null?void 0:X.trim())==="MR"?(g(),S(V,{key:0},{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[21]||(y[21]=[b("Post Per Qualification:")])),_:1,__:[21]}),t(w,{class:"text-label"},{default:l(()=>{var R;return[b(T((R=e.data)==null?void 0:R.post_per_qualification),1)]}),_:1})]),_:1})):A("",!0),((ge=(ae=e.data)==null?void 0:ae.employment_type)==null?void 0:ge.trim())==="MR"?(g(),S(V,{key:1},{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[22]||(y[22]=[b("Skill Category:")])),_:1,__:[22]}),t(w,{class:"text-label"},{default:l(()=>{var R;return[b(T((R=e.data)==null?void 0:R.skill_category),1)]}),_:1})]),_:1})):A("",!0),((_e=(he=e.data)==null?void 0:he.employment_type)==null?void 0:_e.trim())==="MR"?(g(),S(V,{key:2},{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>y[23]||(y[23]=[b("Skill at Present:")])),_:1,__:[23]}),t(w,{class:"text-label"},{default:l(()=>{var R;return[b(T((R=e.data)==null?void 0:R.skill_at_present),1)]}),_:1})]),_:1})):A("",!0)]}),_:1}),d("div",mn,[e.canEdit?(g(),S(E,{key:0,label:"Edit",onClick:y[1]||(y[1]=W=>C.$inertia.get(C.route("employee.edit",e.data))),class:"q-mr-md",color:"primary"})):A("",!0),e.canDelete&&e.data.employment_type!=="Deleted"?(g(),S(E,{key:1,label:"Delete",color:"negative",unelevated:"",onClick:y[2]||(y[2]=W=>s.value=!0)})):A("",!0)])])])]}),_:1})]),t(Ua,{modelValue:s.value,"onUpdate:modelValue":y[3]||(y[3]=H=>s.value=H),employee:e.data},null,8,["modelValue","employee"]),d("div",vn,[t(Ll,{modelValue:r.value,"onUpdate:modelValue":y[4]||(y[4]=H=>r.value=H),class:"text-primary bg-white shadow-1 q-pa-sm",dense:"",align:"center"},{default:l(()=>[t(Oe,{name:"document",label:"Documents",icon:"drive_folder_upload"}),c.value&&e.canApproveEdit?(g(),S(Oe,{key:0,name:"edit",label:"Edit Request",icon:"edit",alert:p.value,"alert-icon":"circle","alert-color":"red",class:Se(p.value?"text-red":"")},null,8,["alert","class"])):A("",!0),c.value&&e.canApproveTransfer?(g(),S(Oe,{key:1,name:"transfer_request",label:"Transfer Request",icon:"input",alert:k.value,"alert-icon":"circle","alert-color":"red",class:Se(k.value?"text-red":"")},null,8,["alert","class"])):A("",!0),c.value&&e.canApproveDelete?(g(),S(Oe,{key:2,name:"deletion",label:"Deletion Request",icon:"delete_sweep",alert:h.value,"alert-icon":"circle","alert-color":"red",class:Se(h.value?"text-red":"")},null,8,["alert","class"])):A("",!0),f.value&&e.canRequestEdit?(g(),S(Oe,{key:3,name:"request_edit",label:"Request Edit",icon:"edit",alert:p.value,"alert-icon":"circle","alert-color":"red",class:Se(p.value?"text-red":"")},null,8,["alert","class"])):A("",!0),f.value&&e.canRequestTransfer?(g(),S(Oe,{key:4,name:"request_transfer",label:"Request Transfer",icon:"input"})):A("",!0),f.value&&e.canRequestDelete?(g(),S(Oe,{key:5,name:"request_deletion",label:"Request Deletion",icon:"delete_sweep"})):A("",!0)]),_:1},8,["modelValue"]),r.value==="document"?(g(),S(Nl,{key:0,data:e.data},null,8,["data"])):A("",!0),r.value==="edit"?(g(),S(Xl,{key:1,data:e.data},null,8,["data"])):A("",!0),r.value==="transfer_request"?(g(),S(Fl,{key:2,data:e.data,office:e.office},null,8,["data","office"])):A("",!0),r.value==="deletion"?(g(),S(na,{key:3,data:e.data},null,8,["data"])):A("",!0),r.value==="request_edit"?(g(),S(Ca,{key:4,data:e.data,documentTypes:e.documentTypes},null,8,["data","documentTypes"])):A("",!0),r.value==="request_transfer"?(g(),S(Sa,{key:5,data:e.data,office:e.office},null,8,["data","office"])):A("",!0),r.value==="request_deletion"?(g(),S(da,{key:6,data:e.data},null,8,["data"])):A("",!0),d("div",gn,[d("div",pn,[e.data.remuneration_detail?(g(),S(Wa,{key:0,data:e.data,canCreateRemuneration:e.canCreateRemuneration},null,8,["data","canCreateRemuneration"])):A("",!0),t(Ba,{data:e.data,office:e.office,canCreateTransfer:e.canCreateTransfer,canDeleteTransfer:e.canDeleteTransfer},null,8,["data","office","canCreateTransfer","canDeleteTransfer"])]),d("div",bn,[e.data.employment_type==="PE"?(g(),S(on,{key:0,data:e.data,canCreateEngagementCard:e.canCreateEngagementCard,canDownloadEngagementCard:e.canDownloadEngagementCard},null,8,["data","canCreateEngagementCard","canDownloadEngagementCard"])):A("",!0),e.data.employment_type==="Deleted"?(g(),S(Qa,{key:1,deletion:e.data.deletion_detail,canEditDelete:e.canEditDelete},null,8,["deletion","canEditDelete"])):A("",!0)])])])])]),_:1})]),_:1})]),_:1,__:[24]}))}});export{Pn as default};
