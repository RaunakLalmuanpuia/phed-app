import{Q as q,a as y}from"./QBreadcrumbs-CbAYRsRA.js";import{r as c,l as I,d as O,o as S,w as o,e as s,i as t,q as Q,h as b,Q as j,D as T,W as E}from"./app-Csdj5SGi.js";import{_ as R,j as x,a as v,f as w}from"./BackendLayout-BGbchfdi.js";import{Q as L}from"./QTd-C5hlBMgh.js";import{Q as M}from"./QTable-C7KcX2jc.js";import{Q as U}from"./QLayout-BPWLh4lA.js";import{u as W}from"./use-quasar-DnnNbvl1.js";import"./touch-BJJBQK6Q.js";import"./QSlideTransition-DSWNnvz6.js";import"./QMarkupTable-B5IkZCXF.js";import"./QSelect-C89wUzsO.js";import"./use-fullscreen-9-Fr_W2X.js";const A={class:"flex items-center justify-between q-pa-md bg-white"},F={class:"flex q-gutter-sm"},se=Object.assign({layout:R},{__name:"Index",props:["canCreate","canEdit","canDelete"],setup(C){const _=[{name:"name",align:"left",label:"Name",field:"name",sortable:!1},{name:"type",align:"left",label:"Type",field:"type",sortable:!1},{name:"location",align:"left",label:"Location",field:"location",sortable:!1},{name:"action",align:"left",label:"Action",field:"action",sortable:!1}],r=W(),k=c([]),d=c(""),m=c(!1),n=c({sortBy:"desc",descending:!1,page:1,rowsPerPage:15,rowsNumber:0}),B=a=>{r.dialog({title:"Confirmation",message:"Do you want to delete?",ok:"Yes",cancel:"No"}).onOk(()=>{E.delete(route("office.destroy",a.id),{onStart:e=>r.loading.show(),onFinish:e=>r.loading.hide(),preserveState:!1})})},$=a=>{p({pagination:n.value,filter:a})};function p(a){const{page:e,rowsPerPage:l,sortBy:g,descending:G}=a.pagination,N=a.filter;m.value=!0,axios.get(route("office.json-index"),{params:{filter:N,page:e,rowsPerPage:l}}).then(i=>{console.log(i.data);const{list:f}=i.data,{data:u,per_page:P,current_page:V,total:h,to:Y,from:z}=f;k.value=u,n.value.page=V,n.value.rowsNumber=h,n.value.rowsPerPage=P}).catch(i=>{var f,u;r.notify({type:"negative",message:(u=(f=i==null?void 0:i.response)==null?void 0:f.data)==null?void 0:u.message})}).finally(()=>m.value=!1)}I(()=>{p({pagination:n.value,filter:d.value})});const D=a=>{window.history.back()};return(a,e)=>(S(),O(U,{class:"container",padding:""},{default:o(()=>[s("div",A,[s("div",null,[e[4]||(e[4]=s("div",{class:"stitle"},"Offices",-1)),t(q,{class:"text-dark"},{default:o(()=>[t(y,{class:"cursor-pointer",onClick:e[0]||(e[0]=l=>a.$inertia.get(a.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),t(y,{class:"cursor-pointer",label:"Go Back",onClick:D})]),_:1})]),s("div",F,[t(Q,{onClick:e[1]||(e[1]=l=>a.$inertia.get(a.route("office.create"))),color:"btn-primary",label:"New Office"})])]),e[8]||(e[8]=s("br",null,null,-1)),t(M,{flat:"",ref:"tableRef",title:"List of Offices",rows:k.value,columns:_,"row-key":"id",pagination:n.value,"onUpdate:pagination":e[3]||(e[3]=l=>n.value=l),loading:m.value,filter:d.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:p},{"top-right":o(()=>[t(j,{borderless:"",dense:"",debounce:"800","onUpdate:modelValue":[$,e[2]||(e[2]=l=>d.value=l)],outlined:"",modelValue:d.value,placeholder:"Search"},{append:o(()=>[t(T,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-action":o(l=>[t(L,null,{default:o(()=>[t(Q,{round:"",icon:"more_vert"},{default:o(()=>[t(x,null,{default:o(()=>[t(v,{clickable:"",onClick:g=>a.$inertia.get(a.route("office.show",l.row.id))},{default:o(()=>[t(w,null,{default:o(()=>e[5]||(e[5]=[b("View Detail")])),_:1,__:[5]})]),_:2},1032,["onClick"]),t(v,{clickable:"",onClick:g=>a.$inertia.get(a.route("office.edit",l.row.id))},{default:o(()=>[t(w,null,{default:o(()=>e[6]||(e[6]=[b("Edit")])),_:1,__:[6]})]),_:2},1032,["onClick"]),t(v,{onClick:g=>B(l.row),disable:!C.canDelete},{default:o(()=>[t(w,null,{default:o(()=>e[7]||(e[7]=[b("Delete")])),_:1,__:[7]})]),_:2},1032,["onClick","disable"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","pagination","loading","filter"])]),_:1,__:[8]}))}});export{se as default};
