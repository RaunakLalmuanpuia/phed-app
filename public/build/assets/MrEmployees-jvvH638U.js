import{Q as A,a as _}from"./QBreadcrumbs-_QA2_IGD.js";import{r as c,i as N,c as b,o as v,w as o,b as s,f as a,t as m,p as R,q as V,Q as D,z as w,m as h,v as M}from"./app-BpyBzFIp.js";import{a as I,Q as z}from"./QLayout-DL_NyIeY.js";import{Q as T,a as Q}from"./QTable-BXR3-8Vf.js";import{_ as U}from"./BackendLayout-DNSomVJN.js";import{u as L}from"./use-quasar-mpcXEfnN.js";import"./use-fullscreen-CAo4_rm2.js";import"./QSelect-DfpK_BkB.js";import"./touch-B5nOvKoK.js";const O={class:"flex items-center justify-between q-pa-md bg-white"},W={class:"stitle"},F={class:"row q-gutter-sm col-12 col-sm justify-end"},G={class:"flex items-center gap-3"},H={class:"text-body1"},J={class:"text-caption text-grey"},K={class:"text-caption text-grey"},ce=Object.assign({layout:U},{__name:"MrEmployees",props:["office","canCreate","canEdit","canDelete"],setup(f){const k=f,P=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!1},{name:"name_of_workplace",label:"Workplace",align:"left",field:"name_of_workplace",sortable:!1},{name:"post_per_qualification",label:"Post Per Qualification",align:"left",field:"post_per_qualification",sortable:!0},{name:"skill_at_present",label:"Skill At Present",align:"left",field:"skill_at_present",sortable:!0},{name:"actions",label:"Actions",align:"center"}],n=c({office:null,skill:null,search:null});c("");const q=L(),y=c([]),p=c(!1),i=c({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),B=()=>{g({pagination:i.value,filter:n.value,search:n.value.search})};function g(l){const{page:t,rowsPerPage:e,sortBy:C,descending:X}=l.pagination,$=l.filter,E=l.search;p.value=!0,axios.get(route("employees.json-index-mr",k.office),{params:{filter:$,page:t,rowsPerPage:e,search:E}}).then(r=>{console.log(r.data);const{list:d}=r.data,{data:u,per_page:x,current_page:S,total:j,to:Y,from:Z}=d;y.value=u,i.value.page=S,i.value.rowsNumber=j,i.value.rowsPerPage=x}).catch(r=>{var d,u;q.notify({type:"negative",message:(u=(d=r==null?void 0:r.response)==null?void 0:d.data)==null?void 0:u.message})}).finally(()=>p.value=!1)}return N(()=>{g({pagination:i.value,filter:n.value,search:n.value.search})}),(l,t)=>(v(),b(z,{class:"container",padding:""},{default:o(()=>[s("div",O,[s("div",null,[s("div",W,"Muster Roll Employee List: "+m(f.office.name),1),a(A,{class:"text-dark"},{default:o(()=>[a(_,{onClick:t[0]||(t[0]=e=>l.$inertia.get(l.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),a(_,{label:"All Employees",to:l.route("mis.import")},null,8,["to"])]),_:1})])]),t[4]||(t[4]=s("br",null,null,-1)),a(R,{flat:""},{default:o(()=>[a(V,{class:"row items-center justify-between q-gutter-md"},{default:o(()=>[s("div",F,[a(D,{dense:"",outlined:"",debounce:"300",modelValue:n.value.search,"onUpdate:modelValue":[t[1]||(t[1]=e=>n.value.search=e),B],placeholder:"Search",class:"col-12 col-sm-auto",clearable:""},{append:o(()=>[a(w,{name:"search"})]),_:1},8,["modelValue"]),a(h,{label:"Add New MR Employee",icon:"add",color:"primary",onClick:t[2]||(t[2]=e=>l.$inertia.get(l.route("employee.create")))})])]),_:1}),a(T,{flat:"",ref:"tableRef",title:f.office.name,rows:y.value,columns:P,"row-key":"id",pagination:i.value,"onUpdate:pagination":t[3]||(t[3]=e=>i.value=e),loading:p.value,filter:n.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:g},{"body-cell-employee":o(e=>[a(Q,{props:e},{default:o(()=>[s("div",G,[a(M,null,{default:o(()=>[e.row.avatar?(v(),b(I,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(v(),b(w,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),s("div",null,[s("div",H,m(e.row.name),1),s("div",J,m(e.row.mobile),1),s("div",K,m(e.row.date_of_birth),1)])])]),_:2},1032,["props"])]),"body-cell-actions":o(e=>[a(Q,{props:e},{default:o(()=>[a(h,{dense:"",flat:"",round:"",color:"primary",icon:"visibility",onClick:C=>l.$inertia.get(l.route("employee.show",e.row.id)),"aria-label":"Show user"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["title","rows","pagination","loading","filter"])]),_:1})]),_:1,__:[4]}))}});export{ce as default};
