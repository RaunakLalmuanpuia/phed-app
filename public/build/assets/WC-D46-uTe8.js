import{Q as oe,a as $}from"./QBreadcrumbs-B2QfNl3X.js";import{a as O,Q as le}from"./QLayout-CwzJPS3D.js";import{r as F,x as se,d as te,o as q,w as g,e as s,i as a,E as ae,q as p,Q as _,u as l,f as k,F as A,v as G,t as u,h as f,D as re,W as ne}from"./app-BUqhnzPm.js";import{Q as J}from"./QSelect-CCVo7Y3Q.js";import{Q as D}from"./QStepperNavigation-DjqAIkiy.js";import{Q as ie,a as P}from"./QStepper-DDMsu9Yi.js";import{Q as de}from"./QFile-BJGq-Gaf.js";import{Q as me}from"./QForm-D82iCr7K.js";import{_ as ue}from"./BackendLayout-B4VKV5U2.js";import{u as ce}from"./use-quasar-Gqu1uUMC.js";import{u as pe}from"./useUtils-ppGv4Db3.js";/* empty css            */import"./QChip-CM8_4_HM.js";import"./format-C4QW3o8r.js";import"./QSlideTransition-C3WU2b4u.js";import"./use-panel-5UKecbEe.js";import"./touch-QnEEk1Q2.js";import"./date-Byi8jsRW.js";const fe={class:"flex items-center justify-between q-pa-md bg-white"},ge={class:"q-pa-md"},_e={class:"row items-center q-gutter-md"},ve={class:"rounded-borders overflow-hidden",style:{"background-color":"#8a82f7"}},be={class:"column q-gutter-sm"},ye={class:"row q-gutter-md"},qe={class:"row q-col-gutter-sm"},ke={class:"col-12 col-sm-6"},Ve={class:"col-12 col-sm-6"},we={class:"col-12 col-sm-6"},he={class:"col-12 col-sm-6"},Ce={class:"col-12 col-sm-6"},Qe={class:"col-12 col-sm-6"},Ue={class:"col-12 col-sm-6"},xe={class:"col-12 col-sm-6"},De={class:"row q-col-gutter-sm"},Pe={class:"col-12 col-sm-6"},Ee={class:"col-12 col-sm-6"},Be={class:"col-12 col-sm-6"},Ie={class:"col-12 col-sm-6"},Ne={class:"col-12 col-sm-6"},Se={class:"row q-col-gutter-sm"},$e={class:"text-subtitle2 q-mb-xs"},Fe={class:"rounded-borders overflow-hidden"},je={class:"row q-col-gutter-sm q-mb-md"},Me={class:"col-12 col-sm-6"},Te={class:"col-12 col-sm-6"},We={class:"col-12 col-sm-6"},Re={class:"col-12 col-sm-6"},Oe={class:"col-12 col-sm-6"},Ae={class:"col-12 col-sm-6"},Ge={class:"col-12 col-sm-6"},Je={class:"row q-col-gutter-sm q-mb-md"},Le={class:"col-12 col-sm-6"},ze={class:"col-12 col-sm-6"},Ke={class:"col-12 col-sm-6"},He={class:"col-12 col-sm-6"},Xe={class:"col-12 col-sm-6"},Ye={class:"row q-col-gutter-sm q-mb-md"},Ze={class:"row items-center justify-between"},eo={class:"text-subtitle2"},oo={key:0},lo={class:"row items-center no-wrap"},so=["href"],to={key:1,class:"text-grey"},L="https://storage.googleapis.com/a1aa/image/089155c9-d1c1-4945-5728-c9bdb3576171.jpg",ho=Object.assign({layout:ue},{__name:"WC",props:["documentTypes","offices"],setup(V){const{educationalQualifications:z,formatDate:E}=pe(),B=V,b=ce(),i=F("1"),e=se({avatar:null,name:"",email:"",mobile:"",parent_name:"",date_of_birth:"",address:"",designation:"",employment_type:"WC",office:"",educational_qln:"",technical_qln:"",name_of_workplace:"",post_per_qualification:"",engagement_card_no:"",date_of_engagement:"",date_of_retirement:"",skill_category:"",skill_at_present:"",documents:[]}),x=F(null),I=F(null);function K(){var t;(t=I.value)==null||t.click()}function H(t){const o=t.target.files[0];if(o&&o.size<=800*1024){const r=new FileReader;r.onload=()=>{x.value=r.result},e.avatar=o,r.readAsDataURL(o)}else alert("File too large or invalid type. Max size: 800KB.")}function X(){x.value=null,I.value.value=null,e.avatar=null}const N=()=>{if(i.value==="1"){if(!e.name||!e.mobile||!e.parent_name||!e.date_of_birth||!e.educational_qln){b.notify({type:"negative",message:"Please fill all required Personal Info fields."});return}i.value="2"}else if(i.value==="2"){if(!e.employment_type||!e.designation||!e.office){b.notify({type:"negative",message:"Please fill all required Job Info fields."});return}i.value="3"}else i.value==="3"&&(i.value="4")},S=()=>{i.value==="4"?i.value="3":i.value==="3"?i.value="2":i.value==="2"&&(i.value="1")},Y=t=>t?typeof t=="string"?t:URL.createObjectURL(t):"#",Z=()=>{b.dialog({title:"Confirm Submission",message:"Are you sure you want to submit?",cancel:!0,persistent:!0}).onOk(()=>{const t=new FormData;e.avatar&&t.append("avatar",e.avatar),t.append("name",e.name||""),t.append("email",e.email||""),t.append("mobile",e.mobile||""),t.append("parent_name",e.parent_name||""),t.append("date_of_birth",e.date_of_birth||""),t.append("address",e.address||""),t.append("designation",e.designation||""),t.append("employment_type",e.employment_type||""),t.append("office",e.office||""),t.append("educational_qln",e.educational_qln||""),t.append("technical_qln",e.technical_qln||""),t.append("name_of_workplace",e.name_of_workplace||""),t.append("post_per_qualification",e.post_per_qualification||""),t.append("engagement_card_no",e.engagement_card_no||""),t.append("date_of_engagement",e.date_of_engagement||""),t.append("date_of_retirement",e.date_of_retirement||""),t.append("skill_category",e.skill_category||""),t.append("skill_at_present",e.skill_at_present||"");for(const o in e.documents)e.documents[o]&&t.append(`documents[${o}]`,e.documents[o]);axios.post(route("employee.store"),t,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>{const{employee:r,message:d}=o.data;b.notify({type:"positive",message:o.data.message||"Employee saved successfully."}),e.reset(),ne.get(route("employee.show",r))}).catch(o=>{if(o.response){const r=o.response.data.errors,d=[];let c=null;if(r){for(const v in r)c||(c=v),r[v]&&d.push(...r[v]);if(e.errors=r,c){const y={name:1,email:1,mobile:1,parent_name:1,date_of_birth:1,educational_qln:1,technical_qln:1,employment_type:2,designation:2,date_of_engagement:2,date_of_retirement:2,name_of_workplace:2,office:2,documents:3}[c]||1;i.value=String(y)}b.notify({type:"negative",message:d.join(", ")})}else o.response.data.message&&b.notify({type:"negative",message:o.response.data.message})}else b.notify({type:"negative",message:"System Error. Please try again later."})})})},ee=()=>{window.history.back()};return(t,o)=>(q(),te(le,{class:"container",padding:""},{default:g(()=>[s("div",fe,[s("div",null,[o[20]||(o[20]=s("div",{class:"stitle"},"Create Employee - Work Charge",-1)),a(oe,{class:"text-dark"},{default:g(()=>[a($,{class:"cursor-pointer",icon:"dashboard",label:"Dashboard",onClick:o[0]||(o[0]=r=>t.$inertia.get(t.route("dashboard")))}),a($,{class:"cursor-pointer",label:"All Employees",onClick:o[1]||(o[1]=r=>t.$inertia.get(t.route("employees.all")))}),a($,{class:"cursor-pointer",label:"Go Back",onClick:ee})]),_:1})])]),o[38]||(o[38]=s("br",null,null,-1)),a(me,{onSubmit:ae(Z,["prevent"]),class:"bg-white q-pa-md"},{default:g(()=>[a(ie,{modelValue:i.value,"onUpdate:modelValue":o[19]||(o[19]=r=>i.value=r),ref:"stepper",animated:"",color:"secondary"},{default:g(()=>[a(P,{name:"1",title:"Personal Info",icon:"person",done:i.value>1},{default:g(()=>{var r,d,c,v,y,w,h,C,Q,U,m,j,M,T,W,R;return[s("div",ge,[s("div",_e,[s("div",ve,[a(O,{src:x.value||L,alt:"Profile Photo",style:{width:"120px",height:"120px"},"img-class":"object-cover"},null,8,["src"])]),s("div",be,[s("div",ye,[a(p,{label:"Upload new Photo",color:"primary",onClick:K,class:"text-weight-medium",rounded:"",unelevated:""}),a(p,{label:"Reset",color:"grey-4","text-color":"dark",onClick:X,class:"text-weight-medium",rounded:"",unelevated:""})]),o[21]||(o[21]=s("p",{class:"text-subtitle2 text-grey-7"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1))])]),s("input",{ref_key:"fileInput",ref:I,type:"file",accept:"image/*",class:"hidden",onChange:H},null,544)]),s("div",qe,[s("div",ke,[a(_,{modelValue:l(e).name,"onUpdate:modelValue":o[2]||(o[2]=n=>l(e).name=n),label:"Name *",outlined:"",dense:"",error:!!((r=l(e).errors)!=null&&r.name),"error-message":(d=l(e).errors)==null?void 0:d.name,rules:[n=>!!n||"Name is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ve,[a(_,{modelValue:l(e).email,"onUpdate:modelValue":o[3]||(o[3]=n=>l(e).email=n),label:"Email",type:"email",outlined:"",dense:"",error:!!((c=l(e).errors)!=null&&c.email),"error-message":(v=l(e).errors)==null?void 0:v.email},null,8,["modelValue","error","error-message"])]),s("div",we,[a(_,{modelValue:l(e).mobile,"onUpdate:modelValue":o[4]||(o[4]=n=>l(e).mobile=n),label:"Mobile *",mask:"##########",outlined:"",dense:"",error:!!((y=l(e).errors)!=null&&y.mobile),"error-message":(w=l(e).errors)==null?void 0:w.mobile,rules:[n=>!!n||"Mobile is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",he,[a(_,{modelValue:l(e).parent_name,"onUpdate:modelValue":o[5]||(o[5]=n=>l(e).parent_name=n),label:"Parent Name *",outlined:"",dense:"",error:!!((h=l(e).errors)!=null&&h.parent_name),"error-message":(C=l(e).errors)==null?void 0:C.parent_name,rules:[n=>!!n||"Parent Name is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ce,[a(_,{modelValue:l(e).date_of_birth,"onUpdate:modelValue":o[6]||(o[6]=n=>l(e).date_of_birth=n),label:"Date of Birth *",type:"date",outlined:"",dense:"",error:!!((Q=l(e).errors)!=null&&Q.date_of_birth),"error-message":(U=l(e).errors)==null?void 0:U.date_of_birth,rules:[n=>!!n||"Date of Birth is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Qe,[a(_,{modelValue:l(e).address,"onUpdate:modelValue":o[7]||(o[7]=n=>l(e).address=n),label:"Address",outlined:"",dense:"",error:!!((m=l(e).errors)!=null&&m.address),"error-message":(j=l(e).errors)==null?void 0:j.address},null,8,["modelValue","error","error-message"])]),s("div",Ue,[a(J,{modelValue:l(e).educational_qln,"onUpdate:modelValue":o[8]||(o[8]=n=>l(e).educational_qln=n),options:l(z),label:"Educational Qualification *",outlined:"",dense:"","emit-value":"","map-options":"",error:!!((M=l(e).errors)!=null&&M.educational_qln),"error-message":(T=l(e).errors)==null?void 0:T.educational_qln,rules:[n=>!!n||"Education Qualification is required"]},null,8,["modelValue","options","error","error-message","rules"])]),s("div",xe,[a(_,{modelValue:l(e).technical_qln,"onUpdate:modelValue":o[9]||(o[9]=n=>l(e).technical_qln=n),label:"Technical Qualification",outlined:"",dense:"",error:!!((W=l(e).errors)!=null&&W.technical_qln),"error-message":(R=l(e).errors)==null?void 0:R.technical_qln},null,8,["modelValue","error","error-message"])])]),a(D,null,{default:g(()=>[a(p,{flat:"",color:"negative",label:"Cancel",class:"q-ml-sm",onClick:o[10]||(o[10]=n=>t.$inertia.get(t.route("employees.all")))}),a(p,{color:"primary",label:"Next",onClick:N})]),_:1})]}),_:1},8,["done"]),a(P,{name:"2",title:"Job Info",icon:"work",done:i.value>2},{default:g(()=>{var r,d,c,v,y,w,h,C,Q,U;return[s("div",De,[s("div",Pe,[a(_,{modelValue:l(e).designation,"onUpdate:modelValue":o[11]||(o[11]=m=>l(e).designation=m),label:"Designation *",outlined:"",dense:"",error:!!((r=l(e).errors)!=null&&r.designation),"error-message":(d=l(e).errors)==null?void 0:d.designation,rules:[m=>!!m||"Designation is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ee,[a(J,{modelValue:l(e).office,"onUpdate:modelValue":o[12]||(o[12]=m=>l(e).office=m),label:"Office *",options:V.offices,"option-label":"name","option-value":"id","emit-value":"","map-options":"",outlined:"",dense:"",error:!!((c=l(e).errors)!=null&&c.office),"error-message":(v=l(e).errors)==null?void 0:v.office,rules:[m=>!!m||"Office is required"]},null,8,["modelValue","options","error","error-message","rules"])]),s("div",Be,[a(_,{modelValue:l(e).date_of_engagement,"onUpdate:modelValue":o[13]||(o[13]=m=>l(e).date_of_engagement=m),label:"Date of Initial Engagement",type:"date",outlined:"",dense:"",error:!!((y=l(e).errors)!=null&&y.date_of_engagement),"error-message":(w=l(e).errors)==null?void 0:w.date_of_engagement},null,8,["modelValue","error","error-message"])]),s("div",Ie,[a(_,{modelValue:l(e).date_of_retirement,"onUpdate:modelValue":o[14]||(o[14]=m=>l(e).date_of_retirement=m),label:"Date of Retirement",type:"date",outlined:"",dense:"",error:!!((h=l(e).errors)!=null&&h.date_of_retirement),"error-message":(C=l(e).errors)==null?void 0:C.date_of_retirement},null,8,["modelValue","error","error-message"])]),s("div",Ne,[a(_,{modelValue:l(e).name_of_workplace,"onUpdate:modelValue":o[15]||(o[15]=m=>l(e).name_of_workplace=m),label:"Workplace",outlined:"",dense:"",error:!!((Q=l(e).errors)!=null&&Q.name_of_workplace),"error-message":(U=l(e).errors)==null?void 0:U.name_of_workplace},null,8,["modelValue","error","error-message"])])]),a(D,null,{default:g(()=>[a(p,{flat:"",color:"negative",label:"Cancel",class:"q-ml-sm",onClick:o[16]||(o[16]=m=>t.$inertia.get(t.route("employees.all")))}),a(p,{flat:"",color:"primary",label:"Back",onClick:S,class:"q-ml-sm"}),a(p,{color:"primary",label:"Next",onClick:N,class:"q-ml-sm"})]),_:1})]}),_:1},8,["done"]),a(P,{name:"3",title:"Upload Documents",icon:"cloud_upload",done:i.value>3},{default:g(()=>[s("div",Se,[(q(!0),k(A,null,G(V.documentTypes,(r,d)=>(q(),k("div",{class:"col-12 col-sm-6",key:r.id},[s("div",$e,u(r.name),1),a(de,{filled:"",modelValue:l(e).documents[r.id],"onUpdate:modelValue":c=>l(e).documents[r.id]=c,label:"Upload File",accept:".pdf,.jpg,.jpeg,.png",counter:!0,clearable:"",class:"full-width"},null,8,["modelValue","onUpdate:modelValue"])]))),128))]),a(D,null,{default:g(()=>[a(p,{flat:"",color:"negative",label:"Cancel",class:"q-ml-sm",onClick:o[17]||(o[17]=r=>t.$inertia.get(t.route("employees.all")))}),a(p,{flat:"",color:"primary",label:"Back",onClick:S,class:"q-ml-sm"}),a(p,{color:"primary",label:"Next",onClick:N})]),_:1})]),_:1},8,["done"]),a(P,{name:"4",title:"Preview Information",icon:"visibility",done:i.value>4},{default:g(()=>{var r;return[s("div",Fe,[a(O,{src:x.value||L,alt:"Profile Photo",style:{width:"120px",height:"120px"},"img-class":"object-cover"},null,8,["src"])]),o[35]||(o[35]=s("div",{class:"q-mb-md text-h6"},"Personal Info",-1)),s("div",je,[s("div",Me,[o[22]||(o[22]=s("strong",null,"Name:",-1)),f(" "+u(l(e).name),1)]),s("div",Te,[o[23]||(o[23]=s("strong",null,"Email:",-1)),f(" "+u(l(e).email),1)]),s("div",We,[o[24]||(o[24]=s("strong",null,"Mobile:",-1)),f(" "+u(l(e).mobile),1)]),s("div",Re,[o[25]||(o[25]=s("strong",null,"Parent Name:",-1)),f(" "+u(l(e).parent_name),1)]),s("div",Oe,[o[26]||(o[26]=s("strong",null,"Date of Birth:",-1)),f(" "+u(l(E)(l(e).date_of_birth)),1)]),s("div",Ae,[o[27]||(o[27]=s("strong",null,"Education:",-1)),f(" "+u(l(e).educational_qln),1)]),s("div",Ge,[o[28]||(o[28]=s("strong",null,"Technical Qualification:",-1)),f(" "+u(l(e).technical_qln),1)])]),o[36]||(o[36]=s("div",{class:"q-mb-md text-h6"},"Job Info",-1)),s("div",Je,[o[34]||(o[34]=s("div",{class:"col-12 col-sm-6"},[s("strong",null,"Employment Type:"),f(" Work Charge Employee ")],-1)),s("div",Le,[o[29]||(o[29]=s("strong",null,"Office:",-1)),f(u(((r=((B==null?void 0:B.offices)||V.offices).find(d=>String(d.id)===String(l(e).office)))==null?void 0:r.name)||""),1)]),s("div",ze,[o[30]||(o[30]=s("strong",null,"Designation:",-1)),f(" "+u(l(e).designation),1)]),s("div",Ke,[o[31]||(o[31]=s("strong",null,"Date of Initial Engagement:",-1)),f(" "+u(l(E)(l(e).date_of_engagement)),1)]),s("div",He,[o[32]||(o[32]=s("strong",null,"Date of Retirement:",-1)),f(" "+u(l(E)(l(e).date_of_retirement)),1)]),s("div",Xe,[o[33]||(o[33]=s("strong",null,"Workplace:",-1)),f(" "+u(l(e).name_of_workplace),1)])]),o[37]||(o[37]=s("div",{class:"q-mb-md text-h6"},"Uploaded Documents",-1)),s("div",Ye,[(q(!0),k(A,null,G(V.documentTypes,(d,c)=>(q(),k("div",{class:"col-12 col-sm-6",key:d.id},[s("div",Ze,[s("div",eo,[s("strong",null,u(d.name),1)]),l(e).documents[d.id]?(q(),k("div",oo,[s("div",lo,[s("a",{href:Y(l(e).documents[d.id]),target:"_blank",class:"text-primary text-weight-medium"},[a(re,{name:"visibility",class:"q-mr-xs"})],8,so)])])):(q(),k("div",to,"No document uploaded"))])]))),128))]),a(D,null,{default:g(()=>[a(p,{flat:"",color:"negative",label:"Cancel",class:"q-ml-sm",onClick:o[18]||(o[18]=d=>t.$inertia.get(t.route("employees.all")))}),a(p,{flat:"",color:"primary",label:"Back",onClick:S,class:"q-ml-sm"}),a(p,{type:"submit",color:"btn-primary",label:"Submit"})]),_:1})]}),_:1,__:[35,36,37]},8,["done"])]),_:1},8,["modelValue"])]),_:1})]),_:1,__:[38]}))}});export{ho as default};
