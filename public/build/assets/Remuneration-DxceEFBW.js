import{a as h}from"./QSelect-BMAT1elC.js";import{Q as x,a as c}from"./QBreadcrumbs-BksNaD-_.js";import{r as s,i as y,c as u,o as m,w as l,b as o,f as n,B as k,d as v,F as Q,n as B,m as F,Q as N,z as D}from"./app-B62Dg7JG.js";import{Q as I}from"./QTable-Dh0Q5zNs.js";import{Q as R}from"./QLayout-DrPVcH9M.js";import{_ as V}from"./BackendLayout-gbDVWIeG.js";import{u as C}from"./use-quasar-BNLj87ae.js";import"./use-fullscreen-Czx9hRXI.js";import"./touch-CXPsHAkq.js";const $={class:"flex items-center justify-between q-pa-md bg-white"},j={class:"stitle"},q={class:"q-gutter-sm"},z=Object.assign({layout:V},{__name:"Remuneration",props:["offices","canGenerateRemuneration"],setup(f){const r=C(),d=s([]),g=s({}),i=s(""),b=[{name:"sl_no",label:"Sl.No",field:"sl_no",align:"center"},{name:"name",label:"Name",field:"name",align:"left"},{name:"designation",label:"Designation",field:"designation",align:"left"},{name:"remuneration",label:"Remuneration",field:"remuneration",align:"right",format:a=>new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a??0)},{name:"medical_allowance",label:"Medical (4%)",field:"medical_allowance",align:"right",format:a=>new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a??0)},{name:"total",label:"Total",field:"total",align:"right"},{name:"monthly_rem",label:"Monthly Rem.",field:"monthly_rem",align:"right"},{name:"next_increment",label:"Next Increment",field:"next_increment",align:"center"}];y(async()=>{const a=await axios.get(route("mis.manager-json-remuneration"));d.value=a.data.data,g.value=a.data.totals});const p=()=>{r.loading.show(),axios.get(route("export.office-remuneration"),{responseType:"blob"}).then(a=>{const e=window.URL.createObjectURL(new Blob([a.data])),t=document.createElement("a"),_=new Date().getFullYear();t.href=e,t.setAttribute("download",`remuneration-summary-${_}.xlsx`),t.click()}).catch(a=>{var e,t;r.notify({type:"negative",message:((t=(e=a.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to download file"})}).finally(()=>{r.loading.hide()})},w=()=>{window.history.back()};return(a,e)=>(m(),u(R,{class:"container",padding:""},{default:l(()=>[o("div",$,[o("div",null,[o("div",j,[e[3]||(e[3]=k("Remuneration Summary :")),(m(!0),v(Q,null,B(f.offices,t=>(m(),u(h,{square:"",key:t.value,label:t.label},null,8,["label"]))),128))]),n(x,{class:"text-dark"},{default:l(()=>[n(c,{onClick:e[0]||(e[0]=t=>a.$inertia.get(a.route("dashboard"))),icon:"dashboard",label:"Dashboard",class:"cursor-pointer"}),n(c,{class:"cursor-pointer",label:"Go Back",onClick:w})]),_:1})]),o("div",q,[n(F,{label:"Export",color:"primary",onClick:e[1]||(e[1]=t=>p()),icon:"download"})])]),e[4]||(e[4]=o("br",null,null,-1)),n(I,{rows:d.value,columns:b,filter:i.value,"row-key":"sl_no"},{"top-right":l(()=>[n(N,{borderless:"",dense:"",debounce:"800",modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value=t),outlined:"",clearable:"",placeholder:"Search Office"},{append:l(()=>[n(D,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","filter"])]),_:1,__:[4]}))}});export{z as default};
