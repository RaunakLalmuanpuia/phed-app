import{Q as E,a as c}from"./QBreadcrumbs-B01kuZk7.js";import{Q as r}from"./QSelect-C7qlWUwL.js";import{r as x,c as y,o as b,w as i,b as l,f as t,p as v,q as m,l as w,e as Q,m as V}from"./app-C0Prpwuj.js";import{Q as q}from"./QLayout-CCFN6Yoj.js";import{_ as D}from"./BackendLayout-C_gidwE2.js";import{u as _}from"./use-quasar-DiainN62.js";/* empty css            */import"./touch-CQT328lm.js";const C={class:"flex items-center justify-between q-pa-md bg-white"},S={class:"q-pa-md"},k={class:"row q-col-gutter-md"},B={class:"row q-gutter-sm col-12 col-sm justify-end"},F=Object.assign({layout:D},{__name:"Export",props:["office","canExport"],setup(u){const n=_(),o=x({type:null,office:null}),d=[{label:"MR",value:"MR"},{label:"PE",value:"PE"},{label:"DELETED",value:"Deleted"}],g=()=>{n.dialog({title:"Confirm Export",message:"Are you sure you want to export the data?",cancel:!0,persistent:!0}).onOk(()=>{const s=new FormData;s.append("type",o.value.type),s.append("office",o.value.office),axios.post(route("mis.import-employee"),s,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{n.notify({type:"positive",message:"Data Successfully Imported"})}).catch(e=>{if(e.response){const a=e.response.data.errors,p=[];if(a){for(const f in a)a[f]&&p.push(...a[f]);n.notify({type:"negative",message:p})}else e.response.data.message&&n.notify({type:"negative",message:e.response.data.message})}else n.notify({type:"negative",message:"System Error. Please try again later."})})})};return(s,e)=>(b(),y(q,{class:"container",padding:""},{default:i(()=>[l("div",C,[l("div",null,[e[4]||(e[4]=l("div",{class:"stitle"},"Export Data",-1)),t(E,{class:"text-dark"},{default:i(()=>[t(c,{onClick:e[0]||(e[0]=a=>s.$inertia.get(s.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),t(c,{label:"Export",to:s.route("mis.export")},null,8,["to"])]),_:1})])]),e[6]||(e[6]=l("br",null,null,-1)),t(v,{flat:""},{default:i(()=>[t(m,null,{default:i(()=>[l("div",S,[t(v,{flat:"",class:"q-mt-md bg-white shadow-1"},{default:i(()=>[t(m,null,{default:i(()=>[e[5]||(e[5]=l("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Export Filter ",-1)),l("div",k,[t(r,{label:"Select Office",class:"col-12 col-sm-4",modelValue:o.value.office,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.office=a),options:u.office,"option-label":"name","option-value":"id","emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),t(r,{label:"Select Employment Type",class:"col-12 col-sm-4",modelValue:o.value.type,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.type=a),options:d,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"]),t(r,{label:"Select Employment Type",class:"col-12 col-sm-4",modelValue:o.value.type,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.type=a),options:d,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"])])]),_:1,__:[5]}),t(w),t(m,{class:"row items-center justify-between q-gutter-md"},{default:i(()=>[l("div",B,[u.canExport?(b(),y(V,{key:0,label:"Export Data",icon:"add",color:"primary",onClick:g})):Q("",!0)])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1,__:[6]}))}});export{F as default};
