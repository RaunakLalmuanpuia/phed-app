import{Q as M,a as F}from"./QBreadcrumbs-CwyW2-8k.js";import{r as g,a as O,i as m,o as r,j as a,f as o,g as l,p as Q,q as h,c as W,F as G,n as H,t as c,v as D,y as J,z as f,l as K,Q as X,m as Y,A as x,B as _,R as q}from"./app-BAZM61hi.js";import{Q as E,a as Z}from"./QSelect-Cavdkq-w.js";import{a as ee,Q as le}from"./QLayout-DM2KzGkc.js";import{Q as te,a as V}from"./QTable-BbeHry3V.js";import{_ as ae,b as oe,Q as se,a as S,c as p}from"./BackendLayout-8jexcsci.js";import{u as ie}from"./use-quasar-CBR4PA6u.js";/* empty css            */import"./QMarkupTable-4zgj-6CU.js";import"./touch-B9nuNVMx.js";const ne={class:"flex items-center justify-between q-pa-md bg-white"},re={class:"q-pa-md"},de={class:"q-gutter-md row q-col-gutter-md"},ue={class:"row justify-between items-center"},me={class:"text-grey-6 text-subtitle1"},ce={class:"text-h5 text-weight-bold"},fe={class:"row q-col-gutter-md"},pe={class:"row q-gutter-sm col-12 col-sm justify-end"},ge={class:"flex items-center gap-3"},ve={class:"text-body1"},be={class:"text-caption text-grey"},ye={class:"text-caption text-grey"},De=Object.assign({layout:ae},{__name:"AllEmployees",props:["office","canCreate","canEdit","canDelete","totalEmployees","peCount","mrCount","deletedCount"],setup(B){const v=B,P=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"employment_type",label:"Employment Type",align:"left",field:"employment_type",sortable:!1},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!1},{name:"name_of_workplace",label:"Workplace",align:"left",field:"name_of_workplace",sortable:!1},{name:"office",label:"Office",align:"left",field:"office",sortable:!0},{name:"actions",label:"Actions",align:"center"}],A=[{title:"Total",value:v.totalEmployees,icon:"person_search",iconColor:"light-blue-5",bgColor:"#d6f3ff"},{title:"Muster Roll",value:v.mrCount,icon:"how_to_reg",iconColor:"indigo-6",bgColor:"#d7d9ff"},{title:"Provisional",value:v.peCount,icon:"person_add",iconColor:"orange-5",bgColor:"#ffe9d6"},{title:"Deleted",value:v.deletedCount,icon:"person",iconColor:"red-6",bgColor:"#ffe1e1"}],s=g({type:null,office:null,skill:null,search:null}),R=[{label:"MR",value:"MR"},{label:"PE",value:"PE"},{label:"Deleted",value:"Deleted"}],j=[{label:"Skilled",value:"skilled"},{label:"Unskilled",value:"unskilled"}];g("");const U=ie(),$=g([]),k=g(!1),n=g({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),b=()=>{C({pagination:n.value,filter:s.value,search:s.value.search})};function C(i){const{page:t,rowsPerPage:e,sortBy:d,descending:we}=i.pagination,N=i.filter,T=i.search;k.value=!0,axios.get(route("employees.json-index-all"),{params:{filter:N,page:t,rowsPerPage:e,search:T}}).then(u=>{console.log(u.data);const{list:y}=u.data,{data:w,per_page:z,current_page:I,total:L,to:_e,from:ke}=y;$.value=w,n.value.page=I,n.value.rowsNumber=L,n.value.rowsPerPage=z}).catch(u=>{var y,w;U.notify({type:"negative",message:(w=(y=u==null?void 0:u.response)==null?void 0:y.data)==null?void 0:w.message})}).finally(()=>k.value=!1)}return O(()=>{C({pagination:n.value,filter:s.value,search:s.value.search})}),(i,t)=>(r(),m(le,{class:"container",padding:""},{default:a(()=>[o("div",ne,[o("div",null,[t[7]||(t[7]=o("div",{class:"stitle"},"All Employee List",-1)),l(M,{class:"text-dark"},{default:a(()=>[l(F,{onClick:t[0]||(t[0]=e=>i.$inertia.get(i.route("dashboard"))),icon:"dashboard",label:"Dashboard"})]),_:1})])]),t[13]||(t[13]=o("br",null,null,-1)),l(Q,{flat:""},{default:a(()=>[l(h,null,{default:a(()=>[o("div",re,[o("div",de,[(r(),W(G,null,H(A,e=>l(Q,{flat:"",bordered:"",class:"col-12 col-sm bg-white q-px-md q-py-lg shadow-1",key:e.title},{default:a(()=>[o("div",ue,[o("div",null,[o("div",me,c(e.title),1),o("div",ce,c(e.value),1),t[8]||(t[8]=o("div",{class:"text-caption text-grey-6 q-mt-xs"}," Employees ",-1))]),l(D,{size:"48px",style:J({backgroundColor:e.bgColor}),"text-color":"white"},{default:a(()=>[l(f,{name:e.icon,color:e.iconColor,size:"20px"},null,8,["name","color"])]),_:2},1032,["style"])])]),_:2},1024)),64))]),l(Q,{flat:"",bordered:"",class:"q-mt-md bg-white shadow-1"},{default:a(()=>[l(h,null,{default:a(()=>[t[9]||(t[9]=o("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Search Filter ",-1)),o("div",fe,[l(E,{label:"Select Employment Type",class:"col-12 col-sm-4",modelValue:s.value.type,"onUpdate:modelValue":[t[1]||(t[1]=e=>s.value.type=e),b],options:R,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"]),l(E,{label:"Select Office",class:"col-12 col-sm-4",modelValue:s.value.office,"onUpdate:modelValue":[t[2]||(t[2]=e=>s.value.office=e),b],options:B.office,"option-label":"name","option-value":"id","emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),l(E,{label:"Select Skill",class:"col-12 col-sm-4",modelValue:s.value.skill,"onUpdate:modelValue":[t[3]||(t[3]=e=>s.value.skill=e),b],options:j,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"])])]),_:1,__:[9]}),l(K),l(h,{class:"row items-center justify-between q-gutter-md"},{default:a(()=>[o("div",pe,[l(X,{dense:"",outlined:"",debounce:"300",modelValue:s.value.search,"onUpdate:modelValue":[t[4]||(t[4]=e=>s.value.search=e),b],placeholder:"Search",class:"col-12 col-sm-auto",clearable:""},{append:a(()=>[l(f,{name:"search"})]),_:1},8,["modelValue"]),l(Y,{label:"Add New Employee",icon:"add",color:"primary",onClick:t[5]||(t[5]=e=>i.$inertia.get(i.route("employee.create")))})])]),_:1})]),_:1})])]),_:1}),l(te,{flat:"",ref:"tableRef",title:"List of All Employees",rows:$.value,columns:P,"row-key":"id",pagination:n.value,"onUpdate:pagination":t[6]||(t[6]=e=>n.value=e),loading:k.value,filter:s.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:C},{"body-cell-employee":a(e=>[l(V,{props:e},{default:a(()=>[o("div",ge,[l(D,null,{default:a(()=>[e.row.avatar?(r(),m(ee,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(r(),m(f,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),o("div",null,[o("div",ve,c(e.row.name),1),o("div",be,c(e.row.mobile),1),o("div",ye,c(e.row.date_of_birth),1)])])]),_:2},1032,["props"])]),"body-cell-office":a(e=>[l(V,{props:e},{default:a(()=>[l(Z,{color:"primary","text-color":"white",dense:""},{default:a(()=>{var d;return[_(c((d=e.row.office)==null?void 0:d.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-actions":a(e=>[l(V,{props:e},{default:a(()=>[l(oe,{dense:"",flat:"",round:"",color:"primary","dropdown-icon":"more_vert","aria-label":"Actions"},{default:a(()=>[l(se,{style:{"min-width":"100px"}},{default:a(()=>[x((r(),m(S,{clickable:"",onClick:d=>i.$inertia.get(i.route("employee.show",e.row.id))},{default:a(()=>[l(p,{avatar:""},{default:a(()=>[l(f,{name:"visibility"})]),_:1}),l(p,null,{default:a(()=>t[10]||(t[10]=[_("View")])),_:1,__:[10]})]),_:2},1032,["onClick"])),[[q]]),x((r(),m(S,{clickable:"",onClick:d=>i.$inertia.get(i.route("employee.edit",e.row.id))},{default:a(()=>[l(p,{avatar:""},{default:a(()=>[l(f,{name:"edit"})]),_:1}),l(p,null,{default:a(()=>t[11]||(t[11]=[_("Edit")])),_:1,__:[11]})]),_:2},1032,["onClick"])),[[q]]),x((r(),m(S,{clickable:"",onClick:d=>i.deleteUser(e.row.id)},{default:a(()=>[l(p,{avatar:""},{default:a(()=>[l(f,{name:"delete",color:"red"})]),_:1}),l(p,{class:"text-red"},{default:a(()=>t[12]||(t[12]=[_("Delete")])),_:1,__:[12]})]),_:2},1032,["onClick"])),[[q]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading","filter"])]),_:1})]),_:1,__:[13]}))}});export{De as default};
