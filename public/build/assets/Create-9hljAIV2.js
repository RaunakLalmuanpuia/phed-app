import{Q as le,a as T}from"./QBreadcrumbs-B2QfNl3X.js";import{a as W,Q as oe}from"./QLayout-CwzJPS3D.js";import{r as O,x as se,d as te,o as g,w as c,e as s,i as r,E as re,q as u,Q as _,u as o,f as y,g as $,F as J,v as L,t as d,h as m,D as ae,W as ne}from"./app-BUqhnzPm.js";import{Q as N}from"./QSelect-CCVo7Y3Q.js";import{Q as B}from"./QStepperNavigation-DjqAIkiy.js";import{Q as ie,a as I}from"./QStepper-DDMsu9Yi.js";import{Q as de}from"./QFile-BJGq-Gaf.js";import{Q as me}from"./QForm-D82iCr7K.js";import{_ as ue}from"./BackendLayout-B4VKV5U2.js";import{u as pe}from"./use-quasar-Gqu1uUMC.js";import{u as ce}from"./useUtils-ppGv4Db3.js";/* empty css            */import"./QChip-CM8_4_HM.js";import"./format-C4QW3o8r.js";import"./QSlideTransition-C3WU2b4u.js";import"./use-panel-5UKecbEe.js";import"./touch-QnEEk1Q2.js";import"./date-Byi8jsRW.js";const fe={class:"flex items-center justify-between q-pa-md bg-white"},ge={class:"q-pa-md"},_e={class:"row items-center q-gutter-md"},ve={class:"rounded-borders overflow-hidden",style:{"background-color":"#8a82f7"}},ye={class:"column q-gutter-sm"},be={class:"row q-gutter-md"},ke={class:"row q-col-gutter-sm"},qe={class:"col-12 col-sm-6"},Ve={class:"col-12 col-sm-6"},we={class:"col-12 col-sm-6"},Ce={class:"col-12 col-sm-6"},Ue={class:"col-12 col-sm-6"},Qe={class:"col-12 col-sm-6"},he={class:"col-12 col-sm-6"},Pe={class:"col-12 col-sm-6"},xe={class:"row q-col-gutter-sm"},Ee={class:"col-12 col-sm-6"},Se={class:"col-12 col-sm-6"},Ne={class:"col-12 col-sm-6"},De={class:"col-12 col-sm-6"},Me={class:"col-12 col-sm-6"},$e={class:"col-12 col-sm-6"},Be={key:0,class:"col-12 col-sm-6"},Ie={key:1,class:"col-12 col-sm-6"},Fe={class:"row q-col-gutter-sm"},Re={class:"text-subtitle2 q-mb-xs"},je={class:"rounded-borders overflow-hidden"},Te={class:"row q-col-gutter-sm q-mb-md"},Oe={class:"col-12 col-sm-6"},Ae={class:"col-12 col-sm-6"},We={class:"col-12 col-sm-6"},Je={class:"col-12 col-sm-6"},Le={class:"col-12 col-sm-6"},ze={class:"col-12 col-sm-6"},Ge={class:"col-12 col-sm-6"},Ke={class:"row q-col-gutter-sm q-mb-md"},He={class:"col-12 col-sm-6"},Xe={class:"col-12 col-sm-6"},Ye={class:"col-12 col-sm-6"},Ze={class:"col-12 col-sm-6"},el={class:"col-12 col-sm-6"},ll={class:"col-12 col-sm-6"},ol={key:0,class:"col-12 col-sm-6"},sl={key:1,class:"col-12 col-sm-6"},tl={class:"row q-col-gutter-sm q-mb-md"},rl={class:"row items-center justify-between"},al={class:"text-subtitle2"},nl={key:0},il={class:"row items-center no-wrap"},dl=["href"],ml={key:1,class:"text-grey"},z="https://storage.googleapis.com/a1aa/image/089155c9-d1c1-4945-5728-c9bdb3576171.jpg",xl=Object.assign({layout:ue},{__name:"Create",props:["documentTypes","offices"],setup(D){const{educationalQualifications:G,skills:A}=ce(),b=pe(),i=O("1"),e=se({avatar:null,name:"",email:"",mobile:"",parent_name:"",date_of_birth:"",address:"",designation:"",employment_type:"",office:"",educational_qln:"",technical_qln:"",name_of_workplace:"",post_per_qualification:"",date_of_engagement:"",skill_category:"",skill_at_present:"",documents:[]}),M=O(null),F=O(null);function K(){var a;(a=F.value)==null||a.click()}function H(a){const l=a.target.files[0];if(l&&l.size<=800*1024){const n=new FileReader;n.onload=()=>{M.value=n.result},e.avatar=l,n.readAsDataURL(l)}else alert("File too large or invalid type. Max size: 800KB.")}function X(){M.value=null,F.value.value=null,e.avatar=null}const R=()=>{if(i.value==="1"){if(!e.name||!e.mobile||!e.parent_name||!e.date_of_birth||!e.educational_qln){b.notify({type:"negative",message:"Please fill all required Personal Info fields."});return}i.value="2"}else if(i.value==="2"){if(!e.employment_type||!e.designation||!e.name_of_workplace||!e.office){b.notify({type:"negative",message:"Please fill all required Job Info fields."});return}if(e.employment_type==="MR"&&(!e.skill_category||!e.skill_at_present)){b.notify({type:"negative",message:"Skill Category and Present Skill are required for MR employment type."});return}i.value="3"}else i.value==="3"&&(i.value="4")},j=()=>{i.value==="4"?i.value="3":i.value==="3"?i.value="2":i.value==="2"&&(i.value="1")},Y=a=>a?typeof a=="string"?a:URL.createObjectURL(a):"#",Z=[{label:"MR",value:"MR"},{label:"PE",value:"PE"}],ee=()=>{b.dialog({title:"Confirm Submission",message:"Are you sure you want to submit?",cancel:!0,persistent:!0}).onOk(()=>{const a=new FormData;e.avatar&&a.append("avatar",e.avatar),a.append("name",e.name),a.append("email",e.email),a.append("mobile",e.mobile),a.append("parent_name",e.parent_name),a.append("date_of_birth",e.date_of_birth),a.append("address",e.address),a.append("designation",e.designation),a.append("employment_type",e.employment_type),a.append("office",e.office),a.append("educational_qln",e.educational_qln),a.append("technical_qln",e.technical_qln),a.append("name_of_workplace",e.name_of_workplace),a.append("post_per_qualification",e.post_per_qualification),a.append("date_of_engagement",e.date_of_engagement),a.append("skill_category",e.skill_category),a.append("skill_at_present",e.skill_at_present);for(const l in e.documents)e.documents[l]&&a.append(`documents[${l}]`,e.documents[l]);axios.post(route("employee.store"),a,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{const{employee:n,message:f}=l.data;b.notify({type:"positive",message:l.data.message||"Employee saved successfully."}),e.reset(),ne.get(route("employee.show",n))}).catch(l=>{if(l.response){const n=l.response.data.errors,f=[];let p=null;if(n){for(const v in n)p||(p=v),n[v]&&f.push(...n[v]);if(e.errors=n,p){const k={name:1,email:1,mobile:1,parent_name:1,date_of_birth:1,educational_qln:1,technical_qln:1,employment_type:2,designation:2,date_of_engagement:2,name_of_workplace:2,office:2,post_per_qualification:2,skill_category:2,skill_at_present:2,documents:3}[p]||1;i.value=String(k)}b.notify({type:"negative",message:f.join(", ")})}else l.response.data.message&&b.notify({type:"negative",message:l.response.data.message})}else b.notify({type:"negative",message:"System Error. Please try again later."})})})};return(a,l)=>(g(),te(oe,{class:"container",padding:""},{default:c(()=>[s("div",fe,[s("div",null,[l[23]||(l[23]=s("div",{class:"stitle"},"Create Employee",-1)),r(le,{class:"text-dark"},{default:c(()=>[r(T,{class:"cursor-pointer",icon:"dashboard",label:"Dashboard",onClick:l[0]||(l[0]=n=>a.$inertia.get(a.route("dashboard")))}),r(T,{class:"cursor-pointer",label:"All Employees",onClick:l[1]||(l[1]=n=>a.$inertia.get(a.route("employees.all")))}),r(T,{label:"New Employee"})]),_:1})])]),l[43]||(l[43]=s("br",null,null,-1)),r(me,{onSubmit:re(ee,["prevent"]),class:"bg-white q-pa-md"},{default:c(()=>[r(ie,{modelValue:i.value,"onUpdate:modelValue":l[22]||(l[22]=n=>i.value=n),ref:"stepper",animated:"",color:"secondary"},{default:c(()=>[r(I,{name:"1",title:"Personal Info",icon:"person",done:i.value>1},{default:c(()=>{var n,f,p,v,k,q,V,w,C,U,Q,h,P,x,E,S;return[s("div",ge,[s("div",_e,[s("div",ve,[r(W,{src:M.value||z,alt:"Profile Photo",style:{width:"120px",height:"120px"},"img-class":"object-cover"},null,8,["src"])]),s("div",ye,[s("div",be,[r(u,{label:"Upload new Photo",color:"primary",onClick:K,class:"text-weight-medium",rounded:"",unelevated:""}),r(u,{label:"Reset",color:"grey-4","text-color":"dark",onClick:X,class:"text-weight-medium",rounded:"",unelevated:""})]),l[24]||(l[24]=s("p",{class:"text-subtitle2 text-grey-7"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1))])]),s("input",{ref_key:"fileInput",ref:F,type:"file",accept:"image/*",class:"hidden",onChange:H},null,544)]),s("div",ke,[s("div",qe,[r(_,{modelValue:o(e).name,"onUpdate:modelValue":l[2]||(l[2]=t=>o(e).name=t),label:"Name",outlined:"",dense:"",error:!!((n=o(e).errors)!=null&&n.name),"error-message":(f=o(e).errors)==null?void 0:f.name,rules:[t=>!!t||"Name is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ve,[r(_,{modelValue:o(e).email,"onUpdate:modelValue":l[3]||(l[3]=t=>o(e).email=t),label:"Email",type:"email",outlined:"",dense:"",error:!!((p=o(e).errors)!=null&&p.email),"error-message":(v=o(e).errors)==null?void 0:v.email},null,8,["modelValue","error","error-message"])]),s("div",we,[r(_,{modelValue:o(e).mobile,"onUpdate:modelValue":l[4]||(l[4]=t=>o(e).mobile=t),label:"Mobile",mask:"##########",outlined:"",dense:"",error:!!((k=o(e).errors)!=null&&k.mobile),"error-message":(q=o(e).errors)==null?void 0:q.mobile,rules:[t=>!!t||"Mobile is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ce,[r(_,{modelValue:o(e).parent_name,"onUpdate:modelValue":l[5]||(l[5]=t=>o(e).parent_name=t),label:"Parent Name",outlined:"",dense:"",error:!!((V=o(e).errors)!=null&&V.parent_name),"error-message":(w=o(e).errors)==null?void 0:w.parent_name,rules:[t=>!!t||"Parent Name is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ue,[r(_,{modelValue:o(e).date_of_birth,"onUpdate:modelValue":l[6]||(l[6]=t=>o(e).date_of_birth=t),label:"Date of Birth",type:"date",outlined:"",dense:"",error:!!((C=o(e).errors)!=null&&C.date_of_birth),"error-message":(U=o(e).errors)==null?void 0:U.date_of_birth,rules:[t=>!!t||"Date of Birth is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Qe,[r(_,{modelValue:o(e).address,"onUpdate:modelValue":l[7]||(l[7]=t=>o(e).address=t),label:"Address",outlined:"",dense:"",error:!!((Q=o(e).errors)!=null&&Q.address),"error-message":(h=o(e).errors)==null?void 0:h.address},null,8,["modelValue","error","error-message"])]),s("div",he,[r(N,{modelValue:o(e).educational_qln,"onUpdate:modelValue":l[8]||(l[8]=t=>o(e).educational_qln=t),options:o(G),label:"Educational Qualification",outlined:"",dense:"","emit-value":"","map-options":"",error:!!((P=o(e).errors)!=null&&P.educational_qln),"error-message":(x=o(e).errors)==null?void 0:x.educational_qln,rules:[t=>!!t||"Education Qualification is required"]},null,8,["modelValue","options","error","error-message","rules"])]),s("div",Pe,[r(_,{modelValue:o(e).technical_qln,"onUpdate:modelValue":l[9]||(l[9]=t=>o(e).technical_qln=t),label:"Technical Qualification",outlined:"",dense:"",error:!!((E=o(e).errors)!=null&&E.technical_qln),"error-message":(S=o(e).errors)==null?void 0:S.technical_qln},null,8,["modelValue","error","error-message"])])]),r(B,null,{default:c(()=>[r(u,{flat:"",color:"negative",label:"Cancel",class:"q-ml-sm",onClick:l[10]||(l[10]=t=>a.$inertia.get(a.route("employees.all")))}),r(u,{color:"primary",label:"Next",onClick:R})]),_:1})]}),_:1},8,["done"]),r(I,{name:"2",title:"Job Info",icon:"work",done:i.value>2},{default:c(()=>{var n,f,p,v,k,q,V,w,C,U,Q,h,P,x,E,S;return[s("div",xe,[s("div",Ee,[r(N,{modelValue:o(e).employment_type,"onUpdate:modelValue":l[11]||(l[11]=t=>o(e).employment_type=t),label:"Employment Type",options:Z,"emit-value":"","map-options":"",outlined:"",dense:"",error:!!((n=o(e).errors)!=null&&n.employment_type),"error-message":(f=o(e).errors)==null?void 0:f.employment_type,rules:[t=>!!t||"Employment Type is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Se,[r(_,{modelValue:o(e).designation,"onUpdate:modelValue":l[12]||(l[12]=t=>o(e).designation=t),label:"Designation",outlined:"",dense:"",error:!!((p=o(e).errors)!=null&&p.designation),"error-message":(v=o(e).errors)==null?void 0:v.designation,rules:[t=>!!t||"Designation is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ne,[r(_,{modelValue:o(e).name_of_workplace,"onUpdate:modelValue":l[13]||(l[13]=t=>o(e).name_of_workplace=t),label:"Workplace",outlined:"",dense:"",error:!!((k=o(e).errors)!=null&&k.name_of_workplace),"error-message":(q=o(e).errors)==null?void 0:q.name_of_workplace,rules:[t=>!!t||"Workplace is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",De,[r(N,{modelValue:o(e).office,"onUpdate:modelValue":l[14]||(l[14]=t=>o(e).office=t),label:"Office",options:D.offices,"option-label":"name","option-value":"id","emit-value":"","map-options":"",outlined:"",dense:"",error:!!((V=o(e).errors)!=null&&V.office),"error-message":(w=o(e).errors)==null?void 0:w.office,rules:[t=>!!t||"Office is required"]},null,8,["modelValue","options","error","error-message","rules"])]),s("div",Me,[r(_,{modelValue:o(e).date_of_engagement,"onUpdate:modelValue":l[15]||(l[15]=t=>o(e).date_of_engagement=t),label:"Date of Engagement",type:"date",outlined:"",dense:"",error:!!((C=o(e).errors)!=null&&C.date_of_engagement),"error-message":(U=o(e).errors)==null?void 0:U.date_of_engagement},null,8,["modelValue","error","error-message"])]),s("div",$e,[r(_,{modelValue:o(e).post_per_qualification,"onUpdate:modelValue":l[16]||(l[16]=t=>o(e).post_per_qualification=t),label:"Post per Qualification",outlined:"",dense:"",error:!!((Q=o(e).errors)!=null&&Q.post_per_qualification),"error-message":(h=o(e).errors)==null?void 0:h.post_per_qualification},null,8,["modelValue","error","error-message"])]),o(e).employment_type==="MR"?(g(),y("div",Be,[r(N,{modelValue:o(e).skill_category,"onUpdate:modelValue":l[17]||(l[17]=t=>o(e).skill_category=t),label:"Skill Category",options:o(A),"emit-value":"","map-options":"",outlined:"",dense:"",error:!!((P=o(e).errors)!=null&&P.skill_category),"error-message":(x=o(e).errors)==null?void 0:x.skill_category,rules:[t=>!!t||"Skill Category is required"]},null,8,["modelValue","options","error","error-message","rules"])])):$("",!0),o(e).employment_type==="MR"?(g(),y("div",Ie,[r(N,{modelValue:o(e).skill_at_present,"onUpdate:modelValue":l[18]||(l[18]=t=>o(e).skill_at_present=t),label:"Skill at Present",options:o(A),"emit-value":"","map-options":"",outlined:"",dense:"",error:!!((E=o(e).errors)!=null&&E.skill_at_present),"error-message":(S=o(e).errors)==null?void 0:S.skill_at_present,rules:[t=>!!t||"Skill at Present is required"]},null,8,["modelValue","options","error","error-message","rules"])])):$("",!0)]),r(B,null,{default:c(()=>[r(u,{flat:"",color:"negative",label:"Cancel",class:"q-ml-sm",onClick:l[19]||(l[19]=t=>a.$inertia.get(a.route("employees.all")))}),r(u,{flat:"",color:"primary",label:"Back",onClick:j,class:"q-ml-sm"}),r(u,{color:"primary",label:"Next",onClick:R,class:"q-ml-sm"})]),_:1})]}),_:1},8,["done"]),r(I,{name:"3",title:"Upload Documents",icon:"cloud_upload",done:i.value>3},{default:c(()=>[s("div",Fe,[(g(!0),y(J,null,L(D.documentTypes,(n,f)=>(g(),y("div",{class:"col-12 col-sm-6",key:n.id},[s("div",Re,d(n.name),1),r(de,{filled:"",modelValue:o(e).documents[n.id],"onUpdate:modelValue":p=>o(e).documents[n.id]=p,label:"Upload File",accept:".pdf,.jpg,.jpeg,.png",counter:!0,clearable:"",class:"full-width"},null,8,["modelValue","onUpdate:modelValue"])]))),128))]),r(B,null,{default:c(()=>[r(u,{flat:"",color:"negative",label:"Cancel",class:"q-ml-sm",onClick:l[20]||(l[20]=n=>a.$inertia.get(a.route("employees.all")))}),r(u,{flat:"",color:"primary",label:"Back",onClick:j,class:"q-ml-sm"}),r(u,{color:"primary",label:"Next",onClick:R})]),_:1})]),_:1},8,["done"]),r(I,{name:"4",title:"Preview Information",icon:"visibility",done:i.value>4},{default:c(()=>[s("div",je,[r(W,{src:M.value||z,alt:"Profile Photo",style:{width:"120px",height:"120px"},"img-class":"object-cover"},null,8,["src"])]),l[40]||(l[40]=s("div",{class:"q-mb-md text-h6"},"Personal Info",-1)),s("div",Te,[s("div",Oe,[l[25]||(l[25]=s("strong",null,"Name:",-1)),m(" "+d(o(e).name),1)]),s("div",Ae,[l[26]||(l[26]=s("strong",null,"Email:",-1)),m(" "+d(o(e).email),1)]),s("div",We,[l[27]||(l[27]=s("strong",null,"Mobile:",-1)),m(" "+d(o(e).mobile),1)]),s("div",Je,[l[28]||(l[28]=s("strong",null,"Parent Name:",-1)),m(" "+d(o(e).parent_name),1)]),s("div",Le,[l[29]||(l[29]=s("strong",null,"Date of Birth:",-1)),m(" "+d(o(e).date_of_birth),1)]),s("div",ze,[l[30]||(l[30]=s("strong",null,"Education:",-1)),m(" "+d(o(e).educational_qln),1)]),s("div",Ge,[l[31]||(l[31]=s("strong",null,"Technical Qualification:",-1)),m(" "+d(o(e).technical_qln),1)])]),l[41]||(l[41]=s("div",{class:"q-mb-md text-h6"},"Job Info",-1)),s("div",Ke,[s("div",He,[l[32]||(l[32]=s("strong",null,"Employment Type:",-1)),m(" "+d(o(e).employment_type),1)]),s("div",Xe,[l[33]||(l[33]=s("strong",null,"Designation:",-1)),m(" "+d(o(e).designation),1)]),s("div",Ye,[l[34]||(l[34]=s("strong",null,"Date of Engagement:",-1)),m(" "+d(o(e).date_of_engagement),1)]),s("div",Ze,[l[35]||(l[35]=s("strong",null,"Workplace:",-1)),m(" "+d(o(e).name_of_workplace),1)]),s("div",el,[l[36]||(l[36]=s("strong",null,"Office:",-1)),m(" "+d(D.offices[o(e).office].name),1)]),s("div",ll,[l[37]||(l[37]=s("strong",null,"Post per Qualification:",-1)),m(" "+d(o(e).post_per_qualification),1)]),o(e).employment_type==="MR"?(g(),y("div",ol,[l[38]||(l[38]=s("strong",null,"Skill Category:",-1)),m(" "+d(o(e).skill_category),1)])):$("",!0),o(e).employment_type==="MR"?(g(),y("div",sl,[l[39]||(l[39]=s("strong",null,"Skill at Present:",-1)),m(" "+d(o(e).skill_at_present),1)])):$("",!0)]),l[42]||(l[42]=s("div",{class:"q-mb-md text-h6"},"Uploaded Documents",-1)),s("div",tl,[(g(!0),y(J,null,L(D.documentTypes,(n,f)=>(g(),y("div",{class:"col-12 col-sm-6",key:n.id},[s("div",rl,[s("div",al,[s("strong",null,d(n.name),1)]),o(e).documents[n.id]?(g(),y("div",nl,[s("div",il,[s("a",{href:Y(o(e).documents[n.id]),target:"_blank",class:"text-primary text-weight-medium"},[r(ae,{name:"visibility",class:"q-mr-xs"})],8,dl)])])):(g(),y("div",ml,"No document uploaded"))])]))),128))]),r(B,null,{default:c(()=>[r(u,{flat:"",color:"negative",label:"Cancel",class:"q-ml-sm",onClick:l[21]||(l[21]=n=>a.$inertia.get(a.route("employees.all")))}),r(u,{flat:"",color:"primary",label:"Back",onClick:j,class:"q-ml-sm"}),r(u,{type:"submit",color:"btn-primary",label:"Submit"})]),_:1})]),_:1,__:[40,41,42]},8,["done"])]),_:1},8,["modelValue"])]),_:1})]),_:1,__:[43]}))}});export{xl as default};
