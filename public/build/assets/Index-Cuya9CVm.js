import{Q as O,a as y}from"./QBreadcrumbs-Bs-BFQ84.js";import{r as m,i as q,c as I,o as S,w as o,b as s,f as t,m as Q,B as b,Q as T,z as h,W as j}from"./app-BPtKqsmW.js";import{_ as E,k as R,a as v,f as w}from"./BackendLayout-DVHrUUU6.js";import{Q as x}from"./QTd-vrY1cyGV.js";import{Q as L}from"./QTable-By1kEh5I.js";import{Q as M}from"./QLayout-VFDsN8wS.js";import{u as U}from"./use-quasar-CI2bNh-7.js";import"./touch-DOUzLfN_.js";import"./use-fullscreen-D8UWzB4z.js";import"./QSelect-DJ0DXWLY.js";const W={class:"flex items-center justify-between q-pa-md bg-white"},z={class:"flex q-gutter-sm"},le=Object.assign({layout:E},{__name:"Index",props:["canCreate","canEdit","canDelete"],setup(C){const _=[{name:"name",align:"left",label:"Name",field:"name",sortable:!1},{name:"type",align:"left",label:"Type",field:"type",sortable:!1},{name:"location",align:"left",label:"Location",field:"location",sortable:!1},{name:"action",align:"left",label:"Action",field:"action",sortable:!1}],r=U(),k=m([]),d=m(""),c=m(!1),n=m({sortBy:"desc",descending:!1,page:1,rowsPerPage:15,rowsNumber:0}),$=a=>{r.dialog({title:"Confirmation",message:"Do you want to delete?",ok:"Yes",cancel:"No"}).onOk(()=>{j.delete(route("office.destroy",a.id),{onStart:e=>r.loading.show(),onFinish:e=>r.loading.hide(),preserveState:!1})})},B=a=>{g({pagination:n.value,filter:a})};function g(a){const{page:e,rowsPerPage:l,sortBy:p,descending:A}=a.pagination,N=a.filter;c.value=!0,axios.get(route("office.json-index"),{params:{filter:N,page:e,rowsPerPage:l}}).then(i=>{console.log(i.data);const{list:f}=i.data,{data:u,per_page:D,current_page:P,total:V,to:F,from:Y}=f;k.value=u,n.value.page=P,n.value.rowsNumber=V,n.value.rowsPerPage=D}).catch(i=>{var f,u;r.notify({type:"negative",message:(u=(f=i==null?void 0:i.response)==null?void 0:f.data)==null?void 0:u.message})}).finally(()=>c.value=!1)}return q(()=>{g({pagination:n.value,filter:d.value})}),(a,e)=>(S(),I(M,{class:"container",padding:""},{default:o(()=>[s("div",W,[s("div",null,[e[4]||(e[4]=s("div",{class:"stitle"},"Offices",-1)),t(O,{class:"text-dark"},{default:o(()=>[t(y,{onClick:e[0]||(e[0]=l=>a.$inertia.get(a.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),t(y,{label:"Offices",to:a.route("office.index")},null,8,["to"])]),_:1})]),s("div",z,[t(Q,{onClick:e[1]||(e[1]=l=>a.$inertia.get(a.route("office.create"))),color:"btn-primary",label:"New Office"})])]),e[8]||(e[8]=s("br",null,null,-1)),t(L,{flat:"",ref:"tableRef",title:"List of Offices",rows:k.value,columns:_,"row-key":"id",pagination:n.value,"onUpdate:pagination":e[3]||(e[3]=l=>n.value=l),loading:c.value,filter:d.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:g},{"top-right":o(()=>[t(T,{borderless:"",dense:"",debounce:"800","onUpdate:modelValue":[B,e[2]||(e[2]=l=>d.value=l)],"bg-color":"grey-2",outlined:"",modelValue:d.value,placeholder:"Search"},{append:o(()=>[t(h,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-action":o(l=>[t(x,null,{default:o(()=>[t(Q,{round:"",icon:"more_vert"},{default:o(()=>[t(R,null,{default:o(()=>[t(v,{clickable:"",onClick:p=>a.$inertia.get(a.route("office.show",l.row.id))},{default:o(()=>[t(w,null,{default:o(()=>e[5]||(e[5]=[b("View Detail")])),_:1,__:[5]})]),_:2},1032,["onClick"]),t(v,{clickable:"",onClick:p=>a.$inertia.get(a.route("office.edit",l.row.id))},{default:o(()=>[t(w,null,{default:o(()=>e[6]||(e[6]=[b("Edit")])),_:1,__:[6]})]),_:2},1032,["onClick"]),t(v,{onClick:p=>$(l.row),disable:!C.canDelete},{default:o(()=>[t(w,null,{default:o(()=>e[7]||(e[7]=[b("Delete")])),_:1,__:[7]})]),_:2},1032,["onClick","disable"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","pagination","loading","filter"])]),_:1,__:[8]}))}});export{le as default};
