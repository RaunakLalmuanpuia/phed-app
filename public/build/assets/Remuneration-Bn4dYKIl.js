import{a as x}from"./QSelect-DiuuknVe.js";import{Q as h,a as f}from"./QBreadcrumbs-BX-l5nsX.js";import{r as m,l as _,d,o as l,w as r,e as o,i as n,h as k,f as v,F as Q,v as N,g as B,q as F,Q as D,D as R}from"./app-9-j--U3a.js";import{Q as I}from"./QTable-6vSsdplA.js";import{Q as V}from"./QLayout-mVNzca3l.js";import{_ as C}from"./BackendLayout-CZkTF7Jc.js";import{u as E}from"./use-quasar-2aQU0Mgi.js";import"./format-BjpJDkVS.js";import"./QMarkupTable-CPgnbyAQ.js";import"./use-fullscreen-B0wOuogM.js";import"./touch-Dqg3fg49.js";import"./QSlideTransition-CX4Yzaz4.js";const q={class:"flex items-center justify-between q-pa-md bg-white"},S={class:"stitle"},$={class:"q-gutter-sm"},J=Object.assign({layout:C},{__name:"Remuneration",props:["offices","canGenerateRemuneration","canExportRemunerationSummary"],setup(c){const i=E(),u=m([]),g=m({}),s=m(""),p=[{name:"sl_no",label:"Sl.No",field:"sl_no",align:"center"},{name:"name",label:"Name",field:"name",align:"left"},{name:"designation",label:"Designation",field:"designation",align:"left"},{name:"remuneration",label:"Remuneration",field:"remuneration",align:"right",format:a=>new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a??0)},{name:"medical_allowance",label:"Medical (4%)",field:"medical_allowance",align:"right",format:a=>new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a??0)},{name:"total",label:"Total",field:"total",align:"right"},{name:"monthly_rem",label:"Monthly Rem.",field:"monthly_rem",align:"right"},{name:"next_increment",label:"Next Increment",field:"next_increment",align:"center"},{name:"pay_matrix",label:"Pay Matrix",field:"pay_matrix",align:"center"}];_(async()=>{const a=await axios.get(route("mis.manager-json-remuneration"));u.value=a.data.data,g.value=a.data.totals});const b=()=>{i.loading.show(),axios.get(route("export.office-remuneration"),{responseType:"blob"}).then(a=>{const e=window.URL.createObjectURL(new Blob([a.data])),t=document.createElement("a"),y=new Date().getFullYear();t.href=e,t.setAttribute("download",`remuneration-summary-${y}.xlsx`),t.click()}).catch(a=>{var e,t;i.notify({type:"negative",message:((t=(e=a.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to download file"})}).finally(()=>{i.loading.hide()})},w=()=>{window.history.back()};return(a,e)=>(l(),d(V,{class:"container",padding:""},{default:r(()=>[o("div",q,[o("div",null,[o("div",S,[e[3]||(e[3]=k("Remuneration Summary :")),(l(!0),v(Q,null,N(c.offices,t=>(l(),d(x,{square:"",key:t.value,label:t.label},null,8,["label"]))),128))]),n(h,{class:"text-dark"},{default:r(()=>[n(f,{onClick:e[0]||(e[0]=t=>a.$inertia.get(a.route("dashboard"))),icon:"dashboard",label:"Dashboard",class:"cursor-pointer"}),n(f,{class:"cursor-pointer",label:"Go Back",onClick:w})]),_:1})]),o("div",$,[c.canExportRemunerationSummary?(l(),d(F,{key:0,label:"Export",color:"primary",onClick:e[1]||(e[1]=t=>b()),icon:"download"})):B("",!0)])]),e[4]||(e[4]=o("br",null,null,-1)),n(I,{rows:u.value,columns:p,filter:s.value,"row-key":"sl_no"},{"top-right":r(()=>[n(D,{borderless:"",dense:"",debounce:"800",modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value=t),outlined:"",clearable:"",placeholder:"Search Office"},{append:r(()=>[n(R,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","filter"])]),_:1,__:[4]}))}});export{J as default};
