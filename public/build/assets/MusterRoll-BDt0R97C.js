import{Q as p,a as u}from"./QBreadcrumbs-Bb4f3Pfo.js";import{r as b,c as g,o as k,w as o,b as r,f as t,m as y,p as w,q as Q,Q as S,z as h}from"./app-BdlnoIGO.js";import{Q as v}from"./QTable-DRnAOOfr.js";import{Q as x}from"./QLayout-DZlNtLYk.js";import{_}from"./BackendLayout-DOn8RhyN.js";import{u as B}from"./use-quasar-BhmNZs2G.js";import"./use-fullscreen-6TZGrrky.js";import"./QSelect-BD5DIyHB.js";import"./touch-CMN1Nvv8.js";const O={class:"flex items-center justify-between q-pa-md bg-white"},C={class:"q-gutter-sm"},A=Object.assign({layout:_},{__name:"MusterRoll",props:{offices:Array,skills:Array},setup(f){const d=f,s=B(),n=b(""),m=["Unskilled","Semi-Skilled","Skilled-I","Skilled-II"],i=[{name:"name",label:"Office Name",field:"name",align:"left",sortable:!0}];[...d.skills].sort((l,e)=>m.indexOf(l)-m.indexOf(e)).forEach(l=>{i.push({name:l,label:l||"No Skill Mentioned",field:l,align:"center",sortable:!0})}),i.push({name:"total",label:"Total",field:"total",align:"center",sortable:!0});const c=()=>{s.loading.show(),axios.get(route("export.summary-mr"),{responseType:"blob"}).then(l=>{const e=window.URL.createObjectURL(new Blob([l.data])),a=document.createElement("a");a.href=e,a.setAttribute("download",Date.now()+".xlsx"),a.click()}).catch(l=>{var e,a;s.notify({type:"negative",message:((a=(e=l.response)==null?void 0:e.data)==null?void 0:a.message)||"Failed to download file"})}).finally(()=>{s.loading.hide()})};return(l,e)=>(k(),g(x,{class:"container",padding:""},{default:o(()=>[r("div",O,[r("div",null,[e[3]||(e[3]=r("div",{class:"stitle"},"Muster Roll Employees Summary",-1)),t(p,{class:"text-dark"},{default:o(()=>[t(u,{onClick:e[0]||(e[0]=a=>l.$inertia.get(l.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),t(u,{label:"MR Summary",to:l.route("summary.mr")},null,8,["to"])]),_:1})]),r("div",C,[t(y,{label:"Export",color:"primary",onClick:e[1]||(e[1]=a=>c()),icon:"download"})])]),e[4]||(e[4]=r("br",null,null,-1)),t(w,{flat:""},{default:o(()=>[t(Q,null,{default:o(()=>[t(v,{rows:d.offices,columns:i,"row-key":"id",flat:"",filter:n.value},{"top-right":o(()=>[t(S,{borderless:"",dense:"",debounce:"800",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=a=>n.value=a),"bg-color":"grey-2",outlined:"",clearable:"",placeholder:"Search Office"},{append:o(()=>[t(h,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","filter"])]),_:1})]),_:1})]),_:1,__:[4]}))}});export{A as default};
