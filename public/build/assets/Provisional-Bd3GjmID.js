import{Q as k,a as f}from"./QBreadcrumbs-DiOcWtTh.js";import{r as v,d as p,o as u,w as l,e as r,i as o,q as x,y as _,z as h,f as B,F as C,v as T,t as b,Q as E,D as q}from"./app-C9TPYcyI.js";import{Q as c}from"./QTd-C8-cawf9.js";import{Q as D}from"./QTr-C5HOi2mq.js";import{Q as P}from"./QTable-C4W0HIkd.js";import{Q as V}from"./QLayout-Cz7UUZvn.js";import{_ as N}from"./BackendLayout-OuQ8BjqX.js";import{u as O}from"./use-quasar-COBsxLNH.js";import"./use-fullscreen-Do3aAD0t.js";import"./QSelect-ju1f9kGM.js";import"./touch-DVKQTzFF.js";const S={class:"flex items-center justify-between q-pa-md bg-white"},U={class:"q-gutter-sm"},K=Object.assign({layout:N},{__name:"Provisional",props:{offices:Array,designations:Array},setup(g){const s=g,n=O(),i=v(""),d=[{name:"name",label:"Office Name",field:"name",align:"left",sortable:!0}];s.designations.forEach(a=>{d.push({name:a,label:a,field:a,align:"center",sortable:!0})}),d.push({name:"total",label:"Total",field:"total",align:"center",sortable:!0});const m=a=>s.offices.reduce((e,t)=>{const Q=Number(t[a])||0;return e+Q},0),w=()=>{n.loading.show(),axios.get(route("export.summary-pe"),{responseType:"blob"}).then(a=>{const e=window.URL.createObjectURL(new Blob([a.data])),t=document.createElement("a");t.href=e,t.setAttribute("download",Date.now()+".xlsx"),t.click()}).catch(a=>{var e,t;n.notify({type:"negative",message:((t=(e=a.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to download file"})}).finally(()=>{n.loading.hide()})},y=a=>{window.history.back()};return(a,e)=>(u(),p(V,{class:"container",padding:""},{default:l(()=>[r("div",S,[r("div",null,[e[3]||(e[3]=r("div",{class:"stitle"},"Provisional Employees Summary",-1)),o(k,{class:"text-dark"},{default:l(()=>[o(f,{class:"cursor-pointer",onClick:e[0]||(e[0]=t=>a.$inertia.get(a.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),o(f,{class:"cursor-pointer",label:"Go Back",onClick:y})]),_:1})]),r("div",U,[o(x,{label:"Export",color:"primary",onClick:e[1]||(e[1]=t=>w()),icon:"download"})])]),e[5]||(e[5]=r("br",null,null,-1)),o(_,{flat:""},{default:l(()=>[o(h,null,{default:l(()=>[o(P,{rows:s.offices,columns:d,"row-key":"id",flat:"",filter:i.value,pagination:{rowsPerPage:0}},{"top-right":l(()=>[o(E,{borderless:"",dense:"",debounce:"800",modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value=t),outlined:"",clearable:"",placeholder:"Search Office"},{append:l(()=>[o(q,{name:"search"})]),_:1},8,["modelValue"])]),"bottom-row":l(()=>[o(D,{class:"bg-grey-3 text-bold q-border-t"},{default:l(()=>[o(c,{class:"text-left font-bold"},{default:l(()=>e[4]||(e[4]=[r("strong",null,"Total",-1)])),_:1,__:[4]}),(u(!0),B(C,null,T(s.designations,t=>(u(),p(c,{key:t,class:"text-center font-bold"},{default:l(()=>[r("strong",null,b(m(t)),1)]),_:2},1024))),128)),o(c,{class:"text-center font-bold"},{default:l(()=>[r("strong",null,b(m("total")),1)]),_:1})]),_:1})]),_:1},8,["rows","filter"])]),_:1})]),_:1})]),_:1,__:[5]}))}});export{K as default};
