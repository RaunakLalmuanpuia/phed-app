import{Q as A,a as Q}from"./QBreadcrumbs-B4qMh0vJ.js";import{r as m,l as I,d as h,o as w,w as a,e as s,i as l,y as M,q as x,h as b,t as i,A as S,D as B,Q as U}from"./app-BGqP1hFj.js";import{a as j,Q as L}from"./QLayout-CZ9aiCDz.js";import{Q as c}from"./QTd-DshYIw3F.js";import{a as O}from"./QSelect-HzYzL-Fv.js";import{Q as W}from"./QTable-CFJQy7_s.js";import{_ as Y}from"./BackendLayout-Dl8gIZFC.js";import{u as z}from"./use-quasar-Qes4-_Gi.js";/* empty css            */import"./format-CFuply4N.js";import"./QMarkupTable-D3NYSlK-.js";import"./use-fullscreen-BvEyec0I.js";import"./touch-B0ZUXP5y.js";import"./QSlideTransition-CjyvGHuc.js";const F={class:"flex items-center justify-between q-pa-md bg-white"},G={class:"flex items-center gap-3"},H={class:"text-body1"},J={class:"text-caption text-grey"},K={class:"text-caption text-grey"},be=Object.assign({layout:Y},{__name:"MasterEmployees",props:["office"],setup(X){const C=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"office",label:"Office",align:"left",field:"office",sortable:!0},{name:"type",label:"Employment Type",align:"left",field:"type",sortable:!0},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!0},{name:"post_assigned",label:"Post/Work Assigned",align:"left",field:"post_assigned",sortable:!0},{name:"is_scheme",label:"Is Scheme",align:"left",field:"is_scheme",sortable:!0},{name:"is_deleted",label:"Is Deleted",align:"left",field:"is_deleted",sortable:!0},{name:"actions",label:"Actions",align:"center"}],n=m({office:null}),E=t=>t.designation&&t.date_of_retirement?"Work Charge":t.designation&&!t.date_of_retirement?"Provisional":"Muster Roll",y=m(""),p=z(),k=m([]),_=m(!1),r=m({sortBy:"desc",descending:!1,page:1,rowsPerPage:50,rowsNumber:0}),P=()=>{n.value.search=y.value,v({pagination:r.value,filter:n.value,search:n.value.search})};function v(t){const{page:o,rowsPerPage:e,sortBy:u,descending:Z}=t.pagination,q=t.filter,R=t.search;_.value=!0,axios.get(route("employees.json-index-master"),{params:{filter:q,page:o,rowsPerPage:e,search:R}}).then(d=>{console.log(d.data);const{list:f}=d.data,{data:g,per_page:T,current_page:V,total:$,to:ee,from:ae}=f;k.value=g,r.value.page=V,r.value.rowsNumber=$,r.value.rowsPerPage=T}).catch(d=>{var f,g;p.notify({type:"negative",message:(g=(f=d==null?void 0:d.response)==null?void 0:f.data)==null?void 0:g.message})}).finally(()=>_.value=!1)}I(()=>{v({pagination:r.value,filter:n.value,search:n.value.search})});const D=()=>{p.loading.show(),axios.get(route("export.master"),{responseType:"blob"}).then(t=>{const o=window.URL.createObjectURL(new Blob([t.data])),e=document.createElement("a");e.href=o,e.setAttribute("download",Date.now()+".xlsx"),e.click()}).catch(t=>{var o,e;p.notify({type:"negative",message:((e=(o=t.response)==null?void 0:o.data)==null?void 0:e.message)||"Failed to download file"})}).finally(()=>{p.loading.hide()})},N=()=>{window.history.back()};return(t,o)=>(w(),h(L,{class:"container",padding:""},{default:a(()=>[s("div",F,[s("div",null,[o[3]||(o[3]=s("div",{class:"stitle"},"Master Employee List",-1)),l(A,{class:"text-dark"},{default:a(()=>[l(Q,{class:"cursor-pointer",onClick:o[0]||(o[0]=e=>t.$inertia.get(t.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),l(Q,{class:"cursor-pointer",label:"Go Back",onClick:N})]),_:1})])]),o[4]||(o[4]=s("br",null,null,-1)),l(M,{flat:""},{default:a(()=>[l(W,{flat:"",ref:"tableRef",title:"Master Employees",rows:k.value,columns:C,"row-key":"id",pagination:r.value,"onUpdate:pagination":o[2]||(o[2]=e=>r.value=e),loading:_.value,filter:n.value,"binary-state-sort":"","rows-per-page-options":[5,10,15,30,50],onRequest:v},{"top-right":a(()=>[l(x,{label:"Export",icon:"desktop_windows",color:"primary",onClick:D}),l(U,{dense:"",outlined:"",debounce:"800",modelValue:y.value,"onUpdate:modelValue":[o[1]||(o[1]=e=>y.value=e),P],placeholder:"Search",class:"q-ml-sm col-12 col-sm-auto",clearable:""},{append:a(()=>[l(B,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-employee":a(e=>[l(c,{props:e},{default:a(()=>[s("div",G,[l(S,null,{default:a(()=>[e.row.avatar?(w(),h(j,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(w(),h(B,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),s("div",null,[s("div",H,i(e.row.name),1),s("div",J,i(e.row.mobile),1),s("div",K,i(e.row.date_of_birth),1)])])]),_:2},1032,["props"])]),"body-cell-office":a(e=>[l(c,{props:e},{default:a(()=>[l(O,{color:"primary","text-color":"white",dense:""},{default:a(()=>{var u;return[b(i((u=e.row.office)==null?void 0:u.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-type":a(e=>[l(c,{props:e},{default:a(()=>[b(i(E(e.row)),1)]),_:2},1032,["props"])]),"body-cell-is_scheme":a(e=>[l(c,{props:e},{default:a(()=>[b(i(e.row.scheme_id?"Yes":"No"),1)]),_:2},1032,["props"])]),"body-cell-is_deleted":a(e=>[l(c,{props:e},{default:a(()=>[b(i(e.row.employment_type==="Deleted"?"Yes":"No"),1)]),_:2},1032,["props"])]),"body-cell-actions":a(e=>[l(c,{props:e},{default:a(()=>[l(x,{dense:"",flat:"",round:"",color:"primary",icon:"visibility",onClick:u=>t.$inertia.get(t.route("employee.show",e.row.id)),"aria-label":"Show user"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading","filter"])]),_:1})]),_:1,__:[4]}))}});export{be as default};
