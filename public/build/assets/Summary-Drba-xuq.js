import{Q as q,a as w}from"./QBreadcrumbs-BZbs9Mm_.js";import{H as D,D as x,k as F,I as N,r as b,i as V,c as v,o as p,w as t,b as l,f as r,m as S,e as T,d as g,F as h,n as j,_ as E,B as i,t as m,Q as I,z as L}from"./app-B3T-7GkY.js";import{Q as _}from"./QTd-BhQs9ww8.js";import{Q as O}from"./QTable-Bl_yv-jF.js";import{Q as R}from"./QLayout-BVOh0iVB.js";import{_ as $}from"./BackendLayout-rBGgjobV.js";import{u as M}from"./use-quasar-BoeiZinQ.js";import"./use-fullscreen-D0c03yr1.js";import"./QSelect-F2ZTeegN.js";import"./touch-Cd9t7mZG.js";const U=D({name:"QTr",props:{props:Object,noHover:Boolean},setup(n,{slots:u}){const d=x(()=>"q-tr"+(n.props===void 0||n.props.header===!0?"":" "+n.props.__trClass)+(n.noHover===!0?" q-tr--no-hover":""));return()=>{var s;return F("tr",{style:(s=n.props)==null?void 0:s.__trStyle,class:d.value},N(u.default))}}}),W={class:"flex items-center justify-between q-pa-md bg-white"},H={class:"q-gutter-sm"},oe=Object.assign({layout:$},{__name:"Summary",props:["office","canGenerateRemuneration"],setup(n){const u=M(),d=b([]),s=b({}),c=b(""),y=[{name:"office_name",label:"Office",field:"office_name",align:"left"},{name:"employee_count",label:"No. of Employees",field:"employee_count",align:"center"},{name:"one_month",label:"Wages for 1 Month (₹)",field:"one_month",align:"right"},{name:"three_months",label:"Wages for 3 Months (₹)",field:"three_months",align:"right"},{name:"six_months",label:"Wages for 6 Months (₹)",field:"six_months",align:"right"},{name:"one_year",label:"Wages for 1 Year (₹)",field:"one_year",align:"right"}],k=x(()=>c.value?d.value.filter(a=>a.office_name.toLowerCase().includes(c.value.toLowerCase())):d.value),f=a=>a==null?"":new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a);V(async()=>{const a=await axios.get(route("remuneration.json-summary"));d.value=a.data.data,s.value=a.data.totals});const Q=()=>{u.loading.show(),axios.get(route("export.remuneration-summary"),{responseType:"blob"}).then(a=>{const o=window.URL.createObjectURL(new Blob([a.data])),e=document.createElement("a"),C=new Date().getFullYear();e.href=o,e.setAttribute("download",`remuneration-summary-${C}.xlsx`),e.click()}).catch(a=>{var o,e;u.notify({type:"negative",message:((e=(o=a.response)==null?void 0:o.data)==null?void 0:e.message)||"Failed to download file"})}).finally(()=>{u.loading.hide()})},B=()=>{window.history.back()};return(a,o)=>(p(),v(R,{class:"container",padding:""},{default:t(()=>[l("div",W,[l("div",null,[o[3]||(o[3]=l("div",{class:"stitle"},"Remuneration Sumary",-1)),r(q,{class:"text-dark"},{default:t(()=>[r(w,{onClick:o[0]||(o[0]=e=>a.$inertia.get(a.route("dashboard"))),icon:"dashboard",label:"Dashboard",class:"cursor-pointer"}),r(w,{class:"cursor-pointer",label:"Go Back",onClick:B})]),_:1})]),l("div",H,[r(S,{label:"Export",color:"primary",onClick:o[1]||(o[1]=e=>Q()),icon:"download"})])]),o[4]||(o[4]=l("br",null,null,-1)),r(O,{rows:k.value,columns:y,"row-key":"office_name",flat:"",bordered:"",pagination:{rowsPerPage:0}},{"top-right":t(()=>[r(I,{borderless:"",dense:"",debounce:"800",modelValue:c.value,"onUpdate:modelValue":o[2]||(o[2]=e=>c.value=e),outlined:"",clearable:"",placeholder:"Search Office"},{append:t(()=>[r(L,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-one_month":t(e=>[r(_,{props:e},{default:t(()=>[i(m(f(e.row.one_month)),1)]),_:2},1032,["props"])]),"body-cell-three_months":t(e=>[r(_,{props:e},{default:t(()=>[i(m(f(e.row.three_months)),1)]),_:2},1032,["props"])]),"body-cell-six_months":t(e=>[r(_,{props:e},{default:t(()=>[i(m(f(e.row.six_months)),1)]),_:2},1032,["props"])]),"body-cell-one_year":t(e=>[r(_,{props:e},{default:t(()=>[i(m(f(e.row.one_year)),1)]),_:2},1032,["props"])]),"bottom-row":t(()=>[c.value?T("",!0):(p(),v(U,{key:0,class:"bg-grey-3 text-bold q-border-t"},{default:t(()=>[(p(),g(h,null,j(y,e=>r(_,{key:e.name,class:E(["text-"+(e.align||"left"),"q-pa-xs"])},{default:t(()=>[l("strong",null,[["one_month","three_months","six_months","one_year"].includes(e.field)?(p(),g(h,{key:0},[i(m(f(s.value[e.field])),1)],64)):(p(),g(h,{key:1},[i(m(s.value[e.field]),1)],64))])]),_:2},1032,["class"])),64))]),_:1}))]),_:1},8,["rows"])]),_:1,__:[4]}))}});export{oe as default};
