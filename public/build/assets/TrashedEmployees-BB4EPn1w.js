import{Q as D,a as k}from"./QBreadcrumbs-B4qMh0vJ.js";import{r as p,l as N,d as h,o as w,w as a,e as r,i as t,y as j,q as I,h as v,t as d,A as O,D as x,Q as S}from"./app-BGqP1hFj.js";import{a as L,Q as M}from"./QLayout-CZ9aiCDz.js";import{Q as u}from"./QTd-DshYIw3F.js";import{a as U}from"./QSelect-HzYzL-Fv.js";import{Q as W}from"./QTable-CFJQy7_s.js";import{_ as Y}from"./BackendLayout-Dl8gIZFC.js";import{u as z}from"./use-quasar-Qes4-_Gi.js";/* empty css            */import"./format-CFuply4N.js";import"./QMarkupTable-D3NYSlK-.js";import"./use-fullscreen-BvEyec0I.js";import"./touch-B0ZUXP5y.js";import"./QSlideTransition-CjyvGHuc.js";const F={class:"flex items-center justify-between q-pa-md bg-white"},G={class:"flex items-center gap-3"},H={class:"text-body1"},J={class:"text-caption text-grey"},K={class:"text-caption text-grey"},ye=Object.assign({layout:Y},{__name:"TrashedEmployees",props:["office","canCreate","canEdit","canDelete"],setup(X){const E=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"type",label:"Employment Type",align:"left",field:"type",sortable:!0},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!0},{name:"post_assigned",label:"Post/Work Assigned",align:"left",field:"post_assigned",sortable:!0},{name:"office",label:"Office",align:"left",field:"office",sortable:!0},{name:"reason",label:"Reason",align:"left",field:"reason",sortable:!1},{name:"year",label:"Year",align:"left",field:"year",sortable:!1},{name:"actions",label:"Actions",align:"center"}],i=p({office:null,reason:null}),f=p(""),m=z(),Q=p([]),_=p(!1),n=p({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),B=o=>o.designation&&o.date_of_retirement?"Work Charge":o.designation&&!o.date_of_retirement?"Provisional":"Muster Roll",C=()=>{i.value.search=f.value,g({pagination:n.value,filter:i.value,search:i.value.search})};function g(o){const{page:s,rowsPerPage:e,sortBy:l,descending:Z}=o.pagination,T=o.filter,$=o.search;_.value=!0,axios.get(route("employees.json-index-trashed"),{params:{filter:T,page:s,rowsPerPage:e,search:$}}).then(c=>{console.log(c.data);const{list:y}=c.data,{data:b,per_page:V,current_page:q,total:A,to:ee,from:ae}=y;Q.value=b,n.value.page=q,n.value.rowsNumber=A,n.value.rowsPerPage=V}).catch(c=>{var y,b;m.notify({type:"negative",message:(b=(y=c==null?void 0:c.response)==null?void 0:y.data)==null?void 0:b.message})}).finally(()=>_.value=!1)}N(()=>{g({pagination:n.value,filter:i.value,search:i.value.search})});const P=o=>{m.dialog({title:"Confirm Restore",message:`Are you sure you want to restore <b>${o.name}</b>?`,html:!0,cancel:!0,persistent:!0,ok:{label:"Yes, Restore",color:"positive"}}).onOk(async()=>{var s,e;try{await axios.put(route("employee.restore",o)),m.notify({type:"positive",message:`Employee ${o.name} restored successfully`}),g({pagination:n.value,filter:i.value,search:f.value})}catch(l){m.notify({type:"negative",message:((e=(s=l.response)==null?void 0:s.data)==null?void 0:e.message)||"Failed to restore employee"})}})},R=()=>{window.history.back()};return(o,s)=>(w(),h(M,{class:"container",padding:""},{default:a(()=>[r("div",F,[r("div",null,[s[3]||(s[3]=r("div",{class:"stitle"},"Trashed Employee List",-1)),t(D,{class:"text-dark"},{default:a(()=>[t(k,{class:"cursor-pointer",onClick:s[0]||(s[0]=e=>o.$inertia.get(o.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),t(k,{class:"cursor-pointer",label:"Go Back",onClick:R})]),_:1})])]),s[4]||(s[4]=r("br",null,null,-1)),t(j,{flat:""},{default:a(()=>[t(W,{flat:"",ref:"tableRef",title:"List of Trashed Employees",rows:Q.value,columns:E,"row-key":"id",pagination:n.value,"onUpdate:pagination":s[2]||(s[2]=e=>n.value=e),loading:_.value,filter:i.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:g},{"top-right":a(()=>[t(S,{dense:"",outlined:"",debounce:"800",modelValue:f.value,"onUpdate:modelValue":[s[1]||(s[1]=e=>f.value=e),C],placeholder:"Search",class:"col-12 col-sm-auto",clearable:""},{append:a(()=>[t(x,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-employee":a(e=>[t(u,{props:e},{default:a(()=>[r("div",G,[t(O,null,{default:a(()=>[e.row.avatar?(w(),h(L,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(w(),h(x,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),r("div",null,[r("div",H,d(e.row.name),1),r("div",J,d(e.row.mobile),1),r("div",K,d(e.row.date_of_birth),1)])])]),_:2},1032,["props"])]),"body-cell-type":a(e=>[t(u,{props:e},{default:a(()=>[v(d(B(e.row)),1)]),_:2},1032,["props"])]),"body-cell-office":a(e=>[t(u,{props:e},{default:a(()=>[t(U,{color:"primary","text-color":"white",dense:""},{default:a(()=>{var l;return[v(d((l=e.row.office)==null?void 0:l.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-reason":a(e=>[t(u,{props:e},{default:a(()=>{var l;return[v(d((l=e.row.deletion_detail)==null?void 0:l.reason),1)]}),_:2},1032,["props"])]),"body-cell-year":a(e=>[t(u,{props:e},{default:a(()=>{var l;return[v(d((l=e.row.deletion_detail)==null?void 0:l.year),1)]}),_:2},1032,["props"])]),"body-cell-actions":a(e=>[t(u,{props:e},{default:a(()=>[t(I,{dense:"",flat:"",round:"",color:"green",icon:"restore",onClick:l=>P(e.row),"aria-label":"Restore Employee"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading","filter"])]),_:1})]),_:1,__:[4]}))}});export{ye as default};
