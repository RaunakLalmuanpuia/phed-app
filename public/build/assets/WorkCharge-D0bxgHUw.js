import{Q as k,a as b}from"./QBreadcrumbs-DVeUSRJF.js";import{r as Q,d as g,o as u,w as o,e as l,i as a,q as h,y as x,z as v,f as C,F as B,v as T,t as n,Q as E,D as V,h as _}from"./app-BZa_U_r9.js";import{Q as s}from"./QTd-BSkg0iwX.js";import{Q as q,a as D}from"./QTable-Bawpc_L2.js";import{Q as N}from"./QTr-DyuTJ1Db.js";import{Q as P}from"./QLayout-CvmrwXDZ.js";import{_ as S}from"./BackendLayout-DMP_RyRX.js";import{u as $}from"./use-quasar-CrRCImgW.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-_1yUbRvW.js";import"./QMarkupTable--V5RPu6x.js";import"./QSelect-BvFBfcRP.js";import"./use-fullscreen-DRid0H0a.js";import"./touch-C0GTe0S2.js";import"./QSlideTransition-3sdT_ruZ.js";const W={class:"flex items-center justify-between q-pa-md bg-white"},j={class:"q-gutter-sm"},z=Object.assign({layout:S},{__name:"WorkCharge",props:{rows:Array,offices:Array},setup(i){const p=i,d=$(),m=Q(""),c=[{name:"name_of_post",label:"Name of Posts",field:"name_of_post",align:"left",sortable:!0},{name:"group",label:"Group",field:"group",align:"center",sortable:!0}];p.offices.forEach(r=>{c.push({name:r,label:r,field:r,align:"center",sortable:!0})}),c.push({name:"total",label:"Total",field:"total",align:"center",sortable:!0});const f=r=>p.rows.reduce((t,e)=>t+(Number(e[r])||0),0),w=()=>{d.loading.show(),axios.get(route("export.summary-wc"),{responseType:"blob"}).then(r=>{const t=window.URL.createObjectURL(new Blob([r.data])),e=document.createElement("a");e.href=t,e.setAttribute("download",`WC_Summary_${Date.now()}.xlsx`),e.click()}).catch(r=>{var t,e;d.notify({type:"negative",message:((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to download file"})}).finally(()=>d.loading.hide())},y=()=>window.history.back();return(r,t)=>(u(),g(P,{class:"container",padding:""},{default:o(()=>[l("div",W,[l("div",null,[t[3]||(t[3]=l("div",{class:"stitle"},"Work Charge Employees Summary",-1)),a(k,{class:"text-dark"},{default:o(()=>[a(b,{class:"cursor-pointer",onClick:t[0]||(t[0]=e=>r.$inertia.get(r.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),a(b,{class:"cursor-pointer",label:"Go Back",onClick:y})]),_:1})]),l("div",j,[a(h,{label:"Export",color:"primary",onClick:t[1]||(t[1]=e=>w()),icon:"download"})])]),t[5]||(t[5]=l("br",null,null,-1)),a(x,{flat:""},{default:o(()=>[a(v,null,{default:o(()=>[a(q,{rows:i.rows,columns:c,"row-key":"name_of_post",flat:"",filter:m.value,pagination:{rowsPerPage:0}},{"body-cell-name_of_post":o(e=>[a(s,{props:e,class:"sticky-col bg-white z-10"},{default:o(()=>[_(n(e.row.name_of_post),1)]),_:2},1032,["props"])]),"header-cell-name_of_post":o(e=>[a(D,{props:e,class:"sticky-col bg-white z-20"},{default:o(()=>[_(n(e.col.label),1)]),_:2},1032,["props"])]),"top-right":o(()=>[a(E,{borderless:"",dense:"",debounce:"800",modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=e=>m.value=e),outlined:"",clearable:"",placeholder:"Search Post"},{append:o(()=>[a(V,{name:"search"})]),_:1},8,["modelValue"])]),"bottom-row":o(()=>[a(N,{class:"bg-grey-3 text-bold q-border-t"},{default:o(()=>[a(s,{class:"text-left font-bold"},{default:o(()=>t[4]||(t[4]=[l("strong",null,"Total",-1)])),_:1,__:[4]}),a(s),(u(!0),C(B,null,T(i.offices,e=>(u(),g(s,{key:e,class:"text-center font-bold"},{default:o(()=>[l("strong",null,n(f(e)),1)]),_:2},1024))),128)),a(s,{class:"text-center font-bold"},{default:o(()=>[l("strong",null,n(f("total")),1)]),_:1})]),_:1})]),_:1},8,["rows","filter"])]),_:1})]),_:1})]),_:1,__:[5]}))}}),te=U(z,[["__scopeId","data-v-c965c0f6"]]);export{te as default};
