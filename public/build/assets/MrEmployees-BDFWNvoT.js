import{Q as R,a as h}from"./QBreadcrumbs-utQhg22X.js";import{Q as k,a as U}from"./QSelect-BjGScurK.js";import{r as d,a as A,f as v,o as y,g as t,i as o,k as l,q as Q,v as x,Q as M,A as V,p as j,m as I,t as f,y as O}from"./app-CEt5iMel.js";import{a as T,Q as L}from"./QLayout-B-Smbf5A.js";import{Q as z,a as _}from"./QTable-CaO-wLSa.js";import{_ as F}from"./BackendLayout-C9wZt_la.js";import{u as W}from"./use-quasar-Y1cCwcKz.js";/* empty css            */import"./QMarkupTable-iGwCQJ3h.js";import"./touch-Br3vYChC.js";const G={class:"flex items-center justify-between q-pa-md bg-white"},H={class:"q-pa-md"},J={class:"row q-col-gutter-md"},K={class:"flex items-center gap-3"},X={class:"text-body1"},Y={class:"text-caption text-grey"},Z={class:"text-caption text-grey"},fe=Object.assign({layout:F},{__name:"MrEmployees",props:["office","canCreate","canEdit","canDelete"],setup(S){const q=[{name:"employee",label:"Employee",align:"left",field:"employee",sortable:!0},{name:"designation",label:"Designation",align:"left",field:"designation",sortable:!1},{name:"name_of_workplace",label:"Workplace",align:"left",field:"name_of_workplace",sortable:!1},{name:"office",label:"Office",align:"left",field:"office",sortable:!0},{name:"date_of_engagement",label:"Date of Engagement",align:"left",field:"date_of_engagement",sortable:!0},{name:"actions",label:"Actions",align:"center"}],s=d({office:null,skill:null,search:null}),B=[{label:"Skilled",value:"skilled"},{label:"Unskilled",value:"unskilled"}];d("");const C=W(),w=d([]),p=d(!1),i=d({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),g=()=>{b({pagination:i.value,filter:s.value,search:s.value.search})};function b(n){const{page:a,rowsPerPage:e,sortBy:u,descending:ee}=n.pagination,E=n.filter,P=n.search;p.value=!0,axios.get(route("employees.json-index-mr"),{params:{filter:E,page:a,rowsPerPage:e,search:P}}).then(r=>{console.log(r.data);const{list:m}=r.data,{data:c,per_page:$,current_page:D,total:N,to:ae,from:le}=m;w.value=c,i.value.page=D,i.value.rowsNumber=N,i.value.rowsPerPage=$}).catch(r=>{var m,c;C.notify({type:"negative",message:(c=(m=r==null?void 0:r.response)==null?void 0:m.data)==null?void 0:c.message})}).finally(()=>p.value=!1)}return A(()=>{b({pagination:i.value,filter:s.value,search:s.value.search})}),(n,a)=>(y(),v(L,{class:"container",padding:""},{default:t(()=>[o("div",G,[o("div",null,[a[5]||(a[5]=o("div",{class:"stitle"},"Muster Roll Employee List",-1)),l(R,{class:"text-dark"},{default:t(()=>[l(h,{onClick:a[0]||(a[0]=e=>n.$inertia.get(n.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),l(h,{label:"All Employees",to:n.route("mis.import")},null,8,["to"])]),_:1})])]),a[7]||(a[7]=o("br",null,null,-1)),l(Q,{flat:""},{default:t(()=>[l(x,null,{default:t(()=>[o("div",H,[l(Q,{flat:"",bordered:"",class:"q-mt-md bg-white shadow-1"},{default:t(()=>[l(x,null,{default:t(()=>[a[6]||(a[6]=o("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Search Filter ",-1)),o("div",J,[l(k,{label:"Select Office",class:"col-12 col-sm-4",modelValue:s.value.office,"onUpdate:modelValue":[a[1]||(a[1]=e=>s.value.office=e),g],options:S.office,"option-label":"name","option-value":"id","emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),l(k,{label:"Select Skill",class:"col-12 col-sm-4",modelValue:s.value.skill,"onUpdate:modelValue":[a[2]||(a[2]=e=>s.value.skill=e),g],options:B,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"]),l(M,{dense:"",outlined:"",debounce:"300",modelValue:s.value.search,"onUpdate:modelValue":[a[3]||(a[3]=e=>s.value.search=e),g],placeholder:"Search",class:"col-12 col-sm-4"},{append:t(()=>[l(V,{name:"search"})]),_:1},8,["modelValue"])])]),_:1,__:[6]})]),_:1})])]),_:1}),l(z,{flat:"",ref:"tableRef",title:"List of Muster Roll Employees",rows:w.value,columns:q,"row-key":"id",pagination:i.value,"onUpdate:pagination":a[4]||(a[4]=e=>i.value=e),loading:p.value,filter:s.value,"binary-state-sort":"","rows-per-page-options":[1,7,15,30,50],onRequest:b},{"body-cell-employee":t(e=>[l(_,{props:e},{default:t(()=>[o("div",K,[l(O,null,{default:t(()=>[e.row.avatar?(y(),v(T,{key:0,src:`/storage/${e.row.avatar}`},null,8,["src"])):(y(),v(V,{key:1,name:"person",size:"md",color:"primary"}))]),_:2},1024),o("div",null,[o("div",X,f(e.row.name),1),o("div",Y,f(e.row.mobile),1),o("div",Z,f(e.row.date_of_birth),1)])])]),_:2},1032,["props"])]),"body-cell-office":t(e=>[l(_,{props:e},{default:t(()=>[l(U,{color:"primary","text-color":"white",dense:""},{default:t(()=>{var u;return[I(f((u=e.row.office)==null?void 0:u.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-actions":t(e=>[l(_,{props:e},{default:t(()=>[l(j,{dense:"",flat:"",round:"",color:"primary",icon:"visibility",onClick:u=>n.$inertia.get(n.route("employee.show",e.row.id)),"aria-label":"Show user"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading","filter"])]),_:1})]),_:1,__:[7]}))}});export{fe as default};
