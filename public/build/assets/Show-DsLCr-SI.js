import{Q as zt,a as ut}from"./QBreadcrumbs-BrzMFK0k.js";import{b as It,a as Mt,Q as Ft}from"./QLayout-DcWnsjvJ.js";import{K as _t,L as Ae,M as ht,N as ze,r as j,E,j as Qe,i as wt,O as fe,R as Xe,k as R,z as ke,P as Ht,S as Wt,T as tt,U as lt,I as Oe,V as Me,X as Ze,h as ce,Y as kt,Z as Kt,_ as Yt,J as je,c as S,o as b,w as l,f as t,q as A,b as m,Q as H,d as U,e as O,F as ne,n as Se,t as C,m as P,p as F,x as pe,l as Be,u as _,B as y,$ as ge,a0 as be,W as et,a1 as De,a2 as qt,a3 as Jt,a4 as xt,a5 as Ct,a6 as Gt,A as St,H as Xt,a7 as Zt,a8 as el,a9 as tl,aa as Ye,ab as ll,ac as al,ad as nl,ae as ol,af as dt,ag as ct,ah as sl,ai as il,aj as ft,ak as rl,al as ul,am as dl,an as cl,G as mt,v as fl}from"./app-B3pOKO1h.js";import{b as Tt,Q as Fe,a as V,c as w,C as Te,v as ml,d as vt,u as vl,p as gt,e as gl,f as pl,g as bl,r as pt,s as yl,_ as _l,h as hl}from"./BackendLayout-PezFOQpK.js";import{r as wl,Q as Ne}from"./QSelect-p0soESKS.js";import{a as kl,Q as Dt,u as ql,b as xl,c as Cl}from"./QTable-Ckwrvzw6.js";import{Q as Sl}from"./QTd-DJv9XF7f.js";import{u as Re}from"./use-quasar-C7GdzWwe.js";import{u as $e}from"./useUtils-R_mC3Y1c.js";import{_ as Rt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as at}from"./QFile-BzoIXfem.js";import{Q as $t}from"./QForm-BT3yJzSu.js";import{c as bt}from"./touch-Ca47X7kt.js";import"./date-DBbfAWuN.js";let Tl=0;const Dl=["click","keydown"],Rl={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Tl++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function $l(e,a,o,i){const s=_t(ht,Ae);if(s===Ae)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Ae;const{proxy:v}=ze(),d=j(null),g=j(null),u=j(null),n=E(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),r=E(()=>s.currentModel.value===e.name),f=E(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(r.value===!0?" q-tab--active"+(s.tabProps.value.activeClass?" "+s.tabProps.value.activeClass:"")+(s.tabProps.value.activeColor?` text-${s.tabProps.value.activeColor}`:"")+(s.tabProps.value.activeBgColor?` bg-${s.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&s.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||s.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),p=E(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(s.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),T=E(()=>e.disable===!0||s.hasFocus.value===!0||r.value===!1&&s.hasActiveTab.value===!0?-1:e.tabindex||0);function x(L,J){var B;if(J!==!0&&(L==null?void 0:L.qAvoidFocus)!==!0&&((B=d.value)==null||B.focus()),e.disable!==!0){s.updateModel({name:e.name}),o("click",L);return}}function k(L){Wt(L,[13,32])?x(L,!0):tt(L)!==!0&&L.keyCode>=35&&L.keyCode<=40&&L.altKey!==!0&&L.metaKey!==!0&&s.onKbdNavigate(L.keyCode,v.$el)===!0&&lt(L),o("keydown",L)}function W(){const L=s.tabProps.value.narrowIndicator,J=[],B=R("div",{ref:u,class:["q-tab__indicator",s.tabProps.value.indicatorClass]});e.icon!==void 0&&J.push(R(ke,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&J.push(R("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&J.push(e.alertIcon!==void 0?R(ke,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):R("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),L===!0&&J.push(B);const K=[R("div",{class:"q-focus-helper",tabindex:-1,ref:d}),R("div",{class:p.value},Ht(a.default,J))];return L===!1&&K.push(B),K}const Y={name:E(()=>e.name),rootRef:g,tabIndicatorRef:u,routeData:i};Qe(()=>{s.unregisterTab(Y)}),wt(()=>{s.registerTab(Y)});function ae(L,J){const B={ref:g,class:f.value,tabindex:T.value,role:"tab","aria-selected":r.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:x,onKeydown:k,...J};return fe(R(L,B,W()),[[Xe,n.value]])}return{renderTab:ae,$tabs:s}}const Le=Oe({name:"QTab",props:Rl,emits:Dl,setup(e,{slots:a,emit:o}){const{renderTab:i}=$l(e,a,o);return()=>i("div")}});function El(e,a,o){const i=o===!0?["left","right"]:["top","bottom"];return`absolute-${a===!0?i[0]:i[1]}${e?` text-${e}`:""}`}const Vl=["left","center","right","justify"],Pl=Oe({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Vl.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:a,emit:o}){const{proxy:i}=ze(),{$q:s}=i,{registerTick:v}=Me(),{registerTick:d}=Me(),{registerTick:g}=Me(),{registerTimeout:u,removeTimeout:n}=Ze(),{registerTimeout:r,removeTimeout:f}=Ze(),p=j(null),T=j(null),x=j(e.modelValue),k=j(!1),W=j(!0),Y=j(!1),ae=j(!1),L=[],J=j(0),B=j(!1);let K=null,Z=null,le;const me=E(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:El(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),ye=E(()=>{const q=J.value,D=x.value;for(let N=0;N<q;N++)if(L[N].name.value===D)return!0;return!1}),_e=E(()=>`q-tabs__content--align-${k.value===!0?"left":ae.value===!0?"justify":e.align}`),$=E(()=>`q-tabs row no-wrap items-center q-tabs--${k.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),ue=E(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+_e.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),qe=E(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),he=E(()=>e.vertical!==!0&&s.lang.rtl===!0),de=E(()=>wl===!1&&he.value===!0);ce(he,se),ce(()=>e.modelValue,q=>{Ee({name:q,setCurrent:!0,skipEmit:!0})}),ce(()=>e.outsideArrows,xe);function Ee({name:q,setCurrent:D,skipEmit:N}){x.value!==q&&(N!==!0&&e["onUpdate:modelValue"]!==void 0&&o("update:modelValue",q),(D===!0||e["onUpdate:modelValue"]===void 0)&&(Pe(x.value,q),x.value=q))}function xe(){v(()=>{p.value&&Ve({width:p.value.offsetWidth,height:p.value.offsetHeight})})}function Ve(q){if(qe.value===void 0||T.value===null)return;const D=q[qe.value.container],N=Math.min(T.value[qe.value.scroll],Array.prototype.reduce.call(T.value.children,(X,I)=>X+(I[qe.value.content]||0),0)),G=D>0&&N>D;k.value=G,G===!0&&d(se),ae.value=D<parseInt(e.breakpoint,10)}function Pe(q,D){const N=q!=null&&q!==""?L.find(X=>X.name.value===q):null,G=D!=null&&D!==""?L.find(X=>X.name.value===D):null;if(Ie===!0)Ie=!1;else if(N&&G){const X=N.tabIndicatorRef.value,I=G.tabIndicatorRef.value;K!==null&&(clearTimeout(K),K=null),X.style.transition="none",X.style.transform="none",I.style.transition="none",I.style.transform="none";const z=X.getBoundingClientRect(),te=I.getBoundingClientRect();I.style.transform=e.vertical===!0?`translate3d(0,${z.top-te.top}px,0) scale3d(1,${te.height?z.height/te.height:1},1)`:`translate3d(${z.left-te.left}px,0,0) scale3d(${te.width?z.width/te.width:1},1,1)`,g(()=>{K=setTimeout(()=>{K=null,I.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",I.style.transform="none"},70)})}G&&k.value===!0&&oe(G.rootRef.value)}function oe(q){const{left:D,width:N,top:G,height:X}=T.value.getBoundingClientRect(),I=q.getBoundingClientRect();let z=e.vertical===!0?I.top-G:I.left-D;if(z<0){T.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(z),se();return}z+=e.vertical===!0?I.height-X:I.width-N,z>0&&(T.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(z),se())}function se(){const q=T.value;if(q===null)return;const D=q.getBoundingClientRect(),N=e.vertical===!0?q.scrollTop:Math.abs(q.scrollLeft);he.value===!0?(W.value=Math.ceil(N+D.width)<q.scrollWidth-1,Y.value=N>0):(W.value=N>0,Y.value=e.vertical===!0?Math.ceil(N+D.height)<q.scrollHeight:Math.ceil(N+D.width)<q.scrollWidth)}function M(q){Z!==null&&clearInterval(Z),Z=setInterval(()=>{ee(q)===!0&&c()},5)}function ve(){M(de.value===!0?Number.MAX_SAFE_INTEGER:0)}function ie(){M(de.value===!0?0:Number.MAX_SAFE_INTEGER)}function c(){Z!==null&&(clearInterval(Z),Z=null)}function h(q,D){const N=Array.prototype.filter.call(T.value.children,te=>te===D||te.matches&&te.matches(".q-tab.q-focusable")===!0),G=N.length;if(G===0)return;if(q===36)return oe(N[0]),N[0].focus(),!0;if(q===35)return oe(N[G-1]),N[G-1].focus(),!0;const X=q===(e.vertical===!0?38:37),I=q===(e.vertical===!0?40:39),z=X===!0?-1:I===!0?1:void 0;if(z!==void 0){const te=he.value===!0?-1:1,we=N.indexOf(D)+z*te;return we>=0&&we<G&&(oe(N[we]),N[we].focus({preventScroll:!0})),!0}}const Q=E(()=>de.value===!0?{get:q=>Math.abs(q.scrollLeft),set:(q,D)=>{q.scrollLeft=-D}}:e.vertical===!0?{get:q=>q.scrollTop,set:(q,D)=>{q.scrollTop=D}}:{get:q=>q.scrollLeft,set:(q,D)=>{q.scrollLeft=D}});function ee(q){const D=T.value,{get:N,set:G}=Q.value;let X=!1,I=N(D);const z=q<I?-1:1;return I+=z*5,I<0?(X=!0,I=0):(z===-1&&I<=q||z===1&&I>=q)&&(X=!0,I=q),G(D,I),se(),X}function re(q,D){for(const N in q)if(q[N]!==D[N])return!1;return!0}function He(){let q=null,D={matchedLen:0,queryDiff:9999,hrefLen:0};const N=L.filter(z=>{var te;return((te=z.routeData)==null?void 0:te.hasRouterLink.value)===!0}),{hash:G,query:X}=i.$route,I=Object.keys(X).length;for(const z of N){const te=z.routeData.exact.value===!0;if(z.routeData[te===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:we,query:We,matched:Ut,href:Qt}=z.routeData.resolvedLink.value,Ke=Object.keys(We).length;if(te===!0){if(we!==G||Ke!==I||re(X,We)===!1)continue;q=z.name.value;break}if(we!==""&&we!==G||Ke!==0&&re(We,X)===!1)continue;const Ce={matchedLen:Ut.length,queryDiff:I-Ke,hrefLen:Qt.length-we.length};if(Ce.matchedLen>D.matchedLen){q=z.name.value,D=Ce;continue}else if(Ce.matchedLen!==D.matchedLen)continue;if(Ce.queryDiff<D.queryDiff)q=z.name.value,D=Ce;else if(Ce.queryDiff!==D.queryDiff)continue;Ce.hrefLen>D.hrefLen&&(q=z.name.value,D=Ce)}if(q===null&&L.some(z=>z.routeData===void 0&&z.name.value===x.value)===!0){Ie=!1;return}Ee({name:q,setCurrent:!0})}function Bt(q){if(n(),B.value!==!0&&p.value!==null&&q.target&&typeof q.target.closest=="function"){const D=q.target.closest(".q-tab");D&&p.value.contains(D)===!0&&(B.value=!0,k.value===!0&&oe(D))}}function At(){u(()=>{B.value=!1},30)}function Ue(){st.avoidRouteWatcher===!1?r(He):f()}function ot(){if(le===void 0){const q=ce(()=>i.$route.fullPath,Ue);le=()=>{q(),le=void 0}}}function Nt(q){L.push(q),J.value++,xe(),q.routeData===void 0||i.$route===void 0?r(()=>{if(k.value===!0){const D=x.value,N=D!=null&&D!==""?L.find(G=>G.name.value===D):null;N&&oe(N.rootRef.value)}}):(ot(),q.routeData.hasRouterLink.value===!0&&Ue())}function jt(q){L.splice(L.indexOf(q),1),J.value--,xe(),le!==void 0&&q.routeData!==void 0&&(L.every(D=>D.routeData===void 0)===!0&&le(),Ue())}const st={currentModel:x,tabProps:me,hasFocus:B,hasActiveTab:ye,registerTab:Nt,unregisterTab:jt,verifyRouteModel:Ue,updateModel:Ee,onKbdNavigate:h,avoidRouteWatcher:!1};kt(ht,st);function it(){K!==null&&clearTimeout(K),c(),le==null||le()}let rt,Ie;return Qe(it),Kt(()=>{rt=le!==void 0,it()}),Yt(()=>{rt===!0&&(ot(),Ie=!0,Ue()),xe()}),()=>R("div",{ref:p,class:$.value,role:"tablist",onFocusin:Bt,onFocusout:At},[R(It,{onResize:Ve}),R("div",{ref:T,class:ue.value,onScroll:se},je(a.default)),R(ke,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(W.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||s.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:ve,onTouchstartPassive:ve,onMouseupPassive:c,onMouseleavePassive:c,onTouchendPassive:c}),R(ke,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(Y.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||s.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:ie,onTouchstartPassive:ie,onMouseupPassive:c,onMouseleavePassive:c,onTouchendPassive:c})])}}),Ll={class:"row q-col-gutter-md q-mt-sm"},Ol={class:"q-pa-sm"},Bl={class:"q-pa-sm"},Al={class:"q-pa-sm"},Nl={class:"q-pa-sm"},jl={class:"q-pa-sm"},Ul={key:0},Ql={__name:"Document",props:["data","office"],setup(e){const a=e,o=j(""),i=E(()=>{var v;return(v=a.data)!=null&&v.documents?a.data.documents.filter(d=>{var u,n,r;const g=o.value.toLowerCase();return((u=d.name)==null?void 0:u.toLowerCase().includes(g))||((r=(n=d.type)==null?void 0:n.name)==null?void 0:r.toLowerCase().includes(g))}):[]});function s(v){return new Date(v).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})}return(v,d)=>(b(),S(F,{class:"q-mt-md"},{default:l(()=>[t(A,null,{default:l(()=>[d[1]||(d[1]=m("div",{class:"stitle"},"Uploaded Documents",-1)),m("div",Ll,[t(H,{modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=g=>o.value=g),dense:"",outlined:"",label:"Search by document name or type...",class:"col-12 col-sm-6"},null,8,["modelValue"])])]),_:1,__:[1]}),t(kl,{flat:"",dense:"",class:"q-ma-sm"},{default:l(()=>[d[3]||(d[3]=m("thead",null,[m("tr",{class:"text-left"},[m("th",null,"Document Name"),m("th",null,"Type"),m("th",null,"Mime Type"),m("th",null,"Upload Date"),m("th",null,"Actions")])],-1)),m("tbody",null,[(b(!0),U(ne,null,Se(i.value,g=>{var u;return b(),U("tr",{key:g.id,class:"text-left"},[m("td",Ol,C(g.name),1),m("td",Bl,C(((u=g.type)==null?void 0:u.name)||"—"),1),m("td",Al,C(g.mime),1),m("td",Nl,C(s(g.upload_date)),1),m("td",jl,[t(P,{icon:"visibility",flat:"",dense:"",round:"",href:`/storage/${g.path}`,target:"_blank",title:"View Document"},null,8,["href"]),t(P,{icon:"download",flat:"",dense:"",round:"",href:`/storage/${g.path}`,download:"",title:"Download Document"},null,8,["href"])])])}),128)),i.value.length===0?(b(),U("tr",Ul,d[2]||(d[2]=[m("td",{colspan:"5",class:"text-center text-grey"},"No documents found",-1)]))):O("",!0)])]),_:1,__:[3]})]),_:1}))}},zl={__name:"TransferRequest",props:["data","office"],setup(e){const{formatDate:a}=$e(),o=Re(),i=j(!1),s=pe({}),v=g=>{s.post(route("transfer.approve",g),{onStart:()=>{o.loading.show()},onFinish:()=>{o.loading.hide(),i.value=!1,s.reset(),o.notify({type:"success",message:"Transfer Approved",position:"bottom"})},onError:u=>{Object.values(u).forEach(n=>{o.notify({type:"negative",message:n,position:"bottom"})})}})},d=g=>{s.post(route("transfer.reject",g),{onStart:()=>{o.loading.show()},onFinish:()=>{o.loading.hide(),i.value=!1,s.reset(),o.notify({type:"negative",message:"Transfer Rejected",position:"bottom"})},onError:u=>{Object.values(u).forEach(n=>{o.notify({type:"negative",message:n,position:"bottom"})})}})};return(g,u)=>(b(),S(F,{class:"q-mt-md"},{default:l(()=>[t(A,{class:"flex items-center justify-between"},{default:l(()=>u[0]||(u[0]=[m("div",{class:"stitle text-lg font-bold"},"Transfer Request",-1)])),_:1,__:[0]}),t(Be),t(A,null,{default:l(()=>[u[3]||(u[3]=m("div",{class:"stitle text-md font-semibold q-mb-sm"},"Tranfer Requests",-1)),t(Dt,{rows:e.data.transfer_requests,columns:[{name:"current_office",label:"Current Office",field:n=>{var r;return(r=n.current_office)==null?void 0:r.name}},{name:"requested_office",label:"Requested Office",field:n=>{var r;return(r=n.requested_office)==null?void 0:r.name}},{name:"status",label:"Status",field:"approval_status"},{name:"date",label:"Request Date",field:n=>_(a)(n.request_date)},{name:"actions",label:"Actions",field:"id",align:"center"}],"row-key":"id",flat:"",bordered:""},{"body-cell-actions":l(n=>[t(Sl,{props:n},{default:l(()=>[n.row.approval_status==="pending"?(b(),S(Tt,{key:0,flat:"",dense:"",color:"primary",label:"Actions",size:"sm"},{default:l(()=>[t(Fe,null,{default:l(()=>[fe((b(),S(V,{clickable:"",onClick:r=>v(n.row.id)},{default:l(()=>[t(w,{avatar:""},{default:l(()=>[t(ke,{name:"check",color:"positive"})]),_:1}),t(w,null,{default:l(()=>u[1]||(u[1]=[y("Approve")])),_:1,__:[1]})]),_:2},1032,["onClick"])),[[Xe]]),fe((b(),S(V,{clickable:"",onClick:r=>d(n.row.id)},{default:l(()=>[t(w,{avatar:""},{default:l(()=>[t(ke,{name:"close",color:"negative"})]),_:1}),t(w,null,{default:l(()=>u[2]||(u[2]=[y("Reject")])),_:1,__:[2]})]),_:2},1032,["onClick"])),[[Xe]])]),_:2},1024)]),_:2},1024)):O("",!0)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1,__:[3]})]),_:1}))}},Il=Rt(zl,[["__scopeId","data-v-41900c29"]]),Ml={key:0,class:"text-gray-500 text-center py-6"},Fl={key:1,class:"flex flex-col gap-4"},Hl={class:"flex flex-wrap justify-between items-center mb-3"},Wl={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 p-3 rounded-md"},Kl={__name:"EditRequest",props:["data"],setup(e){const{formatDate:a,formatDateTime:o}=$e(),i=g=>{et.post(route("edit.approve",g))},s=g=>{et.post(route("edit.reject",g))},v=g=>{try{return JSON.parse(g)}catch{return{}}},d={name:"Name",date_of_birth:"Date of Birth",parent_name:"Parent's Name",employment_type:"Employment Type",designation:"Designation",educational_qln:"Educational Qualification",name_of_workplace:"Workplace Name",post_per_qualification:"Post per Qualification",date_of_engagement:"Date of Engagement",skill_category:"Skill Category",skill_at_present:"Skill at Present"};return(g,u)=>(b(),S(F,{class:"q-mt-md"},{default:l(()=>[t(A,null,{default:l(()=>u[0]||(u[0]=[m("div",{class:"stitle text-lg font-bold"},"Edit Requests",-1)])),_:1,__:[0]}),t(Be),t(A,null,{default:l(()=>[e.data.edit_requests.length===0?(b(),U("div",Ml," No edit requests found. ")):(b(),U("div",Fl,[(b(!0),U(ne,null,Se(e.data.edit_requests,n=>(b(),S(F,{key:n.id,class:"shadow-md rounded-xl border border-gray-200 hover:shadow-lg transition"},{default:l(()=>[t(A,null,{default:l(()=>[m("div",Hl,[m("div",null,[u[1]||(u[1]=m("b",{class:"text-label"},"Status:",-1)),m("span",{class:ge({"text-yellow-600":n.approval_status==="pending","text-green-600":n.approval_status==="approved","text-red-600":n.approval_status==="rejected"})},C(n.approval_status),3)]),m("div",null,[u[2]||(u[2]=m("b",{class:"text-label"},"Requested On:",-1)),y(" "+C(_(o)(n.request_date)),1)])]),m("div",null,[u[3]||(u[3]=m("b",{class:"block mb-2 text-label"},"Requested Changes:",-1)),m("div",Wl,[(b(!0),U(ne,null,Se(v(n.requested_changes),(r,f)=>(b(),U("div",{key:f,class:"flex justify-between items-center"},[t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>[y(C(d[f]??f)+": ",1)]),_:2},1024),t(w,{class:"text-label"},{default:l(()=>[y(C(f==="date_of_birth"||f==="date_of_engagement"?_(a)(r):r),1)]),_:2},1024)]),_:2},1024)]))),128))])])]),_:2},1024),n.approval_status==="pending"?(b(),S(be,{key:0,align:"right"},{default:l(()=>[t(P,{label:"Approve",color:"positive",onClick:r=>i(n.id)},null,8,["onClick"]),t(P,{label:"Reject",color:"negative",onClick:r=>s(n.id)},null,8,["onClick"])]),_:2},1024)):O("",!0)]),_:2},1024))),128))]))]),_:1})]),_:1}))}},Yl={key:0,class:"text-gray-500 text-center py-6"},Jl={key:1,class:"flex flex-col gap-4"},Gl={class:"flex flex-wrap justify-between items-center mb-3"},Xl={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 p-3 rounded-md"},Zl={key:0,class:"mt-3"},ea={__name:"DeletionRequest",props:["data"],setup(e){const{formatDate:a}=$e(),o=Re(),i=pe({});function s(g){try{return JSON.parse(g.reason)}catch{return{}}}const v=g=>{i.post(route("deletion.approve",g),{onStart:()=>{o.loading.show()},onFinish:()=>{o.loading.hide(),i.reset(),o.notify({type:"success",message:"Deletion Approved",position:"bottom"})},onError:u=>{Object.values(u).forEach(n=>{o.notify({type:"negative",message:n,position:"bottom"})})}})},d=g=>{i.post(route("deletion.reject",g),{onStart:()=>{o.loading.show()},onFinish:()=>{o.loading.hide(),i.reset(),o.notify({type:"negative",message:"Deletion Rejected",position:"bottom"})},onError:u=>{Object.values(u).forEach(n=>{o.notify({type:"negative",message:n,position:"bottom"})})}})};return(g,u)=>(b(),S(F,{class:"q-mt-md"},{default:l(()=>[t(A,null,{default:l(()=>u[0]||(u[0]=[m("div",{class:"stitle text-lg font-bold"},"Deletion Requests",-1)])),_:1,__:[0]}),t(Be),t(A,null,{default:l(()=>[e.data.deletion_requests.length===0?(b(),U("div",Yl," No deletion requests. ")):(b(),U("div",Jl,[(b(!0),U(ne,null,Se(e.data.deletion_requests,n=>(b(),S(F,{key:n.id,class:"shadow-md rounded-xl border border-gray-200 hover:shadow-lg transition"},{default:l(()=>[t(A,null,{default:l(()=>[m("div",Gl,[m("div",null,[u[1]||(u[1]=m("b",{class:"text-label"},"Status:",-1)),m("span",{class:ge({"text-yellow-600":n.approval_status==="pending","text-green-600":n.approval_status==="approved","text-red-600":n.approval_status==="rejected"})},C(n.approval_status),3)]),m("div",null,[u[2]||(u[2]=m("b",{class:"text-label"},"Requested On:",-1)),y(" "+C(_(a)(n.request_date)),1)])]),m("div",null,[u[7]||(u[7]=m("b",{class:"block mb-2 text-label"},"Reason Details:",-1)),m("div",Xl,[t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[3]||(u[3]=[y("Reason:")])),_:1,__:[3]}),t(w,{class:"text-label"},{default:l(()=>[y(C(s(n).reason),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[4]||(u[4]=[y("Year:")])),_:1,__:[4]}),t(w,{class:"text-label"},{default:l(()=>[y(C(s(n).year),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[5]||(u[5]=[y("Remark:")])),_:1,__:[5]}),t(w,{class:"text-label"},{default:l(()=>[y(C(s(n).remark),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[6]||(u[6]=[y("Seniority List:")])),_:1,__:[6]}),t(w,{class:"text-label"},{default:l(()=>[y(C(s(n).seniority_list),1)]),_:2},1024)]),_:2},1024)]),s(n).supporting_document?(b(),U("div",Zl,[t(P,{dense:"",flat:"",color:"primary",icon:"attach_file",href:`/${s(n).supporting_document}`,target:"_blank",label:"View Document"},null,8,["href"])])):O("",!0)])]),_:2},1024),n.approval_status==="pending"?(b(),S(be,{key:0,align:"right"},{default:l(()=>[t(P,{label:"Approve",color:"positive",onClick:r=>v(n.id)},null,8,["onClick"]),t(P,{label:"Reject",color:"negative",onClick:r=>d(n.id)},null,8,["onClick"])]),_:2},1024)):O("",!0)]),_:2},1024))),128))]))]),_:1})]),_:1}))}},ta={key:0,class:"text-gray-500 text-center py-6"},la={key:1,class:"flex flex-col gap-4"},aa={class:"flex flex-wrap justify-between items-center mb-3"},na={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 p-3 rounded-md"},oa={key:0,class:"mt-3"},sa={__name:"RequestDeletion",props:["data"],setup(e){const{formatDate:a}=$e(),o=e,i=Re(),s=pe({reason:"",seniority_list:"",year:"",remark:"",supporting_document:null}),v=j(!1);function d(u){try{return JSON.parse(u.reason)}catch{return{}}}function g(){s.post(route("deletion.request",o.data),{preserveScroll:!0,onSuccess:()=>{i.notify({type:"positive",message:"Deletion request submitted successfully"}),v.value=!1,s.reset()},onError:u=>{Object.values(u).forEach(n=>{i.notify({type:"negative",message:n,position:"bottom"})})}})}return(u,n)=>(b(),S(F,{class:"q-mt-md"},{default:l(()=>[t(A,{class:"flex items-center justify-between"},{default:l(()=>[n[8]||(n[8]=m("div",{class:"stitle text-lg font-bold"},"Request Deletion",-1)),m("div",null,[e.data.employment_type!=="Deleted"?(b(),S(P,{key:0,label:"Request Deletion",color:"negative",onClick:n[0]||(n[0]=r=>v.value=!0)})):O("",!0)])]),_:1,__:[8]}),t(Be),t(De,{modelValue:v.value,"onUpdate:modelValue":n[7]||(n[7]=r=>v.value=r)},{default:l(()=>[t(F,{style:{"min-width":"400px"}},{default:l(()=>[t(A,null,{default:l(()=>n[9]||(n[9]=[m("div",{class:"text-h6"},"Submit Deletion Request",-1)])),_:1,__:[9]}),t(A,null,{default:l(()=>[t(H,{modelValue:_(s).reason,"onUpdate:modelValue":n[1]||(n[1]=r=>_(s).reason=r),label:"Reason",type:"textarea",outlined:"",error:!!_(s).errors.reason,"error-message":_(s).errors.reason},null,8,["modelValue","error","error-message"]),t(H,{modelValue:_(s).seniority_list,"onUpdate:modelValue":n[2]||(n[2]=r=>_(s).seniority_list=r),label:"Seniority List",outlined:"",class:"q-mt-sm"},null,8,["modelValue"]),t(H,{modelValue:_(s).year,"onUpdate:modelValue":n[3]||(n[3]=r=>_(s).year=r),label:"Year",type:"number",outlined:"",class:"q-mt-sm"},null,8,["modelValue"]),t(H,{modelValue:_(s).remark,"onUpdate:modelValue":n[4]||(n[4]=r=>_(s).remark=r),label:"Remark",type:"textarea",outlined:"",class:"q-mt-sm"},null,8,["modelValue"]),t(at,{modelValue:_(s).supporting_document,"onUpdate:modelValue":n[5]||(n[5]=r=>_(s).supporting_document=r),label:"Supporting Document",outlined:"",class:"q-mt-sm",error:!!_(s).errors.supporting_document,"error-message":_(s).errors.supporting_document},null,8,["modelValue","error","error-message"])]),_:1}),t(be,{align:"right"},{default:l(()=>[t(P,{flat:"",label:"Cancel",color:"grey",onClick:n[6]||(n[6]=r=>v.value=!1)}),t(P,{label:"Submit",color:"negative",onClick:g,loading:_(s).processing},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(A,null,{default:l(()=>[e.data.deletion_requests.length===0?(b(),U("div",ta," No deletion requests. ")):(b(),U("div",la,[(b(!0),U(ne,null,Se(e.data.deletion_requests,r=>(b(),S(F,{key:r.id,class:"shadow-md rounded-xl border border-gray-200 hover:shadow-lg transition"},{default:l(()=>[t(A,null,{default:l(()=>[m("div",aa,[m("div",null,[n[10]||(n[10]=m("b",{class:"text-label"},"Status:",-1)),m("span",{class:ge({"text-yellow-600":r.approval_status==="pending","text-green-600":r.approval_status==="approved","text-red-600":r.approval_status==="rejected"})},C(r.approval_status),3)]),m("div",null,[n[11]||(n[11]=m("b",{class:"text-label"},"Requested On:",-1)),y(" "+C(_(a)(r.request_date)),1)])]),m("div",null,[n[16]||(n[16]=m("b",{class:"block mb-2 text-label"},"Reason Details:",-1)),m("div",na,[t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[12]||(n[12]=[y("Reason:")])),_:1,__:[12]}),t(w,{class:"text-label"},{default:l(()=>[y(C(d(r).reason),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[13]||(n[13]=[y("Year:")])),_:1,__:[13]}),t(w,{class:"text-label"},{default:l(()=>[y(C(d(r).year),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[14]||(n[14]=[y("Remark:")])),_:1,__:[14]}),t(w,{class:"text-label"},{default:l(()=>[y(C(d(r).remark),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[15]||(n[15]=[y("Seniority List:")])),_:1,__:[15]}),t(w,{class:"text-label"},{default:l(()=>[y(C(d(r).seniority_list),1)]),_:2},1024)]),_:2},1024)]),d(r).supporting_document?(b(),U("div",oa,[t(P,{dense:"",flat:"",color:"primary",icon:"attach_file",href:`/${d(r).supporting_document}`,target:"_blank",label:"View Document"},null,8,["href"])])):O("",!0)])]),_:2},1024)]),_:2},1024))),128))]))]),_:1})]),_:1}))}},ia={key:0,class:"text-gray-500 text-center py-6"},ra={key:1,class:"flex flex-col gap-4"},ua={class:"flex flex-wrap justify-between items-center mb-3"},da={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 p-3 rounded-md"},ca={__name:"RequestEdit",props:["data"],setup(e){const{formatDate:a}=$e(),o=e,i=j(!1),s=pe({requested_changes:{name:"",date_of_birth:"",parent_name:"",employment_type:"",designation:"",educational_qln:"",name_of_workplace:"",post_per_qualification:"",date_of_engagement:"",skill_category:"",skill_at_present:""}}),v=[{label:"MR",value:"MR"},{label:"PE",value:"PE"}],d=[{label:"Unskilled",value:"Unskilled"},{label:"Semi-Skilled",value:"Semi-Skilled"},{label:"Skilled-I",value:"Skilled-I"},{label:"Skilled-II",value:"Skilled-II"}],g=()=>{s.post(route("edit.request",o.data),{onSuccess:()=>{i.value=!1,s.reset()}})},u=r=>{try{return JSON.parse(r)}catch{return{}}},n={name:"Name",date_of_birth:"Date of Birth",parent_name:"Parent's Name",employment_type:"Employment Type",designation:"Designation",educational_qln:"Educational Qualification",name_of_workplace:"Workplace Name",post_per_qualification:"Post per Qualification",date_of_engagement:"Date of Engagement",skill_category:"Skill Category",skill_at_present:"Skill at Present"};return(r,f)=>(b(),U(ne,null,[t(F,{class:"q-mt-md"},{default:l(()=>[t(A,{class:"flex items-center justify-between"},{default:l(()=>[f[12]||(f[12]=m("div",{class:"stitle text-lg font-bold"},"Request Edit",-1)),t(P,{label:"Request Edit",color:"primary",onClick:f[0]||(f[0]=p=>i.value=!0)})]),_:1,__:[12]}),t(Be),t(A,null,{default:l(()=>[e.data.edit_requests.length===0?(b(),U("div",ia," No edit requests found. ")):(b(),U("div",ra,[(b(!0),U(ne,null,Se(e.data.edit_requests,p=>(b(),S(F,{key:p.id,class:"shadow-md rounded-xl border border-gray-200 hover:shadow-lg transition"},{default:l(()=>[t(A,null,{default:l(()=>[m("div",ua,[m("div",null,[f[13]||(f[13]=m("b",{class:"text-label"},"Status:",-1)),m("span",{class:ge({"text-yellow-600":p.approval_status==="pending","text-green-600":p.approval_status==="approved","text-red-600":p.approval_status==="rejected"})},C(p.approval_status),3)]),m("div",null,[f[14]||(f[14]=m("b",{class:"text-label"},"Requested On:",-1)),y(" "+C(_(a)(p.request_date)),1)])]),m("div",null,[f[15]||(f[15]=m("b",{class:"block mb-2 text-label"},"Requested Changes:",-1)),m("div",da,[(b(!0),U(ne,null,Se(u(p.requested_changes),(T,x)=>(b(),U("div",{key:x,class:"flex justify-between items-center"},[t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>[y(C(n[x]??x)+": ",1)]),_:2},1024),t(w,{class:"text-label"},{default:l(()=>[y(C(x==="date_of_birth"||x==="date_of_engagement"?_(a)(T):T),1)]),_:2},1024)]),_:2},1024)]))),128))])])]),_:2},1024)]),_:2},1024))),128))]))]),_:1})]),_:1}),t(De,{modelValue:i.value,"onUpdate:modelValue":f[11]||(f[11]=p=>i.value=p),persistent:""},{default:l(()=>[t(F,{style:{"min-width":"400px"}},{default:l(()=>[t(A,null,{default:l(()=>f[16]||(f[16]=[m("div",{class:"text-lg font-bold"},"Request Edit",-1)])),_:1,__:[16]}),t(A,null,{default:l(()=>[t(H,{modelValue:_(s).requested_changes.name,"onUpdate:modelValue":f[1]||(f[1]=p=>_(s).requested_changes.name=p),label:"New Name",outlined:"",dense:""},null,8,["modelValue"]),t(H,{modelValue:_(s).requested_changes.date_of_birth,"onUpdate:modelValue":f[2]||(f[2]=p=>_(s).requested_changes.date_of_birth=p),label:"New Date of Birth",type:"date",outlined:"",dense:"",class:"q-mt-md"},null,8,["modelValue"]),t(H,{modelValue:_(s).requested_changes.parent_name,"onUpdate:modelValue":f[3]||(f[3]=p=>_(s).requested_changes.parent_name=p),label:"New Parent Name",outlined:"",dense:"",class:"q-mt-md"},null,8,["modelValue"]),t(H,{modelValue:_(s).requested_changes.educational_qln,"onUpdate:modelValue":f[4]||(f[4]=p=>_(s).requested_changes.educational_qln=p),label:"Education Qualification",outlined:"",dense:"",class:"q-mt-md"},null,8,["modelValue"]),t(H,{modelValue:_(s).requested_changes.designation,"onUpdate:modelValue":f[5]||(f[5]=p=>_(s).requested_changes.designation=p),label:"New Designation",outlined:"",dense:"",class:"q-mt-md"},null,8,["modelValue"]),t(H,{modelValue:_(s).requested_changes.date_of_engagement,"onUpdate:modelValue":f[6]||(f[6]=p=>_(s).requested_changes.date_of_engagement=p),label:"New Date of Engagement",type:"date",outlined:"",dense:"",class:"q-mt-md"},null,8,["modelValue"]),t(Ne,{modelValue:_(s).requested_changes.employment_type,"onUpdate:modelValue":f[7]||(f[7]=p=>_(s).requested_changes.employment_type=p),label:"New Employment Type",outlined:"",dense:"",class:"q-mt-md",options:v,"emit-value":"","map-options":""},null,8,["modelValue"]),_(s).requested_changes.employment_type==="MR"||e.data.employment_type==="MR"?(b(),S(H,{key:0,modelValue:_(s).requested_changes.post_per_qualification,"onUpdate:modelValue":f[8]||(f[8]=p=>_(s).requested_changes.post_per_qualification=p),label:"New Post per Qualification",outlined:"",dense:"",class:"q-mt-md"},null,8,["modelValue"])):O("",!0),_(s).requested_changes.employment_type==="MR"||e.data.employment_type==="MR"?(b(),S(Ne,{key:1,modelValue:_(s).requested_changes.skill_category,"onUpdate:modelValue":f[9]||(f[9]=p=>_(s).requested_changes.skill_category=p),label:"New Skill Category",outlined:"",dense:"",class:"q-mt-md",options:d,"emit-value":"","map-options":""},null,8,["modelValue"])):O("",!0),_(s).requested_changes.employment_type==="MR"||e.data.employment_type==="MR"?(b(),S(Ne,{key:2,modelValue:_(s).requested_changes.skill_at_present,"onUpdate:modelValue":f[10]||(f[10]=p=>_(s).requested_changes.skill_at_present=p),label:"New Skill at Present",outlined:"",dense:"",class:"q-mt-md",options:d,"emit-value":"","map-options":""},null,8,["modelValue"])):O("",!0)]),_:1}),t(be,{align:"right"},{default:l(()=>[fe(t(P,{flat:"",label:"Cancel"},null,512),[[Te]]),t(P,{label:"Submit",color:"primary",loading:_(s).processing,onClick:g},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},fa={__name:"RequestTransfer",props:["data","office"],setup(e){const{formatDate:a}=$e(),o=e,i=Re(),s=j(!1),v=pe({requested_office_id:""}),d=E(()=>{var u,n;return((n=(u=o.data.transfer_requests)==null?void 0:u.slice(-1)[0])==null?void 0:n.approval_status)==="pending"}),g=()=>{v.post(route("transfer.request",o.data),{onStart:()=>{i.loading.show()},onFinish:()=>{i.loading.hide(),s.value=!1,v.reset(),i.notify({type:"positive",message:"Transfer Requested",position:"bottom"})},onError:u=>{Object.values(u).forEach(n=>{i.notify({type:"negative",message:n,position:"bottom"})})}})};return(u,n)=>(b(),U(ne,null,[t(F,{class:"q-mt-md"},{default:l(()=>[t(A,{class:"flex items-center justify-between"},{default:l(()=>[n[3]||(n[3]=m("div",{class:"stitle text-lg font-bold"},"Request Transfer",-1)),m("div",null,[t(P,{label:"Request Transfer",color:"primary",disable:d.value,onClick:n[0]||(n[0]=r=>s.value=!0)},null,8,["disable"])])]),_:1,__:[3]}),t(Be),t(A,null,{default:l(()=>[n[4]||(n[4]=m("div",{class:"stitle text-md font-semibold q-mb-sm"},"Previous Requests",-1)),t(Dt,{rows:e.data.transfer_requests,columns:[{name:"id",label:"ID",field:"id",align:"left"},{name:"current_office",label:"Current Office",field:r=>{var f;return(f=r.current_office)==null?void 0:f.name}},{name:"requested_office",label:"Requested Office",field:r=>{var f;return(f=r.requested_office)==null?void 0:f.name}},{name:"status",label:"Status",field:"approval_status"},{name:"date",label:"Request Date",field:r=>_(a)(r.request_date)}],"row-key":"id",flat:"",bordered:""},null,8,["rows","columns"])]),_:1,__:[4]})]),_:1}),t(De,{modelValue:s.value,"onUpdate:modelValue":n[2]||(n[2]=r=>s.value=r),persistent:""},{default:l(()=>[t(F,{style:{"min-width":"400px"}},{default:l(()=>[t(A,null,{default:l(()=>n[5]||(n[5]=[m("div",{class:"text-h6"},"Select Requested Office",-1)])),_:1,__:[5]}),t(A,null,{default:l(()=>[t(Ne,{modelValue:_(v).requested_office_id,"onUpdate:modelValue":n[1]||(n[1]=r=>_(v).requested_office_id=r),options:e.office,"option-value":"id","option-label":"name",label:"Office",dense:"",outlined:""},null,8,["modelValue","options"])]),_:1}),t(be,{align:"right"},{default:l(()=>[fe(t(P,{flat:"",label:"Cancel",color:"negative"},null,512),[[Te]]),t(P,{flat:"",label:"Submit",color:"primary",onClick:g})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},ma=Rt(fa,[["__scopeId","data-v-f7de171d"]]),va=Oe({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:a}){const o=_t(qt,Ae);if(o===Ae)return console.error("QTimelineEntry needs to be child of QTimeline"),Ae;const i=E(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),s=E(()=>`q-timeline__dot text-${e.color||o.color}`),v=E(()=>o.layout==="comfortable"&&o.side==="left");return()=>{const d=Jt(a.default,[]);if(e.body!==void 0&&d.unshift(e.body),e.heading===!0){const n=[R("div"),R("div"),R(e.tag,{class:"q-timeline__heading-title"},d)];return R("div",{class:"q-timeline__heading"},v.value===!0?n.reverse():n)}let g;e.icon!==void 0?g=[R(ke,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(g=[R("img",{class:"q-timeline__dot-img",src:e.avatar})]);const u=[R("div",{class:"q-timeline__subtitle"},[R("span",{},je(a.subtitle,[e.subtitle]))]),R("div",{class:s.value},g),R("div",{class:"q-timeline__content"},[R("h6",{class:"q-timeline__title"},je(a.title,[e.title]))].concat(d))];return R("li",{class:i.value},v.value===!0?u.reverse():u)}}}),ga=Oe({name:"QTimeline",props:{...xt,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:a}){const o=ze(),i=Ct(e,o.proxy.$q);kt(qt,e);const s=E(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(i.value===!0?" q-timeline--dark":""));return()=>R("ul",{class:s.value},je(a.default))}}),pa={class:"flex items-center justify-between q-pa-md bg-white"},ba={class:"flex q-gutter-sm"},ya={key:0},_a={class:"flex items-center justify-between"},ha={key:1,class:"text-subtitle2 text-grey-7 q-pa-md"},wa={key:0},ka={key:1},qa={__name:"Transfer",props:["data","office","canCreateTransfer","canDeleteTransfer"],setup(e){const a=e,o=Re(),i=j(!1),s=j(!1),v=pe({old_office_id:null,new_office_id:null,transfer_date:"",is_present_transfer:!1}),d=E(()=>{var r;return[...((r=a.data)==null?void 0:r.transfers)||[]].sort((f,p)=>new Date(f.transfer_date)-new Date(p.transfer_date))});function g(r){return new Date(r).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})}const u=r=>{v.is_present_transfer=s.value,v.post(route("transfer.store",a.data),{onStart:()=>{o.loading.show(),v.reset()},onFinish:()=>{o.loading.hide(),i.value=!1,v.reset()},onError:f=>{Object.values(f).forEach(p=>{o.notify({type:"negative",message:p,position:"bottom"})})}})},n=r=>{o.dialog({title:"Confirmation",message:"Do you want to delete?",ok:"Yes",cancel:"No"}).onOk(()=>{et.delete(route("transfer.destroy",r),{onStart:f=>o.loading.show(),onFinish:f=>o.loading.hide(),preserveState:!1})})};return ce(s,r=>{r?(v.old_office_id=a.data.office,v.transfer_date=new Date().toISOString().split("T")[0]):(v.old_office_id=null,v.transfer_date="")}),(r,f)=>(b(),U(ne,null,[t(F,{class:"q-mt-md"},{default:l(()=>[m("div",pa,[f[7]||(f[7]=m("div",null,[m("div",{class:"stitle"},"Transfer History")],-1)),m("div",ba,[e.canCreateTransfer?(b(),S(P,{key:0,onClick:f[0]||(f[0]=p=>i.value=!0),color:"btn-primary",icon:"add"})):O("",!0)])]),t(A,null,{default:l(()=>[d.value.length>0?(b(),U("div",ya,[t(ga,{color:"primary",class:"q-pa-md"},{default:l(()=>[(b(!0),U(ne,null,Se(d.value,(p,T)=>(b(),S(va,{key:p.id,title:g(p.transfer_date),icon:T===d.value.length-1?"flag":"swap_horiz"},{subtitle:l(()=>[m("div",_a,[m("span",null,"Transfer #"+C(T+1),1),e.canDeleteTransfer?(b(),S(P,{key:0,icon:"delete",color:"red",flat:"",dense:"",size:"m",onClick:x=>n(p.id),title:"Delete Transfer"},null,8,["onClick"])):O("",!0)])]),default:l(()=>{var x,k;return[m("div",null,[f[8]||(f[8]=y(" From ")),m("strong",null,C(((x=p.old_office)==null?void 0:x.name)||"Unknown Office"),1),f[9]||(f[9]=y(" to ")),m("strong",null,C(((k=p.new_office)==null?void 0:k.name)||"Unknown Office"),1)])]}),_:2},1032,["title","icon"]))),128))]),_:1})])):(b(),U("div",ha," No transfer history found "))]),_:1})]),_:1}),t(De,{modelValue:i.value,"onUpdate:modelValue":f[6]||(f[6]=p=>i.value=p)},{default:l(()=>[t(F,{style:{"min-width":"400px"}},{default:l(()=>[t(A,null,{default:l(()=>f[10]||(f[10]=[m("div",{class:"stitle"},"Add Transfer",-1)])),_:1,__:[10]}),t(A,{class:"q-gutter-md"},{default:l(()=>[t(Gt,{modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=p=>s.value=p),label:"Is Present Transfer?",color:"primary"},null,8,["modelValue"]),s.value?(b(),U("div",wa,[t(H,{modelValue:e.data.office.name,"onUpdate:modelValue":f[2]||(f[2]=p=>e.data.office.name=p),label:"Old Office",dense:"",outlined:"",readonly:""},null,8,["modelValue"])])):(b(),U("div",ka,[t(Ne,{modelValue:_(v).old_office_id,"onUpdate:modelValue":f[3]||(f[3]=p=>_(v).old_office_id=p),options:e.office,"option-value":"id","option-label":"name",label:"Old Office",dense:"",outlined:""},null,8,["modelValue","options"])])),t(Ne,{modelValue:_(v).new_office_id,"onUpdate:modelValue":f[4]||(f[4]=p=>_(v).new_office_id=p),options:e.office,"option-value":"id","option-label":"name",label:"New Office",dense:"",outlined:""},null,8,["modelValue","options"]),t(H,{modelValue:_(v).transfer_date,"onUpdate:modelValue":f[5]||(f[5]=p=>_(v).transfer_date=p),type:"date",label:"Transfer Date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(be,{align:"right"},{default:l(()=>[fe(t(P,{flat:"",label:"Cancel"},null,512),[[Te]]),t(P,{flat:"",label:"Submit",color:"primary",onClick:u})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},xa=Oe({name:"QSpace",setup(){const e=R("div",{class:"q-space"});return()=>e}}),Ca={__name:"DeletionDialog",props:{modelValue:Boolean,employee:Object},emits:["update:modelValue"],setup(e,{emit:a}){const o=Re(),i=e,s=a,v=j(i.modelValue);ce(()=>i.modelValue,u=>v.value=u),ce(v,u=>s("update:modelValue",u));const d=pe({seniority_list:"",reason:"",year:new Date().getFullYear(),remark:"",supporting_document:null});function g(){d.post(route("deletion.store",i.employee),{preserveScroll:!0,onSuccess:()=>{v.value=!1,d.reset(),o.notify({type:"positive",message:"Employee Deleted successfully."})}})}return(u,n)=>(b(),S(De,{modelValue:v.value,"onUpdate:modelValue":n[5]||(n[5]=r=>v.value=r)},{default:l(()=>[t(F,{style:{"min-width":"400px"}},{default:l(()=>[t(A,{class:"row items-center q-pa-sm bg-negative text-white"},{default:l(()=>[n[6]||(n[6]=m("div",{class:"text-h6"},"Employee Deletion Details",-1)),t(xa),fe(t(P,{icon:"close",flat:"",round:"",dense:""},null,512),[[Te]])]),_:1,__:[6]}),t($t,{onSubmit:St(g,["prevent"])},{default:l(()=>[t(A,{class:"q-gutter-md"},{default:l(()=>[t(H,{modelValue:_(d).seniority_list,"onUpdate:modelValue":n[0]||(n[0]=r=>_(d).seniority_list=r),label:"Seniority List",dense:"",outlined:"",type:"number"},null,8,["modelValue"]),t(H,{modelValue:_(d).reason,"onUpdate:modelValue":n[1]||(n[1]=r=>_(d).reason=r),label:"Reason",dense:"",outlined:"",required:""},null,8,["modelValue"]),t(H,{modelValue:_(d).year,"onUpdate:modelValue":n[2]||(n[2]=r=>_(d).year=r),label:"Year",dense:"",outlined:"",type:"number"},null,8,["modelValue"]),t(H,{modelValue:_(d).remark,"onUpdate:modelValue":n[3]||(n[3]=r=>_(d).remark=r),label:"Remark",type:"textarea",dense:"",outlined:""},null,8,["modelValue"]),t(at,{modelValue:_(d).supporting_document,"onUpdate:modelValue":n[4]||(n[4]=r=>_(d).supporting_document=r),label:"Supporting Document",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(be,{align:"right",class:"q-pa-sm"},{default:l(()=>[fe(t(P,{flat:"",label:"Cancel"},null,512),[[Te]]),t(P,{color:"negative",label:"Submit Deletion",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Sa={class:"flex items-center justify-between q-pa-md bg-white"},Ta={class:"flex q-gutter-sm"},Da={__name:"Deletion",props:["deletion","canEditDelete"],setup(e){const a=Re(),o=e,i=j(!1),s=pe({reason:o.deletion.reason||"",seniority_list:o.deletion.seniority_list||"",year:o.deletion.year||"",remark:o.deletion.remark||"",supporting_document:null}),v=()=>{s.post(route("deletion.update",o.deletion),{preserveScroll:!0,onSuccess:()=>{i.value=!1,a.notify({type:"positive",message:"Deleted details updated successfully."})}})},d=g=>{window.open(g,"_blank")};return(g,u)=>(b(),U(ne,null,[t(F,{class:"q-mt-md"},{default:l(()=>[m("div",Sa,[u[8]||(u[8]=m("div",null,[m("div",{class:"stitle text-red"},"Deletion Detail")],-1)),m("div",Ta,[e.canEditDelete?(b(),S(P,{key:0,onClick:u[0]||(u[0]=n=>i.value=!0),color:"btn-primary",icon:"edit"})):O("",!0)])]),t(A,null,{default:l(()=>[t(Fe,{class:"q-mt-sm"},{default:l(()=>[t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[9]||(u[9]=[y("Reason:")])),_:1,__:[9]}),t(w,{class:"text-label"},{default:l(()=>[y(C(e.deletion.reason),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[10]||(u[10]=[y("Seniority List:")])),_:1,__:[10]}),t(w,{class:"text-label"},{default:l(()=>[y(C(e.deletion.seniority_list),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[11]||(u[11]=[y("Year:")])),_:1,__:[11]}),t(w,{class:"text-label"},{default:l(()=>[y(C(e.deletion.year),1)]),_:1})]),_:1}),e.deletion.remark?(b(),S(V,{key:0},{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[12]||(u[12]=[y("Remark:")])),_:1,__:[12]}),t(w,{class:"text-label"},{default:l(()=>[y(C(e.deletion.remark),1)]),_:1})]),_:1})):O("",!0),e.deletion.supporting_document?(b(),S(V,{key:1},{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>u[13]||(u[13]=[y("Supporting Document:")])),_:1,__:[13]}),t(w,{class:"text-label"},{default:l(()=>[t(P,{dense:"",flat:"",icon:"visibility",href:`/storage/${e.deletion.supporting_document}`,target:"_blank"},null,8,["href"])]),_:1})]),_:1})):O("",!0)]),_:1})]),_:1})]),_:1}),t(De,{modelValue:i.value,"onUpdate:modelValue":u[7]||(u[7]=n=>i.value=n)},{default:l(()=>[t(F,{style:{"min-width":"500px","max-width":"90vw"}},{default:l(()=>[t(A,{class:"bg-negative text-white"},{default:l(()=>u[14]||(u[14]=[m("div",{class:"text-h6"},"Edit Deletion Detail",-1)])),_:1,__:[14]}),t($t,{onSubmit:St(v,["prevent"])},{default:l(()=>[t(A,{class:"q-gutter-md"},{default:l(()=>[t(H,{modelValue:_(s).reason,"onUpdate:modelValue":u[1]||(u[1]=n=>_(s).reason=n),label:"Reason",outlined:"",dense:"",required:""},null,8,["modelValue"]),t(H,{modelValue:_(s).seniority_list,"onUpdate:modelValue":u[2]||(u[2]=n=>_(s).seniority_list=n),label:"Seniority List",outlined:"",dense:""},null,8,["modelValue"]),t(H,{modelValue:_(s).year,"onUpdate:modelValue":u[3]||(u[3]=n=>_(s).year=n),label:"Year",outlined:"",dense:"",type:"number"},null,8,["modelValue"]),t(H,{modelValue:_(s).remark,"onUpdate:modelValue":u[4]||(u[4]=n=>_(s).remark=n),label:"Remark",outlined:"",dense:"",type:"textarea"},null,8,["modelValue"]),t(at,{modelValue:_(s).supporting_document,"onUpdate:modelValue":u[6]||(u[6]=n=>_(s).supporting_document=n),label:"Supporting Document",outlined:"",dense:"",accept:".pdf,.png,.jpg,.jpeg"},Xt({_:2},[e.deletion.supporting_document?{name:"append",fn:l(()=>[t(P,{round:"",dense:"",flat:"",icon:"visibility",href:`/storage/${e.deletion.supporting_document}`,onClick:u[5]||(u[5]=n=>d(`/storage/${e.deletion.supporting_document}`)),class:"q-ml-sm"},null,8,["href"])]),key:"0"}:void 0]),1032,["modelValue"])]),_:1}),t(be,{align:"right"},{default:l(()=>[fe(t(P,{flat:"",label:"Cancel"},null,512),[[Te]]),t(P,{color:"primary",label:"Update",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Ra={class:"flex items-center justify-between q-pa-md bg-white"},$a={class:"flex q-gutter-sm"},Ea={key:0,class:"text-grey-7 text-center q-pa-md"},Va={class:"text-h6"},Pa={__name:"Remuneration",props:{data:Object,canCreateRemuneration:Boolean},setup(e){const{formatDate:a}=$e(),o=e,i=j(!1),s=j(!1),v=pe({remuneration:"",next_increment_date:""}),d=(u=!1)=>{s.value=u,u&&o.data.remuneration_detail?(v.remuneration=o.data.remuneration_detail.remuneration,v.next_increment_date=o.data.remuneration_detail.next_increment_date):v.reset(),i.value=!0},g=()=>{s.value?v.put(route("remuneration.update",o.data.id),{onSuccess:()=>{i.value=!1}}):v.post(route("remuneration.store",o.data.id),{onSuccess:()=>{i.value=!1,v.reset()}})};return(u,n)=>(b(),U(ne,null,[t(F,{class:"q-mt-md"},{default:l(()=>[m("div",Ra,[n[4]||(n[4]=m("div",null,[m("div",{class:"stitle"},"Remuneration Detail")],-1)),m("div",$a,[e.canCreateRemuneration?(b(),S(P,{key:0,onClick:n[0]||(n[0]=r=>d(!!e.data.remuneration_detail)),color:"btn-primary",icon:e.data.remuneration_detail?"edit":"add"},null,8,["icon"])):O("",!0)])]),t(A,null,{default:l(()=>[e.data.remuneration_detail?(b(),S(Fe,{key:1,class:"q-mt-sm"},{default:l(()=>[t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[5]||(n[5]=[y("Remuneration:")])),_:1,__:[5]}),t(w,{class:"text-label"},{default:l(()=>[y(" ₹ "+C(e.data.remuneration_detail.remuneration.toLocaleString()),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[6]||(n[6]=[y("Medical Allowance (%):")])),_:1,__:[6]}),t(w,{class:"text-label"},{default:l(()=>[y(C(e.data.remuneration_detail.medical_percentage),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[7]||(n[7]=[y("Medical Allowance:")])),_:1,__:[7]}),t(w,{class:"text-label"},{default:l(()=>[y(" ₹ "+C(e.data.remuneration_detail.medical_amount.toLocaleString()),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[8]||(n[8]=[y("Total:")])),_:1,__:[8]}),t(w,{class:"text-label"},{default:l(()=>[y(" ₹ "+C(e.data.remuneration_detail.total.toLocaleString()),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[9]||(n[9]=[y("Monthly Remuneration:")])),_:1,__:[9]}),t(w,{class:"text-label"},{default:l(()=>[y(" ₹ "+C(e.data.remuneration_detail.round_total.toLocaleString()),1)]),_:1})]),_:1}),t(Be,{spaced:""}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>n[10]||(n[10]=[y("Date of next Increment:")])),_:1,__:[10]}),t(w,{class:"text-label"},{default:l(()=>[y(C(_(a)(e.data.remuneration_detail.next_increment_date)),1)]),_:1})]),_:1})]),_:1})):(b(),U("div",Ea," No remuneration data available. "))]),_:1})]),_:1}),t(De,{modelValue:i.value,"onUpdate:modelValue":n[3]||(n[3]=r=>i.value=r)},{default:l(()=>[t(F,{style:{"min-width":"400px"}},{default:l(()=>[t(A,null,{default:l(()=>[m("div",Va,C(s.value?"Edit":"Add")+" Remuneration",1)]),_:1}),t(A,{class:"q-gutter-md"},{default:l(()=>[t(H,{label:"Remuneration",type:"number",modelValue:_(v).remuneration,"onUpdate:modelValue":n[1]||(n[1]=r=>_(v).remuneration=r),outlined:"",dense:""},null,8,["modelValue"]),t(H,{label:"Next Increment Date",type:"date",modelValue:_(v).next_increment_date,"onUpdate:modelValue":n[2]||(n[2]=r=>_(v).next_increment_date=r),outlined:"",dense:""},null,8,["modelValue"])]),_:1}),t(be,{align:"right"},{default:l(()=>[fe(t(P,{flat:"",label:"Cancel"},null,512),[[Te]]),t(P,{color:"primary",label:s.value?"Update":"Save",onClick:g},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};function Et(e,a){if(a&&e===a)return null;const o=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(o)===!0)return e;const i=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,s=i.display;return s==="block"||s==="table"?e:Et(e.parentNode)}function Je(e,a,o){return!e||e===document.body?!1:o===!0&&e===a||(a===document?document.body:a).contains(e.parentNode)}function Vt(e,a,o){if(o||(o=document.createRange(),o.selectNode(e),o.setStart(e,0)),a.count===0)o.setEnd(e,a.count);else if(a.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<a.count?a.count-=e.textContent.length:(o.setEnd(e,a.count),a.count=0);else for(let i=0;a.count!==0&&i<e.childNodes.length;i++)o=Vt(e.childNodes[i],a,o);return o}const La=/^https?:\/\//;class Oa{constructor(a,o){this.el=a,this.eVm=o,this._range=null}get selection(){if(this.el){const a=document.getSelection();if(Je(a.anchorNode,this.el,!0)&&Je(a.focusNode,this.el,!0))return a}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const a=this.selection;return a!=null&&a.rangeCount?a.getRangeAt(0):this._range}get parent(){const a=this.range;if(a!==null){const o=a.startContainer;return o.nodeType===document.ELEMENT_NODE?o:o.parentNode}return null}get blockParent(){const a=this.parent;return a!==null?Et(a,this.el):null}save(a=this.range){a!==null&&(this._range=a)}restore(a=this._range){const o=document.createRange(),i=document.getSelection();a!==null?(o.setStart(a.startContainer,a.startOffset),o.setEnd(a.endContainer,a.endOffset),i.removeAllRanges(),i.addRange(o)):(i.selectAllChildren(this.el),i.collapseToEnd())}savePosition(){let a=-1,o;const i=document.getSelection(),s=this.el.parentNode;if(i.focusNode&&Je(i.focusNode,s))for(o=i.focusNode,a=i.focusOffset;o&&o!==s;)o!==this.el&&o.previousSibling?(o=o.previousSibling,a+=o.textContent.length):o=o.parentNode;this.savedPos=a}restorePosition(a=0){if(this.savedPos>0&&this.savedPos<a){const o=window.getSelection(),i=Vt(this.el,{count:this.savedPos});i&&(i.collapse(!1),o.removeAllRanges(),o.addRange(i))}}hasParent(a,o){const i=o?this.parent:this.blockParent;return i!==null?i.nodeName.toLowerCase()===a.toLowerCase():!1}hasParents(a,o,i=this.parent){return i===null?!1:a.includes(i.nodeName.toLowerCase())===!0?!0:o===!0?this.hasParents(a,o,i.parentNode):!1}is(a,o){if(this.selection===null)return!1;switch(a){case"formatBlock":return o==="DIV"&&this.parent===this.el||this.hasParent(o,o==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(a)===o;case"fontName":const i=document.queryCommandValue(a);return i===`"${o}"`||i===o;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const s=document.queryCommandState(a);return o!==void 0?s===o:s}}getParentAttribute(a){return this.parent!==null?this.parent.getAttribute(a):null}can(a){if(a==="outdent")return this.hasParents(["blockquote","li"],!0);if(a==="indent")return this.hasParents(["li"],!0);if(a==="link")return this.selection!==null||this.is("link")}apply(a,o,i=Zt){if(a==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(o)&&this.is(a,o)&&(a="outdent",o=null),o==="PRE"&&this.is(a,"PRE")&&(o="P");else if(a==="print"){i();const s=window.open();s.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),s.print(),s.close();return}else if(a==="link"){const s=this.getParentAttribute("href");if(s===null){const v=this.selectWord(this.selection),d=v?v.toString():"";if(!d.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=La.test(d)?d:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(v.getRangeAt(0))}else this.eVm.editLinkUrl.value=s,this.range.selectNodeContents(this.parent),this.save();return}else if(a==="fullscreen"){this.eVm.toggleFullscreen(),i();return}else if(a==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),i();return}document.execCommand(a,!1,o),i()}selectWord(a){if(a===null||a.isCollapsed!==!0||a.modify===void 0)return a;const o=document.createRange();o.setStart(a.anchorNode,a.anchorOffset),o.setEnd(a.focusNode,a.focusOffset);const i=o.collapsed?["backward","forward"]:["forward","backward"];o.detach();const s=a.focusNode,v=a.focusOffset;return a.collapse(a.anchorNode,a.anchorOffset),a.modify("move",i[0],"character"),a.modify("move",i[1],"word"),a.extend(s,v),a.modify("extend",i[1],"character"),a.modify("extend",i[0],"word"),a}}const Ba=Oe({name:"QTooltip",inheritAttrs:!1,props:{...vl,...ll,...Ye,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Ye.transitionShow,default:"jump-down"},transitionHide:{...Ye.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:vt},self:{type:String,default:"top middle",validator:vt},offset:{type:Array,default:()=>[14,14],validator:ml},scrollTarget:tl,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...el],setup(e,{slots:a,emit:o,attrs:i}){let s,v;const d=ze(),{proxy:{$q:g}}=d,u=j(null),n=j(!1),r=E(()=>gt(e.anchor,g.lang.rtl)),f=E(()=>gt(e.self,g.lang.rtl)),p=E(()=>e.persistent!==!0),{registerTick:T,removeTick:x}=Me(),{registerTimeout:k}=Ze(),{transitionProps:W,transitionStyle:Y}=al(e),{localScrollTarget:ae,changeScrollEvent:L,unconfigureScrollTarget:J}=gl(e,Pe),{anchorEl:B,canShow:K,anchorEvents:Z}=pl({showing:n,configureAnchorEl:Ve}),{show:le,hide:me}=nl({showing:n,canShow:K,handleShow:ue,handleHide:qe,hideOnRouteChange:p,processOnMount:!0});Object.assign(Z,{delayShow:Ee,delayHide:xe});const{showPortal:ye,hidePortal:_e,renderPortal:$}=ol(d,u,se,"tooltip");if(g.platform.is.mobile===!0){const M={anchorEl:B,innerRef:u,onClickOutside(ie){return me(ie),ie.target.classList.contains("q-dialog__backdrop")&&lt(ie),!0}},ve=E(()=>e.modelValue===null&&e.persistent!==!0&&n.value===!0);ce(ve,ie=>{(ie===!0?bl:pt)(M)}),Qe(()=>{pt(M)})}function ue(M){ye(),T(()=>{v=new MutationObserver(()=>de()),v.observe(u.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),de(),Pe()}),s===void 0&&(s=ce(()=>g.screen.width+"|"+g.screen.height+"|"+e.self+"|"+e.anchor+"|"+g.lang.rtl,de)),k(()=>{ye(!0),o("show",M)},e.transitionDuration)}function qe(M){x(),_e(),he(),k(()=>{_e(!0),o("hide",M)},e.transitionDuration)}function he(){v!==void 0&&(v.disconnect(),v=void 0),s!==void 0&&(s(),s=void 0),J(),dt(Z,"tooltipTemp")}function de(){yl({targetEl:u.value,offset:e.offset,anchorEl:B.value,anchorOrigin:r.value,selfOrigin:f.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Ee(M){if(g.platform.is.mobile===!0){bt(),document.body.classList.add("non-selectable");const ve=B.value,ie=["touchmove","touchcancel","touchend","click"].map(c=>[ve,c,"delayHide","passiveCapture"]);ct(Z,"tooltipTemp",ie)}k(()=>{le(M)},e.delay)}function xe(M){g.platform.is.mobile===!0&&(dt(Z,"tooltipTemp"),bt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),k(()=>{me(M)},e.hideDelay)}function Ve(){if(e.noParentEvent===!0||B.value===null)return;const M=g.platform.is.mobile===!0?[[B.value,"touchstart","delayShow","passive"]]:[[B.value,"mouseenter","delayShow","passive"],[B.value,"mouseleave","delayHide","passive"]];ct(Z,"anchor",M)}function Pe(){if(B.value!==null||e.scrollTarget!==void 0){ae.value=sl(B.value,e.scrollTarget);const M=e.noParentEvent===!0?de:me;L(ae.value,M)}}function oe(){return n.value===!0?R("div",{...i,ref:u,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",i.class],style:[i.style,Y.value],role:"tooltip"},je(a.default)):null}function se(){return R(il,W.value,oe)}return Qe(he),Object.assign(d.proxy,{updatePosition:de}),$}});function Pt(e,a,o){a.handler?a.handler(e,o,o.caret):o.runCmd(a.cmd,a.param)}function nt(e){return R("div",{class:"q-editor__toolbar-group"},e)}function Lt(e,a,o,i=!1){const s=i||(a.type==="toggle"?a.toggled?a.toggled(e):a.cmd&&e.caret.is(a.cmd,a.param):!1),v=[];if(a.tip&&e.$q.platform.is.desktop){const d=a.key?R("div",[R("small",`(CTRL + ${String.fromCharCode(a.key)})`)]):null;v.push(R(Ba,{delay:1e3},()=>[R("div",{innerHTML:a.tip}),d]))}return R(P,{...e.buttonProps.value,icon:a.icon!==null?a.icon:void 0,color:s?a.toggleColor||e.props.toolbarToggleColor:a.color||e.props.toolbarColor,textColor:s&&!e.props.toolbarPush?null:a.textColor||e.props.toolbarTextColor,label:a.label,disable:a.disable?typeof a.disable=="function"?a.disable(e):!0:!1,size:"sm",onClick(d){o==null||o(),Pt(d,a,e)}},()=>v)}function Aa(e,a){const o=a.list==="only-icons";let i=a.label,s=a.icon!==null?a.icon:void 0,v,d;function g(){n.component.proxy.hide()}if(o)d=a.options.map(r=>{const f=r.type===void 0?e.caret.is(r.cmd,r.param):!1;return f&&(i=r.tip,s=r.icon!==null?r.icon:void 0),Lt(e,r,g,f)}),v=e.toolbarBackgroundClass.value,d=[nt(d)];else{const r=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,f=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,p=a.list==="no-icons";d=a.options.map(T=>{const x=T.disable?T.disable(e):!1,k=T.type===void 0?e.caret.is(T.cmd,T.param):!1;k&&(i=T.tip,s=T.icon!==null?T.icon:void 0);const W=T.htmlTip;return R(V,{active:k,activeClass:r,clickable:!0,disable:x,dense:!0,onClick(Y){var ae;g(),(Y==null?void 0:Y.qAvoidFocus)!==!0&&((ae=e.contentRef.value)==null||ae.focus()),e.caret.restore(),Pt(Y,T,e)}},()=>[p===!0?null:R(w,{class:k?r:f,side:!0},()=>R(ke,{name:T.icon!==null?T.icon:void 0})),R(w,W?()=>R("div",{class:"text-no-wrap",innerHTML:T.htmlTip}):T.tip?()=>R("div",{class:"text-no-wrap"},T.tip):void 0)])}),v=[e.toolbarBackgroundClass.value,f]}const u=a.highlight&&i!==a.label,n=R(Tt,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:u?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:u&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:a.fixedLabel?a.label:i,icon:a.fixedIcon?a.icon!==null?a.icon:void 0:s,contentClass:v,onShow:r=>e.emit("dropdownShow",r),onHide:r=>e.emit("dropdownHide",r),onBeforeShow:r=>e.emit("dropdownBeforeShow",r),onBeforeHide:r=>e.emit("dropdownBeforeHide",r)},()=>d);return n}function Na(e){if(e.caret)return e.buttons.value.filter(a=>!e.isViewingSource.value||a.find(o=>o.cmd==="viewsource")).map(a=>nt(a.map(o=>e.isViewingSource.value&&o.cmd!=="viewsource"?!1:o.type==="slot"?je(e.slots[o.slot]):o.type==="dropdown"?Aa(e,o):Lt(e,o))))}function ja(e,a,o,i={}){const s=Object.keys(i);if(s.length===0)return{};const v={default_font:{cmd:"fontName",param:e,icon:o,tip:a}};return s.forEach(d=>{const g=i[d];v[d]={cmd:"fontName",param:g,icon:o,tip:g,htmlTip:`<font face="${g}">${g}</font>`}}),v}function Ua(e){if(e.caret){const a=e.props.toolbarColor||e.props.toolbarTextColor;let o=e.editLinkUrl.value;const i=()=>{e.caret.restore(),o!==e.editLinkUrl.value&&document.execCommand("createLink",!1,o===""?" ":o),e.editLinkUrl.value=null};return[R("div",{class:`q-mx-xs text-${a}`},`${e.$q.lang.editor.url}: `),R("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:o,onInput:s=>{rl(s),o=s.target.value},onKeydown:s=>{if(tt(s)!==!0)switch(s.keyCode){case 13:return ft(s),i();case 27:ft(s),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),nt([R(P,{key:"qedt_btm_rem",tabindex:-1,...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),R(P,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:i})])]}}const Qa=Object.prototype.toString,Ge=Object.prototype.hasOwnProperty,za=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function yt(e){if(e!==Object(e)||za.has(Qa.call(e))===!0||e.constructor&&Ge.call(e,"constructor")===!1&&Ge.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let a;for(a in e);return a===void 0||Ge.call(e,a)}function Ot(){let e,a,o,i,s,v,d=arguments[0]||{},g=1,u=!1;const n=arguments.length;for(typeof d=="boolean"&&(u=d,d=arguments[1]||{},g=2),Object(d)!==d&&typeof d!="function"&&(d={}),n===g&&(d=this,g--);g<n;g++)if((e=arguments[g])!==null)for(a in e)o=d[a],i=e[a],d!==i&&(u===!0&&i&&((s=Array.isArray(i))||yt(i)===!0)?(s===!0?v=Array.isArray(o)===!0?o:[]:v=yt(o)===!0?o:{},d[a]=Ot(u,v,i)):i!==void 0&&(d[a]=i));return d}const Ia=Oe({name:"QEditor",props:{...xt,...xl,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(a=>a.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...ql,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:a,emit:o}){const{proxy:i}=ze(),{$q:s}=i,v=Ct(e,s),{inFullscreen:d,toggleFullscreen:g}=Cl(),u=ul(),n=j(null),r=j(null),f=j(null),p=j(!1),T=E(()=>!e.readonly&&!e.disable);let x,k,W=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),x=window.getComputedStyle(document.body).fontFamily;const Y=E(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),ae=E(()=>({type:"a",flat:e.toolbarOutline!==!0&&e.toolbarPush!==!0,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!T.value,size:"sm"})),L=E(()=>{const c=s.lang.editor,h=s.iconSet.editor;return{bold:{cmd:"bold",icon:h.bold,tip:c.bold,key:66},italic:{cmd:"italic",icon:h.italic,tip:c.italic,key:73},strike:{cmd:"strikeThrough",icon:h.strikethrough,tip:c.strikethrough,key:83},underline:{cmd:"underline",icon:h.underline,tip:c.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:h.unorderedList,tip:c.unorderedList},ordered:{cmd:"insertOrderedList",icon:h.orderedList,tip:c.orderedList},subscript:{cmd:"subscript",icon:h.subscript,tip:c.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:h.superscript,tip:c.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:Q=>Q.caret&&!Q.caret.can("link"),icon:h.hyperlink,tip:c.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:h.toggleFullscreen,tip:c.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:h.viewSource,tip:c.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:h.quote,tip:c.quote,key:81},left:{cmd:"justifyLeft",icon:h.left,tip:c.left},center:{cmd:"justifyCenter",icon:h.center,tip:c.center},right:{cmd:"justifyRight",icon:h.right,tip:c.right},justify:{cmd:"justifyFull",icon:h.justify,tip:c.justify},print:{type:"no-state",cmd:"print",icon:h.print,tip:c.print,key:80},outdent:{type:"no-state",disable:Q=>Q.caret&&!Q.caret.can("outdent"),cmd:"outdent",icon:h.outdent,tip:c.outdent},indent:{type:"no-state",disable:Q=>Q.caret&&!Q.caret.can("indent"),cmd:"indent",icon:h.indent,tip:c.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:h.removeFormat,tip:c.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:h.hr,tip:c.hr},undo:{type:"no-state",cmd:"undo",icon:h.undo,tip:c.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:h.redo,tip:c.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:h.heading1||h.heading,tip:c.heading1,htmlTip:`<h1 class="q-ma-none">${c.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:h.heading2||h.heading,tip:c.heading2,htmlTip:`<h2 class="q-ma-none">${c.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:h.heading3||h.heading,tip:c.heading3,htmlTip:`<h3 class="q-ma-none">${c.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:h.heading4||h.heading,tip:c.heading4,htmlTip:`<h4 class="q-ma-none">${c.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:h.heading5||h.heading,tip:c.heading5,htmlTip:`<h5 class="q-ma-none">${c.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:h.heading6||h.heading,tip:c.heading6,htmlTip:`<h6 class="q-ma-none">${c.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:h.heading,tip:c.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:h.code,htmlTip:`<code>${c.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:h.size1||h.size,tip:c.size1,htmlTip:`<font size="1">${c.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:h.size2||h.size,tip:c.size2,htmlTip:`<font size="2">${c.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:h.size3||h.size,tip:c.size3,htmlTip:`<font size="3">${c.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:h.size4||h.size,tip:c.size4,htmlTip:`<font size="4">${c.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:h.size5||h.size,tip:c.size5,htmlTip:`<font size="5">${c.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:h.size6||h.size,tip:c.size6,htmlTip:`<font size="6">${c.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:h.size7||h.size,tip:c.size7,htmlTip:`<font size="7">${c.size7}</font>`}}}),J=E(()=>{const c=e.definitions||{},h=e.definitions||e.fonts?Ot(!0,{},L.value,c,ja(x,s.lang.editor.defaultFont,s.iconSet.editor.font,e.fonts)):L.value;return e.toolbar.map(Q=>Q.map(ee=>{if(ee.options)return{type:"dropdown",icon:ee.icon,label:ee.label,size:"sm",dense:!0,fixedLabel:ee.fixedLabel,fixedIcon:ee.fixedIcon,highlight:ee.highlight,list:ee.list,options:ee.options.map(He=>h[He])};const re=h[ee];return re?re.type==="no-state"||c[ee]&&(re.cmd===void 0||L.value[re.cmd]&&L.value[re.cmd].type==="no-state")?re:Object.assign({type:"toggle"},re):{type:"slot",slot:ee}}))}),B={$q:s,props:e,slots:a,emit:o,inFullscreen:d,toggleFullscreen:g,runCmd:se,isViewingSource:p,editLinkUrl:f,toolbarBackgroundClass:Y,buttonProps:ae,contentRef:r,buttons:J,setContent:oe};ce(()=>e.modelValue,c=>{W!==c&&(W=c,oe(c,!0))}),ce(f,c=>{o(`link${c?"Show":"Hide"}`)});const K=E(()=>e.toolbar&&e.toolbar.length!==0),Z=E(()=>{const c={},h=Q=>{Q.key&&(c[Q.key]={cmd:Q.cmd,param:Q.param})};return J.value.forEach(Q=>{Q.forEach(ee=>{ee.options?ee.options.forEach(h):h(ee)})}),c}),le=E(()=>d.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),me=E(()=>`q-editor q-editor--${p.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(d.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(v.value===!0?" q-editor--dark q-dark":"")),ye=E(()=>[e.contentClass,"q-editor__content",{col:d.value,"overflow-auto":d.value||e.maxHeight}]),_e=E(()=>e.disable===!0?{"aria-disabled":"true"}:{});function $(){if(r.value!==null){const c=`inner${p.value===!0?"Text":"HTML"}`,h=r.value[c];h!==e.modelValue&&(W=h,o("update:modelValue",h))}}function ue(c){if(o("keydown",c),c.ctrlKey!==!0||tt(c)===!0){M();return}const h=c.keyCode,Q=Z.value[h];if(Q!==void 0){const{cmd:ee,param:re}=Q;lt(c),se(ee,re,!1)}}function qe(c){M(),o("click",c)}function he(c){if(r.value!==null){const{scrollTop:h,scrollHeight:Q}=r.value;k=Q-h}B.caret.save(),o("blur",c)}function de(c){dl(()=>{r.value!==null&&k!==void 0&&(r.value.scrollTop=r.value.scrollHeight-k)}),o("focus",c)}function Ee(c){const h=n.value;if(h!==null&&h.contains(c.target)===!0&&(c.relatedTarget===null||h.contains(c.relatedTarget)!==!0)){const Q=`inner${p.value===!0?"Text":"HTML"}`;B.caret.restorePosition(r.value[Q].length),M()}}function xe(c){const h=n.value;h!==null&&h.contains(c.target)===!0&&(c.relatedTarget===null||h.contains(c.relatedTarget)!==!0)&&(B.caret.savePosition(),M())}function Ve(){k=void 0}function Pe(c){B.caret.save()}function oe(c,h){if(r.value!==null){h===!0&&B.caret.savePosition();const Q=`inner${p.value===!0?"Text":"HTML"}`;r.value[Q]=c,h===!0&&(B.caret.restorePosition(r.value[Q].length),M())}}function se(c,h,Q=!0){ve(),B.caret.restore(),B.caret.apply(c,h,()=>{ve(),B.caret.save(),Q&&M()})}function M(){setTimeout(()=>{f.value=null,i.$forceUpdate()},1)}function ve(){cl(()=>{var c;(c=r.value)==null||c.focus({preventScroll:!0})})}function ie(){return r.value}return wt(()=>{B.caret=i.caret=new Oa(r.value,B),oe(e.modelValue),M(),document.addEventListener("selectionchange",Pe)}),Qe(()=>{document.removeEventListener("selectionchange",Pe)}),Object.assign(i,{runCmd:se,refreshToolbar:M,focus:ve,getContentEl:ie}),()=>{let c;if(K.value){const h=[R("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+Y.value},Na(B))];f.value!==null&&h.push(R("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+Y.value},Ua(B))),c=R("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},h)}return R("div",{ref:n,class:me.value,style:{height:d.value===!0?"100%":null},..._e.value,onFocusin:Ee,onFocusout:xe},[c,R("div",{ref:r,style:le.value,class:ye.value,contenteditable:T.value,placeholder:e.placeholder,...u.listeners.value,onInput:$,onKeydown:ue,onClick:qe,onBlur:he,onFocus:de,onMousedown:Ve,onTouchstartPassive:Ve})])}}}),Ma={class:"flex items-center justify-between q-pa-md bg-white"},Fa={class:"flex q-gutter-sm"},Ha={__name:"EngagementCard",props:{data:Object,canCreateEngagementCard:Boolean,canDownloadEngagementCard:Boolean},setup(e){var n,r;const a=e,o=pe({html_content:((r=(n=a.data)==null?void 0:n.engagement_card)==null?void 0:r.content)||""}),i=j(!1),s=j(""),v=Re(),d=async()=>{i.value=!0;try{axios.get(route("engagement-card.show",a.data)).then(f=>{s.value=f.data,o.html_content=f.data})}catch{v.notify({type:"negative",message:"Failed to load card data"})}},g=()=>{o.post(route("engagement-card.store",a.data),{preserveScroll:!0,onSuccess:()=>{i.value=!1,v.notify({type:"positive",message:"Card saved successfully!"})}})},u=async()=>{try{const f=await axios.get(route("engagement-card.download",a.data),{responseType:"blob"}),p=window.URL.createObjectURL(new Blob([f.data],{type:"application/pdf"})),T=document.createElement("a");T.href=p,T.setAttribute("download",`EngagementCard_${a.data.id}.pdf`),document.body.appendChild(T),T.click(),T.remove()}catch{v.notify({type:"negative",message:"Failed to download PDF."})}};return(f,p)=>(b(),S(F,{class:"q-mt-md"},{default:l(()=>[m("div",Ma,[p[2]||(p[2]=m("div",null,[m("div",{class:"stitle"},"Engagement Card")],-1)),m("div",Fa,[e.data.engagement_card&&e.canCreateEngagementCard?(b(),S(P,{key:0,color:"primary",icon:"edit",onClick:d})):O("",!0)])]),t(A,null,{default:l(()=>[!e.data.engagement_card&&e.canCreateEngagementCard?(b(),S(P,{key:0,color:"primary",label:"Create",onClick:d})):O("",!0),e.data.engagement_card&&e.canDownloadEngagementCard?(b(),S(P,{key:1,color:"primary",label:"Download",onClick:u})):O("",!0),t(De,{modelValue:i.value,"onUpdate:modelValue":p[1]||(p[1]=T=>i.value=T),persistent:""},{default:l(()=>[t(F,{style:{width:"1000px","max-width":"100vw"}},{default:l(()=>[t(A,{class:"row items-center justify-between bg-primary text-white"},{default:l(()=>[p[3]||(p[3]=m("div",{class:"text-h6"},"Engagement Card",-1)),fe(t(P,{dense:"",flat:"",icon:"close"},null,512),[[Te]])]),_:1,__:[3]}),t(A,{style:{"flex-grow":"1",overflow:"auto",padding:"0"}},{default:l(()=>[t(Ia,{modelValue:_(o).html_content,"onUpdate:modelValue":p[0]||(p[0]=T=>_(o).html_content=T),style:{width:"100%","max-height":"1100px"}},null,8,["modelValue"])]),_:1}),t(be,{align:"right",style:{"flex-shrink":"0"}},{default:l(()=>[t(P,{color:"primary",label:"Save",onClick:g})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}},Wa={class:"flex items-center justify-between q-pa-md bg-white"},Ka={class:"row q-col-gutter-md"},Ya={class:"col-12 col-md-4"},Ja={class:"column items-center q-gutter-sm"},Ga={class:"stitle"},Xa={class:"q-mt-lg full-width"},Za={class:"q-mt-lg flex items-center justify-center"},en={class:"col-12 col-md-8"},tn={class:"row q-col-gutter-md"},ln={class:"col-12 col-md-7"},an={class:"col-12 col-md-5"},_n=Object.assign({layout:_l},{__name:"Show",props:["data","office","canCreate","canEdit","canDelete","canCreateRemuneration","canCreateTransfer","canDeleteTransfer","canCreateEngagementCard","canDownloadEngagementCard","canRequestEdit","canRequestDelete","canRequestTransfer","canApproveEdit","canApproveTransfer","canApproveDelete","canEditDelete"],setup(e){const{formatDate:a}=$e(),o=e,i=j("document"),s=j(!1),v=E(()=>{var x;return!!((x=mt().props.roles)!=null&&x.find(k=>k==="Admin"))}),d=E(()=>{var x;return!!((x=mt().props.roles)!=null&&x.find(k=>k==="Manager"))}),g=E(()=>{const x=o.data.edit_requests;return x&&x.length?x[x.length-1]:null}),u=E(()=>{const x=o.data.deletion_requests;return x&&x.length?x[x.length-1]:null}),n=E(()=>{const x=o.data.transfer_requests;return x&&x.length?x[x.length-1]:null});function r(x){if(!x)return!0;const k=new Date,W=new Date(x);return(k-W)/(1e3*60*60*24)<=15}const f=E(()=>g.value?v.value?g.value.approval_status==="pending":d.value?g.value.approval_status!=="pending"&&r(g.value.approval_date):!1:!1),p=E(()=>u.value?v.value?u.value.approval_status==="pending":d.value?u.value.approval_status!=="pending"&&r(u.value.approval_date):!1:!1),T=E(()=>n.value?v.value?n.value.approval_status==="pending":d.value?n.value.approval_status!=="pending"&&r(n.value.approval_date):!1:!1);return(x,k)=>(b(),S(Ft,{class:"container",padding:""},{default:l(()=>[m("div",Wa,[m("div",null,[k[5]||(k[5]=m("div",{class:"stitle"},"Employee Detail",-1)),t(zt,{class:"text-dark"},{default:l(()=>[t(ut,{onClick:k[0]||(k[0]=W=>x.$inertia.get(x.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),t(ut,{label:"All Employees",to:x.route("mis.import")},null,8,["to"])]),_:1})])]),k[24]||(k[24]=m("br",null,null,-1)),t(F,{flat:""},{default:l(()=>[t(A,null,{default:l(()=>[m("div",Ka,[m("div",Ya,[t(F,{class:"q-pa-md"},{default:l(()=>{var W,Y,ae,L,J,B;return[m("div",Ja,[t(fl,{size:"96px"},{default:l(()=>{var K,Z;return[(K=e.data)!=null&&K.avatar?(b(),S(Mt,{key:0,src:`/storage/${(Z=e.data)==null?void 0:Z.avatar}`},null,8,["src"])):(b(),S(ke,{key:1,name:"person",color:"primary"}))]}),_:1}),m("div",Ga,C(e.data.name),1),t(hl,{color:((Y=(W=e.data)==null?void 0:W.employment_type)==null?void 0:Y.trim())==="Deleted"?"red-6":"grey-6","text-color":"white",class:"stitle",label:((L=(ae=e.data)==null?void 0:ae.employment_type)==null?void 0:L.trim())==="MR"?"Muster Roll":((B=(J=e.data)==null?void 0:J.employment_type)==null?void 0:B.trim())==="PE"?"Provisional":"Deleted",style:{padding:"8px"},rounded:""},null,8,["color","label"]),m("div",Xa,[t(Fe,{class:"rounded-borders"},{default:l(()=>{var K,Z,le,me,ye,_e;return[t(V,null,{default:l(()=>[t(w,{class:"text-label"},{default:l(()=>k[6]||(k[6]=[y("Details")])),_:1,__:[6]})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[7]||(k[7]=[y("Employee Code:")])),_:1,__:[7]}),t(w,{class:"text-label"},{default:l(()=>{var $;return[y(C(($=e.data)==null?void 0:$.employee_code),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[8]||(k[8]=[y("Name:")])),_:1,__:[8]}),t(w,{class:"text-label"},{default:l(()=>{var $;return[y(C(($=e.data)==null?void 0:$.name),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[9]||(k[9]=[y("Email:")])),_:1,__:[9]}),t(w,{class:"text-label"},{default:l(()=>[y(C(e.data.email),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[10]||(k[10]=[y("Contact:")])),_:1,__:[10]}),t(w,{class:"text-label"},{default:l(()=>{var $;return[y(C(($=e.data)==null?void 0:$.mobile),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[11]||(k[11]=[y("Parent Name:")])),_:1,__:[11]}),t(w,{class:"text-label"},{default:l(()=>{var $;return[y(C(($=e.data)==null?void 0:$.parent_name),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[12]||(k[12]=[y("Date of Birth:")])),_:1,__:[12]}),t(w,{class:"text-label"},{default:l(()=>[y(C(_(a)(e.data.date_of_birth)),1)]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[13]||(k[13]=[y("Address:")])),_:1,__:[13]}),t(w,{class:"text-label"},{default:l(()=>{var $;return[y(C((($=e.data)==null?void 0:$.address)??"N/A"),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[14]||(k[14]=[y("Education Qln.:")])),_:1,__:[14]}),t(w,{class:"text-label"},{default:l(()=>{var $;return[y(C(($=e.data)==null?void 0:$.educational_qln),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[15]||(k[15]=[y("Technical Qln.:")])),_:1,__:[15]}),t(w,{class:"text-label"},{default:l(()=>{var $;return[y(C(($=e.data)==null?void 0:$.technical_qln),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[16]||(k[16]=[y("Designation:")])),_:1,__:[16]}),t(w,{class:"text-label"},{default:l(()=>{var $;return[y(C(($=e.data)==null?void 0:$.designation),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[17]||(k[17]=[y("Office:")])),_:1,__:[17]}),t(w,{class:"text-label"},{default:l(()=>{var $,ue;return[y(C((ue=($=e.data)==null?void 0:$.office)==null?void 0:ue.name),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[18]||(k[18]=[y("Office Type:")])),_:1,__:[18]}),t(w,{class:"text-label"},{default:l(()=>{var $,ue;return[y(C((ue=($=e.data)==null?void 0:$.office)==null?void 0:ue.type),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[19]||(k[19]=[y("Workplace:")])),_:1,__:[19]}),t(w,{class:"text-label"},{default:l(()=>{var $;return[y(C(($=e.data)==null?void 0:$.name_of_workplace),1)]}),_:1})]),_:1}),t(V,null,{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[20]||(k[20]=[y("Date of Engagement:")])),_:1,__:[20]}),t(w,{class:"text-label"},{default:l(()=>{var $;return[y(C(_(a)(($=e.data)==null?void 0:$.date_of_engagement)||"N/A"),1)]}),_:1})]),_:1}),((Z=(K=e.data)==null?void 0:K.employment_type)==null?void 0:Z.trim())==="MR"?(b(),S(V,{key:0},{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[21]||(k[21]=[y("Post Per Qualification:")])),_:1,__:[21]}),t(w,{class:"text-label"},{default:l(()=>{var $;return[y(C(($=e.data)==null?void 0:$.post_per_qualification),1)]}),_:1})]),_:1})):O("",!0),((me=(le=e.data)==null?void 0:le.employment_type)==null?void 0:me.trim())==="MR"?(b(),S(V,{key:1},{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[22]||(k[22]=[y("Skill Category:")])),_:1,__:[22]}),t(w,{class:"text-label"},{default:l(()=>{var $;return[y(C(($=e.data)==null?void 0:$.skill_category),1)]}),_:1})]),_:1})):O("",!0),((_e=(ye=e.data)==null?void 0:ye.employment_type)==null?void 0:_e.trim())==="MR"?(b(),S(V,{key:2},{default:l(()=>[t(w,{side:"",class:"subtitle"},{default:l(()=>k[23]||(k[23]=[y("Skill at Present:")])),_:1,__:[23]}),t(w,{class:"text-label"},{default:l(()=>{var $;return[y(C(($=e.data)==null?void 0:$.skill_at_present),1)]}),_:1})]),_:1})):O("",!0)]}),_:1}),m("div",Za,[e.canEdit?(b(),S(P,{key:0,label:"Edit",onClick:k[1]||(k[1]=K=>x.$inertia.get(x.route("employee.edit",e.data))),class:"q-mr-md",color:"primary"})):O("",!0),e.canDelete&&e.data.employment_type!=="Deleted"?(b(),S(P,{key:1,label:"Delete",color:"negative",unelevated:"",onClick:k[2]||(k[2]=K=>s.value=!0)})):O("",!0)])])])]}),_:1})]),t(Ca,{modelValue:s.value,"onUpdate:modelValue":k[3]||(k[3]=W=>s.value=W),employee:e.data},null,8,["modelValue","employee"]),m("div",en,[t(Pl,{modelValue:i.value,"onUpdate:modelValue":k[4]||(k[4]=W=>i.value=W),class:"text-primary bg-white shadow-1 q-pa-sm",dense:"",align:"center"},{default:l(()=>[t(Le,{name:"document",label:"Documents",icon:"drive_folder_upload"}),v.value&&e.canApproveEdit?(b(),S(Le,{key:0,name:"edit",label:"Edit Request",icon:"edit",alert:f.value,"alert-icon":"circle","alert-color":"red",class:ge(f.value?"text-red":"")},null,8,["alert","class"])):O("",!0),v.value&&e.canApproveTransfer?(b(),S(Le,{key:1,name:"transfer_request",label:"Transfer Request",icon:"input",alert:T.value,"alert-icon":"circle","alert-color":"red",class:ge(T.value?"text-red":"")},null,8,["alert","class"])):O("",!0),v.value&&e.canApproveDelete?(b(),S(Le,{key:2,name:"deletion",label:"Deletion Request",icon:"delete_sweep",alert:p.value,"alert-icon":"circle","alert-color":"red",class:ge(p.value?"text-red":"")},null,8,["alert","class"])):O("",!0),d.value&&e.canRequestEdit?(b(),S(Le,{key:3,name:"request_edit",label:"Request Edit",icon:"edit",alert:f.value,"alert-icon":"circle","alert-color":"red",class:ge(f.value?"text-red":"")},null,8,["alert","class"])):O("",!0),d.value&&e.canRequestTransfer?(b(),S(Le,{key:4,name:"request_transfer",label:"Request Transfer",icon:"input",alert:T.value,"alert-icon":"circle","alert-color":"red",class:ge(T.value?"text-red":"")},null,8,["alert","class"])):O("",!0),d.value&&e.canRequestDelete?(b(),S(Le,{key:5,name:"request_deletion",label:"Request Deletion",icon:"delete_sweep",alert:p.value,"alert-icon":"circle","alert-color":"red",class:ge(p.value?"text-red":"")},null,8,["alert","class"])):O("",!0)]),_:1},8,["modelValue"]),i.value==="document"?(b(),S(Ql,{key:0,data:e.data},null,8,["data"])):O("",!0),i.value==="edit"?(b(),S(Kl,{key:1,data:e.data},null,8,["data"])):O("",!0),i.value==="transfer_request"?(b(),S(Il,{key:2,data:e.data,office:e.office},null,8,["data","office"])):O("",!0),i.value==="deletion"?(b(),S(ea,{key:3,data:e.data},null,8,["data"])):O("",!0),i.value==="request_edit"?(b(),S(ca,{key:4,data:e.data},null,8,["data"])):O("",!0),i.value==="request_transfer"?(b(),S(ma,{key:5,data:e.data,office:e.office},null,8,["data","office"])):O("",!0),i.value==="request_deletion"?(b(),S(sa,{key:6,data:e.data},null,8,["data"])):O("",!0),m("div",tn,[m("div",ln,[e.data.remuneration_detail?(b(),S(Pa,{key:0,data:e.data,canCreateRemuneration:e.canCreateRemuneration},null,8,["data","canCreateRemuneration"])):O("",!0),t(qa,{data:e.data,office:e.office,canCreateTransfer:e.canCreateTransfer,canDeleteTransfer:e.canDeleteTransfer},null,8,["data","office","canCreateTransfer","canDeleteTransfer"])]),m("div",an,[e.data.employment_type==="PE"?(b(),S(Ha,{key:0,data:e.data,canCreateEngagementCard:e.canCreateEngagementCard,canDownloadEngagementCard:e.canDownloadEngagementCard},null,8,["data","canCreateEngagementCard","canDownloadEngagementCard"])):O("",!0),e.data.employment_type==="Deleted"?(b(),S(Da,{key:1,deletion:e.data.deletion_detail,canEditDelete:e.canEditDelete},null,8,["deletion","canEditDelete"])):O("",!0)])])])])]),_:1})]),_:1})]),_:1,__:[24]}))}});export{_n as default};
