import{Q as p,a as c}from"./QBreadcrumbs-BZbs9Mm_.js";import{r as b,c as g,o as w,w as s,b as l,f as t,m as y,p as Q,q as h,Q as k,z as v}from"./app-B3T-7GkY.js";import{Q as x}from"./QTable-Bl_yv-jF.js";import{Q as B}from"./QLayout-BVOh0iVB.js";import{_}from"./BackendLayout-rBGgjobV.js";import{u as C}from"./use-quasar-BoeiZinQ.js";import"./use-fullscreen-D0c03yr1.js";import"./QSelect-F2ZTeegN.js";import"./touch-Cd9t7mZG.js";const E={class:"flex items-center justify-between q-pa-md bg-white"},P={class:"q-gutter-sm"},S=Object.assign({layout:_},{__name:"Provisional",props:{offices:Array,designations:Array},setup(m){const d=m,r=C(),n=b(""),i=[{name:"name",label:"Office Name",field:"name",align:"left",sortable:!0}];d.designations.forEach(a=>{i.push({name:a,label:a,field:a,align:"center",sortable:!0})}),i.push({name:"total",label:"Total",field:"total",align:"center",sortable:!0});const u=()=>{r.loading.show(),axios.get(route("export.summary-pe"),{responseType:"blob"}).then(a=>{const e=window.URL.createObjectURL(new Blob([a.data])),o=document.createElement("a");o.href=e,o.setAttribute("download",Date.now()+".xlsx"),o.click()}).catch(a=>{var e,o;r.notify({type:"negative",message:((o=(e=a.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to download file"})}).finally(()=>{r.loading.hide()})},f=a=>{window.history.back()};return(a,e)=>(w(),g(B,{class:"container",padding:""},{default:s(()=>[l("div",E,[l("div",null,[e[3]||(e[3]=l("div",{class:"stitle"},"Provisional Employees Summary",-1)),t(p,{class:"text-dark"},{default:s(()=>[t(c,{class:"cursor-pointer",onClick:e[0]||(e[0]=o=>a.$inertia.get(a.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),t(c,{class:"cursor-pointer",label:"Go Back",onClick:f})]),_:1})]),l("div",P,[t(y,{label:"Export",color:"primary",onClick:e[1]||(e[1]=o=>u()),icon:"download"})])]),e[4]||(e[4]=l("br",null,null,-1)),t(Q,{flat:""},{default:s(()=>[t(h,null,{default:s(()=>[t(x,{rows:d.offices,columns:i,"row-key":"id",flat:"",filter:n.value,pagination:{rowsPerPage:0}},{"top-right":s(()=>[t(k,{borderless:"",dense:"",debounce:"800",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=o=>n.value=o),outlined:"",clearable:"",placeholder:"Search Office"},{append:s(()=>[t(v,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","filter"])]),_:1})]),_:1})]),_:1,__:[4]}))}});export{S as default};
