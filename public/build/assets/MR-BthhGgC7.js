import{Q as te,a as O}from"./QBreadcrumbs-DraDP7zF.js";import{a as J,Q as ae}from"./QLayout-T0AkPtrj.js";import{r as F,x as re,d as ne,o as v,w as f,e as s,i as a,E as ie,q as p,Q as _,u as o,f as b,g as L,F as z,v as K,t as m,h as u,D as de,W as me}from"./app-BXWKz8m6.js";import{Q as w}from"./QSelect-BZBUBe8J.js";import{Q as M}from"./QStepperNavigation-mGkgJYLn.js";import{Q as ue,a as j}from"./QStepper-BJwd_Ees.js";import{Q as ce}from"./QFile-DL5M4NgU.js";import{Q as pe}from"./QForm-C3r1xNUI.js";import{_ as fe}from"./BackendLayout-DOW1lWmD.js";import{u as ge}from"./use-quasar-CM7wr-kL.js";import{u as _e}from"./useUtils-DvRR5i1J.js";/* empty css            */import"./format-C-gRaPJk.js";import"./QSlideTransition-d_caXKTk.js";import"./use-panel-_GuEU7-G.js";import"./touch-nhsbzi5z.js";import"./date-C7kRv4CT.js";const ve={class:"flex items-center justify-between q-pa-md bg-white"},be={class:"q-pa-md"},ye={class:"row items-center q-gutter-md"},ke={class:"rounded-borders overflow-hidden",style:{"background-color":"#8a82f7"}},qe={class:"column q-gutter-sm"},Ve={class:"row q-gutter-md"},we={class:"row q-col-gutter-sm"},he={class:"col-12 col-sm-6"},Ue={class:"col-12 col-sm-6"},Se={class:"col-12 col-sm-6"},Ce={class:"col-12 col-sm-6"},Qe={class:"col-12 col-sm-6"},Pe={class:"col-12 col-sm-6"},xe={class:"col-12 col-sm-6"},Ee={class:"col-12 col-sm-6"},Ie={class:"row q-col-gutter-sm"},Ne={class:"col-12 col-sm-6"},Be={class:"col-12 col-sm-6"},De={class:"col-12 col-sm-6"},$e={class:"col-12 col-sm-6"},Fe={class:"col-12 col-sm-6"},Me={class:"col-12 col-sm-6"},je={class:"col-12 col-sm-6"},Re={class:"col-12 col-sm-6"},Te={key:0,class:"col-12 col-sm-6"},Ae={class:"row q-col-gutter-sm"},Oe={class:"text-subtitle2 q-mb-xs"},We={class:"rounded-borders overflow-hidden"},Ge={class:"row q-col-gutter-sm q-mb-md"},Je={class:"col-12 col-sm-6"},Le={class:"col-12 col-sm-6"},ze={class:"col-12 col-sm-6"},Ke={class:"col-12 col-sm-6"},Ye={class:"col-12 col-sm-6"},He={class:"col-12 col-sm-6"},Xe={class:"col-12 col-sm-6"},Ze={class:"row q-col-gutter-sm q-mb-md"},el={class:"col-12 col-sm-6"},ll={class:"col-12 col-sm-6"},ol={class:"col-12 col-sm-6"},sl={class:"col-12 col-sm-6"},tl={class:"col-12 col-sm-6"},al={class:"col-12 col-sm-6"},rl={class:"col-12 col-sm-6"},nl={key:0,class:"col-12 col-sm-6"},il={class:"row q-col-gutter-sm q-mb-md"},dl={class:"row items-center justify-between"},ml={class:"text-subtitle2"},ul={key:0},cl={class:"row items-center no-wrap"},pl=["href"],fl={key:1,class:"text-grey"},Y="https://storage.googleapis.com/a1aa/image/089155c9-d1c1-4945-5728-c9bdb3576171.jpg",Il=Object.assign({layout:fe},{__name:"MR",props:["documentTypes","offices","schemes"],setup(y){const{educationalQualifications:H,skills:W,formatDate:G}=_e(),V=y,k=ge(),D=F(!1),d=F("1"),e=re({avatar:null,name:"",email:"",mobile:"",parent_name:"",date_of_birth:"",address:"",post_assigned:"",employment_type:"MR",office:"",educational_qln:"",technical_qln:"",name_of_workplace:"",post_per_qualification:"",date_of_engagement:"",skill_category:"",skill_at_present:"",scheme:"",documents:[]}),$=F(null),R=F(null);function X(){var r;(r=R.value)==null||r.click()}function Z(r){const l=r.target.files[0];if(l&&l.size<=800*1024){const n=new FileReader;n.onload=()=>{$.value=n.result},e.avatar=l,n.readAsDataURL(l)}else alert("File too large or invalid type. Max size: 800KB.")}function ee(){$.value=null,R.value.value=null,e.avatar=null}const T=()=>{if(d.value==="1"){if(!e.name||!e.mobile||!e.parent_name||!e.date_of_birth||!e.educational_qln){k.notify({type:"negative",message:"Please fill all required Personal Info fields."});return}d.value="2"}else if(d.value==="2"){if(!e.employment_type||!e.post_assigned||!e.office||!e.skill_category||!e.skill_at_present||!e.date_of_engagement){k.notify({type:"negative",message:"Please fill all required Job Info fields."});return}d.value="3"}else d.value==="3"&&(d.value="4")},A=()=>{d.value==="4"?d.value="3":d.value==="3"?d.value="2":d.value==="2"&&(d.value="1")},le=r=>r?typeof r=="string"?r:URL.createObjectURL(r):"#",oe=()=>{k.dialog({title:"Confirm Submission",message:"Are you sure you want to submit?",cancel:!0,persistent:!0}).onOk(()=>{const r=new FormData;e.avatar&&r.append("avatar",e.avatar),r.append("name",e.name),r.append("email",e.email),r.append("mobile",e.mobile),r.append("parent_name",e.parent_name),r.append("date_of_birth",e.date_of_birth),r.append("address",e.address),r.append("post_assigned",e.post_assigned),r.append("employment_type",e.employment_type),r.append("office",e.office),r.append("educational_qln",e.educational_qln),r.append("technical_qln",e.technical_qln),r.append("name_of_workplace",e.name_of_workplace),r.append("post_per_qualification",e.post_per_qualification),r.append("date_of_engagement",e.date_of_engagement),r.append("skill_category",e.skill_category),r.append("skill_at_present",e.skill_at_present),r.append("scheme",e.scheme);for(const l in e.documents)e.documents[l]&&r.append(`documents[${l}]`,e.documents[l]);axios.post(route("employee.store"),r,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{const{employee:n,message:c}=l.data;k.notify({type:"positive",message:l.data.message||"Employee saved successfully."}),e.reset(),me.get(route("employee.show",n))}).catch(l=>{if(l.response){const n=l.response.data.errors,c=[];let i=null;if(n){for(const g in n)i||(i=g),n[g]&&c.push(...n[g]);if(e.errors=n,i){const q={name:1,email:1,mobile:1,parent_name:1,date_of_birth:1,educational_qln:1,technical_qln:1,employment_type:2,designation:2,date_of_engagement:2,name_of_workplace:2,office:2,post_per_qualification:2,skill_category:2,skill_at_present:2,scheme:2,documents:3}[i]||1;d.value=String(q)}k.notify({type:"negative",message:c.join(", ")})}else l.response.data.message&&k.notify({type:"negative",message:l.response.data.message})}else k.notify({type:"negative",message:"System Error. Please try again later."})})})},se=()=>{window.history.back()};return(r,l)=>(v(),ne(ae,{class:"container",padding:""},{default:f(()=>[s("div",ve,[s("div",null,[l[24]||(l[24]=s("div",{class:"stitle"},"Create Employee - Muster Roll",-1)),a(te,{class:"text-dark"},{default:f(()=>[a(O,{class:"cursor-pointer",icon:"dashboard",label:"Dashboard",onClick:l[0]||(l[0]=n=>r.$inertia.get(r.route("dashboard")))}),a(O,{class:"cursor-pointer",label:"All Employees",onClick:l[1]||(l[1]=n=>r.$inertia.get(r.route("employees.all")))}),a(O,{class:"cursor-pointer",label:"Go Back",onClick:se})]),_:1})])]),l[45]||(l[45]=s("br",null,null,-1)),a(pe,{onSubmit:ie(oe,["prevent"]),class:"bg-white q-pa-md"},{default:f(()=>[a(ue,{modelValue:d.value,"onUpdate:modelValue":l[23]||(l[23]=n=>d.value=n),ref:"stepper",animated:"",color:"secondary"},{default:f(()=>[a(j,{name:"1",title:"Personal Info",icon:"person",done:d.value>1},{default:f(()=>{var n,c,i,g,q,h,U,S,C,Q,P,x,E,I,N,B;return[s("div",be,[s("div",ye,[s("div",ke,[a(J,{src:$.value||Y,alt:"Profile Photo",style:{width:"120px",height:"120px"},"img-class":"object-cover"},null,8,["src"])]),s("div",qe,[s("div",Ve,[a(p,{label:"Upload new Photo",color:"primary",onClick:X,class:"text-weight-medium",rounded:"",unelevated:""}),a(p,{label:"Reset",color:"grey-4","text-color":"dark",onClick:ee,class:"text-weight-medium",rounded:"",unelevated:""})]),l[25]||(l[25]=s("p",{class:"text-subtitle2 text-grey-7"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1))])]),s("input",{ref_key:"fileInput",ref:R,type:"file",accept:"image/*",class:"hidden",onChange:Z},null,544)]),s("div",we,[s("div",he,[a(_,{modelValue:o(e).name,"onUpdate:modelValue":l[2]||(l[2]=t=>o(e).name=t),label:"Name *",outlined:"",dense:"",error:!!((n=o(e).errors)!=null&&n.name),"error-message":(c=o(e).errors)==null?void 0:c.name,rules:[t=>!!t||"Name is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ue,[a(_,{modelValue:o(e).email,"onUpdate:modelValue":l[3]||(l[3]=t=>o(e).email=t),label:"Email",type:"email",outlined:"",dense:"",error:!!((i=o(e).errors)!=null&&i.email),"error-message":(g=o(e).errors)==null?void 0:g.email},null,8,["modelValue","error","error-message"])]),s("div",Se,[a(_,{modelValue:o(e).mobile,"onUpdate:modelValue":l[4]||(l[4]=t=>o(e).mobile=t),label:"Mobile *",mask:"##########",outlined:"",dense:"",error:!!((q=o(e).errors)!=null&&q.mobile),"error-message":(h=o(e).errors)==null?void 0:h.mobile,rules:[t=>!!t||"Mobile is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ce,[a(_,{modelValue:o(e).parent_name,"onUpdate:modelValue":l[5]||(l[5]=t=>o(e).parent_name=t),label:"Parent Name *",outlined:"",dense:"",error:!!((U=o(e).errors)!=null&&U.parent_name),"error-message":(S=o(e).errors)==null?void 0:S.parent_name,rules:[t=>!!t||"Parent Name is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Qe,[a(_,{modelValue:o(e).date_of_birth,"onUpdate:modelValue":l[6]||(l[6]=t=>o(e).date_of_birth=t),label:"Date of Birth *",type:"date",outlined:"",dense:"",error:!!((C=o(e).errors)!=null&&C.date_of_birth),"error-message":(Q=o(e).errors)==null?void 0:Q.date_of_birth,rules:[t=>!!t||"Date of Birth is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Pe,[a(_,{modelValue:o(e).address,"onUpdate:modelValue":l[7]||(l[7]=t=>o(e).address=t),label:"Address",outlined:"",dense:"",error:!!((P=o(e).errors)!=null&&P.address),"error-message":(x=o(e).errors)==null?void 0:x.address},null,8,["modelValue","error","error-message"])]),s("div",xe,[a(w,{modelValue:o(e).educational_qln,"onUpdate:modelValue":l[8]||(l[8]=t=>o(e).educational_qln=t),options:o(H),label:"Educational Qualification *",outlined:"",dense:"","emit-value":"","map-options":"",error:!!((E=o(e).errors)!=null&&E.educational_qln),"error-message":(I=o(e).errors)==null?void 0:I.educational_qln,rules:[t=>!!t||"Education Qualification is required"]},null,8,["modelValue","options","error","error-message","rules"])]),s("div",Ee,[a(_,{modelValue:o(e).technical_qln,"onUpdate:modelValue":l[9]||(l[9]=t=>o(e).technical_qln=t),label:"Technical Qualification",outlined:"",dense:"",error:!!((N=o(e).errors)!=null&&N.technical_qln),"error-message":(B=o(e).errors)==null?void 0:B.technical_qln},null,8,["modelValue","error","error-message"])])]),a(M,null,{default:f(()=>[a(p,{flat:"",color:"negative",label:"Cancel",class:"q-ml-sm",onClick:l[10]||(l[10]=t=>r.$inertia.get(r.route("employees.all")))}),a(p,{color:"primary",label:"Next",onClick:T})]),_:1})]}),_:1},8,["done"]),a(j,{name:"2",title:"Job Info",icon:"work",done:d.value>2},{default:f(()=>{var n,c,i,g,q,h,U,S,C,Q,P,x,E,I,N,B;return[s("div",Ie,[s("div",Ne,[a(_,{modelValue:o(e).post_assigned,"onUpdate:modelValue":l[11]||(l[11]=t=>o(e).post_assigned=t),label:"Post/Work Assigned *",outlined:"",dense:"",error:!!((n=o(e).errors)!=null&&n.post_assigned),"error-message":(c=o(e).errors)==null?void 0:c.post_assigned},null,8,["modelValue","error","error-message"])]),s("div",Be,[a(w,{modelValue:o(e).office,"onUpdate:modelValue":l[12]||(l[12]=t=>o(e).office=t),label:"Office *",options:y.offices,"option-label":"name","option-value":"id","emit-value":"","map-options":"",outlined:"",dense:"",error:!!((i=o(e).errors)!=null&&i.office),"error-message":(g=o(e).errors)==null?void 0:g.office,rules:[t=>!!t||"Office is required"]},null,8,["modelValue","options","error","error-message","rules"])]),s("div",De,[a(_,{modelValue:o(e).date_of_engagement,"onUpdate:modelValue":l[13]||(l[13]=t=>o(e).date_of_engagement=t),label:"Date of Initial Engagement *",type:"date",outlined:"",dense:"",error:!!((q=o(e).errors)!=null&&q.date_of_engagement),"error-message":(h=o(e).errors)==null?void 0:h.date_of_engagement,rules:[t=>!!t||"Date of Initial Engagement is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",$e,[a(w,{modelValue:o(e).skill_category,"onUpdate:modelValue":l[14]||(l[14]=t=>o(e).skill_category=t),label:"Skill Category at Initial Engagement *",options:o(W),"emit-value":"","map-options":"",outlined:"",dense:"",error:!!((U=o(e).errors)!=null&&U.skill_category),"error-message":(S=o(e).errors)==null?void 0:S.skill_category,rules:[t=>!!t||"Skill Category at Initial Engagement is required"]},null,8,["modelValue","options","error","error-message","rules"])]),s("div",Fe,[a(w,{modelValue:o(e).skill_at_present,"onUpdate:modelValue":l[15]||(l[15]=t=>o(e).skill_at_present=t),label:"Skill at Present *",options:o(W),"emit-value":"","map-options":"",outlined:"",dense:"",error:!!((C=o(e).errors)!=null&&C.skill_at_present),"error-message":(Q=o(e).errors)==null?void 0:Q.skill_at_present,rules:[t=>!!t||"Skill at Present is required"]},null,8,["modelValue","options","error","error-message","rules"])]),s("div",Me,[a(_,{modelValue:o(e).post_per_qualification,"onUpdate:modelValue":l[16]||(l[16]=t=>o(e).post_per_qualification=t),label:"Post Selected",outlined:"",dense:"",error:!!((P=o(e).errors)!=null&&P.post_per_qualification),"error-message":(x=o(e).errors)==null?void 0:x.post_per_qualification},null,8,["modelValue","error","error-message"])]),s("div",je,[a(_,{modelValue:o(e).name_of_workplace,"onUpdate:modelValue":l[17]||(l[17]=t=>o(e).name_of_workplace=t),label:"Workplace",outlined:"",dense:"",error:!!((E=o(e).errors)!=null&&E.name_of_workplace),"error-message":(I=o(e).errors)==null?void 0:I.name_of_workplace},null,8,["modelValue","error","error-message"])]),s("div",Re,[a(w,{modelValue:D.value,"onUpdate:modelValue":l[18]||(l[18]=t=>D.value=t),options:[{label:"Yes",value:!0},{label:"No",value:!1}],label:"Does Employee belong to a Scheme? *",outlined:"",dense:"","emit-value":"","map-options":""},null,8,["modelValue"])]),D.value?(v(),b("div",Te,[a(w,{modelValue:o(e).scheme,"onUpdate:modelValue":l[19]||(l[19]=t=>o(e).scheme=t),label:"Scheme *",options:y.schemes,"option-label":"name","option-value":"id","emit-value":"","map-options":"",outlined:"",dense:"",error:!!((N=o(e).errors)!=null&&N.scheme),"error-message":(B=o(e).errors)==null?void 0:B.scheme,rules:[t=>!!t||"Scheme is required"]},null,8,["modelValue","options","error","error-message","rules"])])):L("",!0)]),a(M,null,{default:f(()=>[a(p,{flat:"",color:"negative",label:"Cancel",class:"q-ml-sm",onClick:l[20]||(l[20]=t=>r.$inertia.get(r.route("employees.all")))}),a(p,{flat:"",color:"primary",label:"Back",onClick:A,class:"q-ml-sm"}),a(p,{color:"primary",label:"Next",onClick:T,class:"q-ml-sm"})]),_:1})]}),_:1},8,["done"]),a(j,{name:"3",title:"Upload Documents",icon:"cloud_upload",done:d.value>3},{default:f(()=>[s("div",Ae,[(v(!0),b(z,null,K(y.documentTypes,(n,c)=>(v(),b("div",{class:"col-12 col-sm-6",key:n.id},[s("div",Oe,m(n.name),1),a(ce,{filled:"",modelValue:o(e).documents[n.id],"onUpdate:modelValue":i=>o(e).documents[n.id]=i,label:"Upload File",accept:".pdf,.jpg,.jpeg,.png",counter:!0,clearable:"",class:"full-width"},null,8,["modelValue","onUpdate:modelValue"])]))),128))]),a(M,null,{default:f(()=>[a(p,{flat:"",color:"negative",label:"Cancel",class:"q-ml-sm",onClick:l[21]||(l[21]=n=>r.$inertia.get(r.route("employees.all")))}),a(p,{flat:"",color:"primary",label:"Back",onClick:A,class:"q-ml-sm"}),a(p,{color:"primary",label:"Next",onClick:T})]),_:1})]),_:1},8,["done"]),a(j,{name:"4",title:"Preview Information",icon:"visibility",done:d.value>4},{default:f(()=>{var n,c;return[s("div",We,[a(J,{src:$.value||Y,alt:"Profile Photo",style:{width:"120px",height:"120px"},"img-class":"object-cover"},null,8,["src"])]),l[42]||(l[42]=s("div",{class:"q-mb-md text-h6"},"Personal Info",-1)),s("div",Ge,[s("div",Je,[l[26]||(l[26]=s("strong",null,"Name:",-1)),u(" "+m(o(e).name),1)]),s("div",Le,[l[27]||(l[27]=s("strong",null,"Email:",-1)),u(" "+m(o(e).email),1)]),s("div",ze,[l[28]||(l[28]=s("strong",null,"Mobile:",-1)),u(" "+m(o(e).mobile),1)]),s("div",Ke,[l[29]||(l[29]=s("strong",null,"Parent Name:",-1)),u(" "+m(o(e).parent_name),1)]),s("div",Ye,[l[30]||(l[30]=s("strong",null,"Date of Birth:",-1)),u(" "+m(o(G)(o(e).date_of_birth)),1)]),s("div",He,[l[31]||(l[31]=s("strong",null,"Education:",-1)),u(" "+m(o(e).educational_qln),1)]),s("div",Xe,[l[32]||(l[32]=s("strong",null,"Technical Qualification:",-1)),u(" "+m(o(e).technical_qln),1)])]),l[43]||(l[43]=s("div",{class:"q-mb-md text-h6"},"Job Info",-1)),s("div",Ze,[l[41]||(l[41]=s("div",{class:"col-12 col-sm-6"},[s("strong",null,"Employment Type:"),u(" Muster Roll")],-1)),s("div",el,[l[33]||(l[33]=s("strong",null,"Office:",-1)),u(" "+m(((n=((V==null?void 0:V.offices)||y.offices).find(i=>String(i.id)===String(o(e).office)))==null?void 0:n.name)||""),1)]),s("div",ll,[l[34]||(l[34]=s("strong",null,"Post/Work Assigned:",-1)),u(" "+m(o(e).post_assigned),1)]),s("div",ol,[l[35]||(l[35]=s("strong",null,"Date of Initial Engagement:",-1)),u(" "+m(o(G)(o(e).date_of_engagement)),1)]),s("div",sl,[l[36]||(l[36]=s("strong",null,"Skill Category at Initial Engagement:",-1)),u(" "+m(o(e).skill_category),1)]),s("div",tl,[l[37]||(l[37]=s("strong",null,"Skill at Present:",-1)),u(" "+m(o(e).skill_at_present),1)]),s("div",al,[l[38]||(l[38]=s("strong",null,"Post Selected:",-1)),u(" "+m(o(e).post_per_qualification),1)]),s("div",rl,[l[39]||(l[39]=s("strong",null,"Workplace:",-1)),u(" "+m(o(e).name_of_workplace),1)]),D.value?(v(),b("div",nl,[l[40]||(l[40]=s("strong",null,"Scheme:",-1)),u(m(((c=((V==null?void 0:V.schemes)||y.schemes).find(i=>String(i.id)===String(o(e).scheme)))==null?void 0:c.name)||""),1)])):L("",!0)]),l[44]||(l[44]=s("div",{class:"q-mb-md text-h6"},"Uploaded Documents",-1)),s("div",il,[(v(!0),b(z,null,K(y.documentTypes,(i,g)=>(v(),b("div",{class:"col-12 col-sm-6",key:i.id},[s("div",dl,[s("div",ml,[s("strong",null,m(i.name),1)]),o(e).documents[i.id]?(v(),b("div",ul,[s("div",cl,[s("a",{href:le(o(e).documents[i.id]),target:"_blank",class:"text-primary text-weight-medium"},[a(de,{name:"visibility",class:"q-mr-xs"})],8,pl)])])):(v(),b("div",fl,"No document uploaded"))])]))),128))]),a(M,null,{default:f(()=>[a(p,{flat:"",color:"negative",label:"Cancel",class:"q-ml-sm",onClick:l[22]||(l[22]=i=>r.$inertia.get(r.route("employees.all")))}),a(p,{flat:"",color:"primary",label:"Back",onClick:A,class:"q-ml-sm"}),a(p,{type:"submit",color:"btn-primary",label:"Submit"})]),_:1})]}),_:1,__:[42,43,44]},8,["done"])]),_:1},8,["modelValue"])]),_:1})]),_:1,__:[45]}))}});export{Il as default};
