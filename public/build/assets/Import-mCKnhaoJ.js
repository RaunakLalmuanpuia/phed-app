import{Q,a as p}from"./QBreadcrumbs-C9FQqerD.js";import{Q as c}from"./QSelect-DYScMFEW.js";import{Q as w}from"./QFile-D_r9rjJ4.js";import{r as V,c as f,o as y,w as n,b as s,f as t,p as v,q as m,l as I,e as q,m as _}from"./app-CQP7oEou.js";import{Q as x}from"./QLayout-BsP_hYUS.js";import{_ as C}from"./BackendLayout-B51gh9WN.js";import{u as h}from"./use-quasar-B-Zlj9K4.js";import"./touch-DRvNqZ5Q.js";const k={class:"flex items-center justify-between q-pa-md bg-white"},D={class:"q-pa-md"},S={class:"row q-col-gutter-md"},B={class:"row q-gutter-sm col-12 col-sm justify-end"},M=Object.assign({layout:C},{__name:"Import",props:["office","canImport"],setup(r){const i=h(),o=V({type:null,office:null,document:null}),b=[{label:"MR",value:"MR"},{label:"PE",value:"PE"}],g=()=>{i.dialog({title:"Confirm Import",message:"Are you sure you want to import the data?",cancel:!0,persistent:!0}).onOk(()=>{const l=new FormData;l.append("type",o.value.type),l.append("office",o.value.office),l.append("document",o.value.document),axios.post(route("mis.import-employee"),l,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{i.notify({type:"positive",message:"Data Successfully Imported"})}).catch(e=>{if(e.response){const a=e.response.data.errors,d=[];if(a){for(const u in a)a[u]&&d.push(...a[u]);i.notify({type:"negative",message:d})}else e.response.data.message&&i.notify({type:"negative",message:e.response.data.message})}else i.notify({type:"negative",message:"System Error. Please try again later."})})})};return(l,e)=>(y(),f(x,{class:"container",padding:""},{default:n(()=>[s("div",k,[s("div",null,[e[4]||(e[4]=s("div",{class:"stitle"},"Import Data",-1)),t(Q,{class:"text-dark"},{default:n(()=>[t(p,{onClick:e[0]||(e[0]=a=>l.$inertia.get(l.route("dashboard"))),icon:"dashboard",label:"Dashboard"}),t(p,{label:"Import",to:l.route("mis.import")},null,8,["to"])]),_:1})])]),e[6]||(e[6]=s("br",null,null,-1)),t(v,{flat:""},{default:n(()=>[t(m,null,{default:n(()=>[s("div",D,[t(v,{flat:"",class:"q-mt-md bg-white shadow-1"},{default:n(()=>[t(m,null,{default:n(()=>[e[5]||(e[5]=s("div",{class:"text-subtitle1 text-weight-medium text-grey-8 q-mb-md"}," Import Filter ",-1)),s("div",S,[t(c,{label:"Select Office",class:"col-12 col-sm-4",modelValue:o.value.office,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.office=a),options:r.office,"option-label":"name","option-value":"id","emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),t(c,{label:"Select Employment Type",class:"col-12 col-sm-4",modelValue:o.value.type,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.type=a),options:b,"emit-value":"","map-options":"",outlined:"",dense:"",clearable:""},null,8,["modelValue"]),t(w,{label:"Upload Document",class:"col-12 col-sm-4",modelValue:o.value.document,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.document=a),accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",outlined:"",dense:"",clearable:"","use-chips":"",counter:!1},null,8,["modelValue"])])]),_:1,__:[5]}),t(I),t(m,{class:"row items-center justify-between q-gutter-md"},{default:n(()=>[s("div",B,[r.canImport?(y(),f(_,{key:0,label:"Import Data",icon:"add",color:"primary",onClick:g})):q("",!0)])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1,__:[6]}))}});export{M as default};
